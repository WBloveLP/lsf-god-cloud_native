"use strict";(self["webpackChunkclaimApp_web"]=self["webpackChunkclaimApp_web"]||[]).push([[861],{2402:function(e,a,o){o.d(a,{Ql:function(){return t},f6:function(){return r},ot:function(){return s}});var l=o(4471);const s=e=>l.Z.post("/task/queryTask",e),t=e=>l.Z.post("/task/list",e),r=e=>(0,l.Z)({url:"/taskinfo/tasks",method:"get",params:e})},3861:function(e,a,o){o.d(a,{Z:function(){return te}});o(7658),o(2490),o(9849),o(9461),o(4514),o(9924);var l=o(6252),s=o(3577),t=o(2262),r=o(4052),i=o(1308),d=o(6512),n=o(1831),u=o(8339),c=o(9659),p=o(4029),m=o(6523),v=o(5592),y=o(2487),f=o(2402),C=o(7350);const g={class:"container"},A={key:0,style:{"max-height":"95vh",overflow:"scroll"}},h={style:{"box-shadow":"0 0.25rem 0.75rem rgba(0, 0, 0, 0.08)",width:"95%",margin:"1rem auto","background-color":"white","padding-bottom":"0.5rem"}},w={style:{position:"relative"}},k={class:"total-amount-badge"},I={key:0},T={class:"info-list"},_={class:"form-item"},b={class:"form-content"},P={class:"property-list"},N={class:"property-content"},F={class:"property-name"},O={style:{"box-shadow":"0 0.25rem 0.75rem rgba(0, 0, 0, 0.08)",margin:"1rem auto","background-color":"white"}},x={style:{"box-shadow":"0 0.25rem 0.75rem rgba(0, 0, 0, 0.08)",width:"95%",margin:"1rem auto","background-color":"white"}},V={class:"property-popup"},L={class:"info-list"},q={class:"form-item"},K={class:"form-content"},S={class:"form-item"},U={class:"form-content"},W={class:"form-item"},j={class:"form-content"},E={class:"form-item"},H={class:"form-content"},D={class:"form-item"},R={class:"form-content"},B={class:"form-item"},Y={class:"form-content"},z={class:"form-item"},M={class:"form-content"},Q={class:"form-item"},Z={class:"form-content"},J={class:"form-item"},X={class:"form-content"},G={class:"form-item"},$={class:"form-content"},ee={class:"popup-actions"},ae={class:"footer-btn"};var oe={__name:"settingPropertyLoss",props:{roleflag:{type:String,default:""},lossitemId:{type:String,default:""},licenseNo:{type:String,default:""},taskId:{type:String,default:""},showAssessmentInfo:{type:Boolean,default:!1},commitBtn:{type:Boolean,default:!1},showSurveyList:{type:Boolean,default:!1},showEditSurvey:{type:Boolean,default:!1},showThirdInfo:{type:Boolean,default:!1},fromLossItemCar:{type:Boolean,default:!1},isImmediateLoss:{type:Boolean,default:!1},carItem:{type:Object,default:()=>({})},isReadOnly:{type:Boolean,default:!1}},emits:["close-component","update:showAssessmentInfo","update:showSurveyList","update:showEditSurvey","update:showThirdInfo"],setup(e,{expose:a,emit:oe}){const le=(0,u.yj)(),se=e,te=oe,re=(0,t.iH)(o(1689)),ie=(0,t.iH)(o(1959)),de=(0,t.iH)(o(2614)),ne=(0,t.iH)(["1"]),ue=(0,t.iH)(!1),ce=(0,t.iH)(!1),pe=(0,t.iH)(-1),me=(0,t.iH)(!1),ve=(0,t.iH)(""),ye=(0,t.iH)([]),fe=(0,t.iH)({coverageCode:[],lossApprovalKindCode:[],feeType:[],propPeciesCode:[],recycleType:[]}),Ce=(0,t.qj)({}),ge=(0,t.iH)([]),Ae=(0,t.qj)({id:"",lossApprovalKindCode:"",propPeciesCode:"",recycleType:"",lossItemName:"",feeType:"",lossItemNum:"",lossItemPrice:"",residualFee:"",sumLossFee:"",remark:""}),he=(0,t.iH)(!1),we=(0,t.iH)([]),ke=(0,t.iH)(""),Ie=(0,t.iH)(""),Te=(0,t.iH)(null),_e=(0,t.iH)({}),be=((0,t.iH)([]),(0,t.iH)(null)),Pe=(0,t.iH)(null),Ne=(0,t.iH)(!1),Fe=(0,t.iH)(se.showAssessmentInfo);(0,l.YP)((()=>se.showAssessmentInfo),(e=>{Fe.value=e}));const Oe={lossApprovalKindCode:{required:!0,message:"请选择险别"},propPeciesCode:{required:!0,message:"请选择财产种类"},recycleType:{required:!0,message:"请选择回收方式"},lossItemName:{required:!0,message:"请输入财产名称"},feeType:{required:!0,message:"请选择费用名称"},lossItemNum:{required:!0,message:"请输入数量",validator:e=>{if(!e&&0!==e)return"请输入数量";const a=parseFloat(e);return isNaN(a)||a<=0?"数量必须为大于0的数字":!!/^\d+(\.\d{1,2})?$/.test(e)||"数量最多支持两位小数"}},lossItemPrice:{required:!0,message:"请输入单价",validator:e=>{if(!e&&0!==e)return"请输入单价";const a=parseFloat(e);return isNaN(a)||a<0?"单价不能为负数":!!/^\d+(\.\d{1,2})?$/.test(e)||"单价最多支持两位小数"}},residualFee:{required:!0,message:"请输入残值金额",validator:e=>{if(!e&&0!==e)return"请输入残值金额";const a=parseFloat(e);return isNaN(a)||a<0?"残值金额不能为负数":!!/^\d+(\.\d{1,2})?$/.test(e)||"残值金额最多支持两位小数"}},sumLossFee:{required:!0,message:"金额不能为负数",validator:e=>{const a=parseFloat(e);return!(isNaN(a)||a<0)||"金额不能为负数"}}};(0,l.YP)((()=>[Ae.lossItemNum,Ae.lossItemPrice,Ae.residualFee]),(()=>{const e=parseFloat(Ae.lossItemNum)||0,a=parseFloat(Ae.lossItemPrice)||0,o=parseFloat(Ae.residualFee)||0,l=e*a-o;Ae.sumLossFee=Math.max(0,l).toFixed(2)}));const xe=async()=>{try{const e=await(0,c.getCodeOptions)("coverageCode");fe.value.coverageCode=e||[],await Ue();const[a,o,l]=await Promise.all([(0,c.getCodeOptions)("expensesCode"),(0,c.getCodeOptions)("propPeciesCode"),(0,c.getCodeOptions)("recycleType")]);fe.value.feeType=a||[],fe.value.propPeciesCode=o||[],fe.value.recycleType=l||[]}catch(e){console.error("加载码表数据失败:",e)}},Ve=(e,a)=>{if(!e)return"";const o=fe.value[a];if(!o||!Array.isArray(o))return e;const l=o.find((a=>a.value===e));return l?l.text:e},Le=async()=>{ve.value="feeType",fe.value.feeType&&0!==fe.value.feeType.length||(fe.value.feeType=await(0,c.getCodeOptions)("costCategory")),ye.value=fe.value.feeType,me.value=!0},qe=e=>{console.log("接赔人信息更新:",e)},Ke=e=>{_e.value=e},Se=e=>{if(!ve.value)return;let a;a=e.selectedOptions&&e.selectedOptions.length>0?e.selectedOptions[0]:e&&void 0!==e.text&&void 0!==e.value?e:{text:String(e),value:e},Ae[ve.value]=a,me.value=!1,ve.value=""},Ue=async()=>{try{const e=le.query.registNo;if(!e)return void(fe.value.lossApprovalKindCode=[]);const a=await(0,p.yj)(e);if(200===a.data.code&&a.data.data){const e=a.data.data;if(e.policyItemKindList&&Array.isArray(e.policyItemKindList)){const a=e.policyItemKindList.map((e=>({value:e.itemCode,text:""}))).filter((e=>e.value));console.log("原始险别数据:",a),console.log("coverageCode数据:",fe.value.coverageCode);const o=a.map((e=>{const a=fe.value.coverageCode.find((a=>a.value===e.value));return{value:e.value,text:a?a.text:e.text}}));fe.value.lossApprovalKindCode=o,console.log("增强后的险别数据:",o)}else fe.value.lossApprovalKindCode=[]}}catch(e){console.error("加载险别数据失败:",e),fe.value.lossApprovalKindCode=[]}},We=()=>{const e=Je();if(e.length>0)return void(0,n.CF)(e[0]);const a={...Ae,feeTypeName:Ae.feeType.text,feeTypeCode:Ae.feeType.value,lossApprovalKindCodeName:Ae.lossApprovalKindCode.text,lossApprovalKindCodeValue:Ae.lossApprovalKindCode.value,propPeciesCodeName:Ae.propPeciesCode.text,propPeciesCodeValue:Ae.propPeciesCode.value,recycleTypeName:Ae.recycleType.text,recycleTypeValue:Ae.recycleType.value};ge.value.push(a),Ye(),ue.value=!1,(0,n.CF)("添加成功")},je=async()=>{ve.value="lossApprovalKindCode",fe.value.lossApprovalKindCode&&0!==fe.value.lossApprovalKindCode.length||await Ue(),ye.value=fe.value.lossApprovalKindCode,me.value=!0},Ee=async()=>{ve.value="propPeciesCode",fe.value.propPeciesCode&&0!==fe.value.propPeciesCode.length||(fe.value.propPeciesCode=await(0,c.getCodeOptions)("propPeciesCode")),ye.value=fe.value.propPeciesCode,me.value=!0},He=async()=>{ve.value="recycleType",fe.value.recycleType&&0!==fe.value.recycleType.length||(fe.value.recycleType=await(0,c.getCodeOptions)("recycleType")),ye.value=fe.value.recycleType,me.value=!0},De=(e,a)=>{se.isReadOnly||e&&(Object.keys(Ae).forEach((a=>{if(void 0!==e[a])if(["feeType","lossApprovalKindCode","propPeciesCode","recycleType"].includes(a))if(e[a]&&"object"===typeof e[a]&&void 0!==e[a].value)Ae[a]={...e[a]};else if(e[`${a}Code`]||e[`${a}Value`]){const o=e[`${a}Code`]||e[`${a}Value`];Ae[a]=aa(o,a)}else"string"===typeof e[a]&&(Ae[a]=aa(e[a],a));else Ae[a]=e[a]})),ce.value=!0,pe.value=a,ue.value=!0)},Re=()=>{const e=Je();if(e.length>0)(0,n.CF)(e[0]);else if(pe.value>=0&&pe.value<ge.value.length){const e={...Ae,feeTypeName:Ae.feeType.text,feeTypeCode:Ae.feeType.value,lossApprovalKindCodeName:Ae.lossApprovalKindCode.text,lossApprovalKindCodeValue:Ae.lossApprovalKindCode.value,propPeciesCodeName:Ae.propPeciesCode.text,propPeciesCodeValue:Ae.propPeciesCode.value,recycleTypeName:Ae.recycleType.text,recycleTypeValue:Ae.recycleType.value};ge.value[pe.value]=e,Ye(),ce.value=!1,pe.value=-1,ue.value=!1,(0,n.CF)("更新成功")}},Be=e=>{se.isReadOnly||e>=0&&e<ge.value.length&&ge.value.splice(e,1)},Ye=()=>{Object.assign(Ae,{lossItemName:"",lossItemNum:"",lossItemPrice:"",residualFee:"",sumLossFee:"0",feeType:{text:"",value:""},remark:"",lossApprovalKindCode:{text:"",value:""},propPeciesCode:{text:"",value:""},recycleType:{text:"",value:""}})},ze=()=>{Ye(),ce.value=!1,pe.value=-1,ue.value=!1,me.value=!1},Me=async()=>{if(!ge.value||0===ge.value.length)throw new Error("暂无数据，请录入");const e={taskID:se.taskId||le.query.taskId||"",registNo:le.query.registNo||"",propLossItemVOS:ge.value.map((e=>{const a=Xe(e.feeType)||e.feeTypeCode||"",o=Xe(e.lossApprovalKindCode)||e.lossApprovalKindCodeValue||"",l=Xe(e.propPeciesCode)||e.propPeciesCodeValue||"",s=Xe(e.recycleType)||e.recycleTypeValue||"";return{lossItemName:e.lossItemName,lossItemNum:e.lossItemNum,lossItemPrice:e.lossItemPrice,residualFee:e.residualFee,sumLossFee:e.sumLossFee,feeTypeCode:a,remark:e.remark||"",lossApprovalKindCode:o,propPeciesCode:l,recycleType:s}})),isSubmit:"N",isCheck:"Y"};if(ke.value&&(e.belongToObjectId=ke.value),be.value&&"function"===typeof be.value.getFormData){const a=be.value.getFormData();a&&Array.isArray(a)&&a.length>0&&(e.directcostlossVOs=a.map((e=>({accounid:e.accounid,chargeCode:e.chargeCode,kindCode:e.kindCode,payExcreasonType:e.payExcreasonType,invoiceAmount:e.invoiceAmount,payeeType:e.payeeType}))))}return e},Qe=async e=>{if("commitThird"===e)Fe.value=!0,localSurveyList.value=!0,localEditSurvey.value=!0,localThirdInfo.value=!1,showCommenInfo.value=!1,te("update:showAssessmentInfo",!0),te("update:showSurveyList",!0),te("update:showEditSurvey",!0),te("update:showThirdInfo",!1);else try{if(!ke.value)return void(0,n.CF)({type:"fail",message:"请选择归属车辆"});const o=await Me();o.isSubmit="save"===e?"N":"Y",se.fromLossItemCar?o.isCheck="Y":o.isCheck="N";const l=await(0,d.Zj)(o);if(200===l.data.code){if((0,n.CF)({type:"success",message:"save"===e?"保存成功":"提交成功"}),le.query.registNo)try{await(0,f.f6)({registNo:le.query.registNo})}catch(a){console.error("更新案件进度失败:",a)}ge.value=[],Ye(),te("close-component")}else(0,n.CF)({type:"fail",message:l.data.message||"操作失败"})}catch(a){(0,n.CF)({type:"fail",message:a.message||"操作失败"})}},Ze=(e,a)=>{let o=a.replace(/[^\d.]/g,"");const l=o.split(".");l.length>2&&(o=l[0]+"."+l.slice(1).join("")),2===l.length&&l[1].length>2&&(o=l[0]+"."+l[1].substring(0,2)),Ae[e]=o},Je=()=>{const e=[];Object.keys(Oe).forEach((a=>{const o=Oe[a],l=Ae[a];if(o.required)if("object"===typeof l){if(!l||!l.value)return void e.push(o.message)}else if(!l&&0!==l)return void e.push(o.message);if(o.validator){const a=o.validator(l);!0!==a&&e.push(a)}}));const a=parseFloat(Ae.sumLossFee);(isNaN(a)||a<0)&&e.push("总金额不能为负数");const o=parseFloat(Ae.lossItemNum)||0,l=parseFloat(Ae.lossItemPrice)||0,s=parseFloat(Ae.residualFee)||0,t=o*l-s;return Math.abs(t-a)>.01&&e.push("金额计算错误，请检查数量、单价和残值金额"),e},Xe=e=>e?"string"===typeof e?e:void 0!==e.value?e.value:"":"",Ge=async()=>{try{const e=se.taskId||le.query.taskId;if(!e)return void console.log("未找到taskID，跳过数据加载");await xe();const a=await(0,m.k9)({taskID:e});200===a.data.code?(Pe.value=a.data.data,Ne.value=!0,$e(a.data.data)):console.log("获取财产损失数据失败:",a.data.message)}catch(e){console.error("调用propLossInfo接口失败:",e),Ne.value=!1}},$e=e=>{e&&Array.isArray(e)?(ge.value=[],e.forEach(((e,a)=>{const o=ea(e);o&&ge.value.push(o)})),console.log("数据回显完成，propertyList:",ge.value)):console.log("接口返回数据为空或格式不正确")},ea=e=>e?{lossItemName:e.lossItemName||"",lossItemNum:e.lossItemNum||"",lossItemPrice:e.lossItemPrice||"",sumLossFee:e.sumLossFee||"0",residualFee:e.residualFee||"",remark:e.remark||"",feeType:aa(e.feeTypeCode,"feeType"),lossApprovalKindCode:aa(e.lossApprovalKindCode,"lossApprovalKindCode"),propPeciesCode:aa(e.propPeciesCode,"propPeciesCode"),recycleType:aa(e.recycleType,"recycleType"),feeTypeCode:e.feeTypeCode||"",lossApprovalKindCodeValue:e.lossApprovalKindCode||"",propPeciesCodeValue:e.propPeciesCode||"",recycleTypeValue:e.recycleType||""}:null,aa=(e,a)=>{if(!e)return{text:"",value:""};const o=fe.value[a];if(!o||!Array.isArray(o))return{text:e,value:e};const l=o.find((a=>a.value===e));return l?{...l}:{text:e,value:e}};(0,l.YP)((()=>se.taskId),(e=>{e&&Ge()})),(0,l.YP)((()=>se.showSurveyList),(e=>{localSurveyList.value=e})),(0,l.YP)((()=>se.showEditSurvey),(e=>{localEditSurvey.value=e})),(0,l.YP)((()=>se.showThirdInfo),(e=>{localThirdInfo.value=e}));const oa=()=>{te("close-component")},la=async()=>{try{const e={registNo:le.query.registNo,taskId:se.taskId||le.query.taskId,lossitemId:se.lossitemId},a=await(0,m.k9)(e);if(200===a.data.code){const e=a.data.data;if(e&&e.itemCarLossInfos&&Array.isArray(e.itemCarLossInfos)&&(we.value=e.itemCarLossInfos.map((e=>({text:e.licenseNo||"车外",value:e.belongToObjectId}))),e.belongToObjectId)){ke.value=e.belongToObjectId;const a=we.value.find((a=>a.value===e.belongToObjectId));a&&(Ie.value=a.text)}await xe(),e&&e.propLossItemVOS&&Array.isArray(e.propLossItemVOS)&&(ge.value=e.propLossItemVOS.map((e=>({...e,feeType:{value:e.feeTypeCode||"",text:Ve(e.feeTypeCode,"feeType")||e.feeTypeName||""},lossApprovalKindCode:{value:e.lossApprovalKindCode||"",text:Ve(e.lossApprovalKindCode,"lossApprovalKindCode")||e.lossApprovalKindCodeName||""},propPeciesCode:{value:e.propPeciesCode||"",text:Ve(e.propPeciesCode,"propPeciesCode")||e.propPeciesCodeName||""},recycleType:{value:e.recycleType||"",text:Ve(e.recycleType,"recycleType")||e.recycleTypeName||""}})))),e&&e.directcostlossVOs&&Array.isArray(e.directcostlossVOs)&&be.value&&be.value.updateFormData(e.directcostlossVOs)}}catch(e){console.error("获取财产损失信息失败:",e)}},sa=({selectedOptions:e})=>{if(e&&e.length>0){const a=e[0];ke.value=a.value,Ie.value=a.text}he.value=!1},ta=async()=>{try{const e=await(0,p.yj)(le.query.registNo);200===e.data.code&&Object.assign(Ce,e.data.data)}catch(e){console.error("获取案件信息失败:",e)}};a({getPayeeData:()=>{if(Te.value){const e=Te.value.getFormData();return e?{payeeList:e.payeeList}:null}return null},reloadPayeeData:async()=>{Te.value&&await Te.value.reloadPayeeData()}}),(0,l.bv)((async()=>{await xe(),await ta(),Te.value&&await Te.value.reloadPayeeData(),be.value&&(await be.value.loadRecipientData(),await be.value.loadPayeeTypeOptions(),await be.value.loadExceptionOptions(),await be.value.loadInsuranceOptions()),await la(),be.value&&Pe.value&&Pe.value.directcostlossVOs&&be.value.updateFormData(Pe.value.directcostlossVOs)}));const ra=async()=>{if(Ye(),ce.value=!1,pe.value=-1,Te.value&&"function"===typeof Te.value.reloadPayeeData)try{await Te.value.reloadPayeeData()}catch(e){console.error("加载接赔人数据失败:",e)}if(be.value&&"function"===typeof be.value.loadPayeeTypeOptions)try{await be.value.loadPayeeTypeOptions()}catch(e){console.error("加载支付对象类型选项失败:",e)}if(be.value&&"function"===typeof be.value.loadExceptionOptions)try{await be.value.loadExceptionOptions()}catch(e){console.error("加载例外修改类型选项失败:",e)}if(be.value&&"function"===typeof be.value.loadInsuranceOptions)try{await be.value.loadInsuranceOptions()}catch(e){console.error("加载险别代码选项失败:",e)}ue.value=!0};return(a,o)=>{const t=(0,l.up)("van-nav-bar"),d=(0,l.up)("van-collapse-item"),n=(0,l.up)("van-collapse"),u=(0,l.up)("van-field"),c=(0,l.up)("van-icon"),p=(0,l.up)("van-button"),m=(0,l.up)("van-picker"),f=(0,l.up)("van-popup"),oe=(0,l.up)("van-col"),le=(0,l.up)("van-row");return(0,l.wg)(),(0,l.iD)("div",g,["target"===e.roleflag?((0,l.wg)(),(0,l.j4)(t,{key:0,title:"财产定损-标的车","left-arrow":"",onClickLeft:oa})):(0,l.kq)("",!0),"third"===e.roleflag?((0,l.wg)(),(0,l.j4)(t,{key:1,title:"财产定损-三者车","left-arrow":"",onClickLeft:oa})):(0,l.kq)("",!0),"person2"===e.roleflag?((0,l.wg)(),(0,l.j4)(t,{key:2,title:"财产定损-三者车","left-arrow":"",onClickLeft:oa})):(0,l.kq)("",!0),"person1"===e.roleflag?((0,l.wg)(),(0,l.j4)(t,{key:3,title:"财产定损-标的车","left-arrow":"",onClickLeft:oa})):(0,l.kq)("",!0),(0,l._)("div",null,[a.showCommenInfo&&!e.fromLossItemCar?((0,l.wg)(),(0,l.iD)("div",A,[(0,l.Wm)(n,{modelValue:ne.value,"onUpdate:modelValue":o[0]||(o[0]=e=>ne.value=e),style:{"margin-top":"1.5rem"}},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{name:"1",style:{"box-shadow":"0 0.25rem 0.75rem rgba(0, 0, 0, 0.08)"}},{title:(0,l.w5)((()=>[(0,l.Wm)(r.Z,{titleName:"报案信息",imgurl:re.value},null,8,["imgurl"])])),default:(0,l.w5)((()=>[(0,l.Wm)(i.Z,{offenseInfoList:Ce},null,8,["offenseInfoList"])])),_:1})])),_:1},8,["modelValue"])])):(0,l.kq)("",!0)]),(0,l.Wm)(C.Z),(0,l._)("div",h,[(0,l._)("div",w,[(0,l.Wm)(r.Z,{titleName:"总损失金额",imgurl:ie.value},null,8,["imgurl"]),(0,l._)("div",k,[a.totalLossAmount?((0,l.wg)(),(0,l.iD)("span",I,"￥")):(0,l.kq)("",!0),(0,l.Uk)(" "+(0,s.zw)(a.totalLossAmount),1)])]),(0,l._)("div",T,[(0,l._)("div",_,[o[21]||(o[21]=(0,l._)("div",{class:"form-label"},[(0,l.Uk)(" 归属车辆"),(0,l._)("span",{class:"required-star"},"*")],-1)),(0,l._)("div",b,[(0,l.Wm)(u,{readonly:"",clickable:"","model-value":Ie.value,placeholder:"请选择归属车辆","right-icon":"arrow",onClick:o[1]||(o[1]=a=>e.isReadOnly?null:he.value=!0)},null,8,["model-value"])])])]),e.isReadOnly?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",{key:0,class:"editSurvey",onClick:o[2]||(o[2]=e=>ra())},[(0,l.Wm)(c,{name:"add-o",size:"1.3rem",style:{"margin-right":"0.5rem"}}),o[22]||(o[22]=(0,l.Uk)("添加财产损失 ",-1))])),(0,l._)("div",P,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(ge.value,((a,t)=>((0,l.wg)(),(0,l.iD)("div",{key:t,class:"property-item"},[(0,l._)("div",N,[(0,l._)("span",F,(0,s.zw)(a.lossItemName)+"【￥"+(0,s.zw)(a.sumLossFee)+"】",1),e.isReadOnly?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(p,{key:0,size:"small",type:"primary",class:"edit-btn",onClick:e=>De(a,t)},{default:(0,l.w5)((()=>[...o[23]||(o[23]=[(0,l.Uk)(" 编辑 ",-1)])])),_:1},8,["onClick"]))]),e.isReadOnly?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(c,{key:0,name:"cross",class:"property-delete-icon",onClick:e=>Be(t)},null,8,["onClick"]))])))),128))])]),(0,l._)("div",O,[(0,l.Wm)(v.Z,{"car-item":e.carItem,"payee-data":_e.value,isReadOnly:e.isReadOnly,onUpdate:qe,onFormDataChange:Ke,onAddPayee:a.handleAddPayee,ref_key:"payeeInfoRef",ref:Te},null,8,["car-item","payee-data","isReadOnly","onAddPayee"])]),(0,l._)("div",x,[(0,l.Wm)(r.Z,{titleName:"费用赔款信息",imgurl:de.value},null,8,["imgurl"]),(0,l.Wm)(y.Z,{ref_key:"reparationsRef",ref:be,isReadOnly:e.isReadOnly,onUpdate:a.handleReparationsUpdate},null,8,["isReadOnly","onUpdate"])]),(0,l.Wm)(f,{show:ue.value,"onUpdate:show":o[15]||(o[15]=e=>ue.value=e),round:"",position:"bottom",style:{height:"75%"},closeable:""},{default:(0,l.w5)((()=>[(0,l._)("div",V,[o[35]||(o[35]=(0,l._)("div",{class:"popup-header"},[(0,l._)("span",{class:"popup-title"},"添加财产损失")],-1)),(0,l._)("div",L,[(0,l._)("div",q,[o[24]||(o[24]=(0,l._)("div",{class:"form-label"},[(0,l.Uk)(" 险别"),(0,l._)("span",{class:"required-star"},"*")],-1)),(0,l._)("div",K,[(0,l.Wm)(u,{readonly:"",clickable:"","model-value":Ae.lossApprovalKindCode?Ae.lossApprovalKindCode.text:"",placeholder:"请选择险别","right-icon":"arrow",onClick:je},null,8,["model-value"])])]),(0,l._)("div",S,[o[25]||(o[25]=(0,l._)("div",{class:"form-label"},[(0,l.Uk)(" 财产种类"),(0,l._)("span",{class:"required-star"},"*")],-1)),(0,l._)("div",U,[(0,l.Wm)(u,{readonly:"",clickable:"","model-value":Ae.propPeciesCode?Ae.propPeciesCode.text:"",placeholder:"请选择财产种类","right-icon":"arrow",onClick:Ee},null,8,["model-value"])])]),(0,l._)("div",W,[o[26]||(o[26]=(0,l._)("div",{class:"form-label"},[(0,l.Uk)(" 回收方式"),(0,l._)("span",{class:"required-star"},"*")],-1)),(0,l._)("div",j,[(0,l.Wm)(u,{readonly:"",clickable:"","model-value":Ae.recycleType?Ae.recycleType.text:"",placeholder:"请选择回收方式","right-icon":"arrow",onClick:He},null,8,["model-value"])])]),(0,l._)("div",E,[o[27]||(o[27]=(0,l._)("div",{class:"form-label"},[(0,l.Uk)(" 财产名称"),(0,l._)("span",{class:"required-star"},"*")],-1)),(0,l._)("div",H,[(0,l.Wm)(u,{clickable:"",modelValue:Ae.lossItemName,"onUpdate:modelValue":o[3]||(o[3]=e=>Ae.lossItemName=e),placeholder:""},null,8,["modelValue"])])]),(0,l._)("div",D,[o[28]||(o[28]=(0,l._)("div",{class:"form-label"},[(0,l.Uk)(" 费用名称"),(0,l._)("span",{class:"required-star"},"*")],-1)),(0,l._)("div",R,[(0,l.Wm)(u,{readonly:"",clickable:"","model-value":Ae.feeType?Ae.feeType.text:"",placeholder:"请选择费用名称","right-icon":"arrow",onClick:Le},null,8,["model-value"])])]),(0,l._)("div",B,[o[29]||(o[29]=(0,l._)("div",{class:"form-label"},[(0,l.Uk)(" 数量"),(0,l._)("span",{class:"required-star"},"*")],-1)),(0,l._)("div",Y,[(0,l.Wm)(u,{modelValue:Ae.lossItemNum,"onUpdate:modelValue":[o[4]||(o[4]=e=>Ae.lossItemNum=e),o[5]||(o[5]=e=>Ze("lossItemNum",e))],placeholder:"请输入数量",rules:[{required:!0,message:"请输入数量"}]},null,8,["modelValue"])])]),(0,l._)("div",z,[o[30]||(o[30]=(0,l._)("div",{class:"form-label"},[(0,l.Uk)(" 单价"),(0,l._)("span",{class:"required-star"},"*")],-1)),(0,l._)("div",M,[(0,l.Wm)(u,{modelValue:Ae.lossItemPrice,"onUpdate:modelValue":[o[6]||(o[6]=e=>Ae.lossItemPrice=e),o[7]||(o[7]=e=>Ze("lossItemPrice",e))],placeholder:"请输入单价",rules:[{required:!0,message:"请输入单价"}]},null,8,["modelValue"])])]),(0,l._)("div",Q,[o[31]||(o[31]=(0,l._)("div",{class:"form-label"},[(0,l.Uk)(" 残值金额"),(0,l._)("span",{class:"required-star"},"*")],-1)),(0,l._)("div",Z,[(0,l.Wm)(u,{modelValue:Ae.residualFee,"onUpdate:modelValue":[o[8]||(o[8]=e=>Ae.residualFee=e),o[9]||(o[9]=e=>Ze("residualFee",e))],placeholder:"请输入残值金额",rules:[{required:!0,message:"请输入残值金额"}]},null,8,["modelValue"])])]),(0,l._)("div",J,[o[32]||(o[32]=(0,l._)("div",{class:"form-label"},[(0,l.Uk)(" 金额"),(0,l._)("span",{class:"required-star"},"*")],-1)),(0,l._)("div",X,[(0,l.Wm)(u,{modelValue:Ae.sumLossFee,"onUpdate:modelValue":o[10]||(o[10]=e=>Ae.sumLossFee=e),placeholder:"自动计算",readonly:"",rules:[{required:!0,message:"金额不能为负数"}]},null,8,["modelValue"])])]),(0,l._)("div",G,[o[33]||(o[33]=(0,l._)("div",{class:"form-label"}," 备注信息 ",-1)),(0,l._)("div",$,[(0,l.Wm)(u,{modelValue:Ae.remark,"onUpdate:modelValue":o[11]||(o[11]=e=>Ae.remark=e),type:"textarea",placeholder:"请输入备注信息",rows:"3",autosize:""},null,8,["modelValue"])])])]),(0,l.Wm)(f,{show:me.value,"onUpdate:show":o[13]||(o[13]=e=>me.value=e),position:"bottom",round:""},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{columns:ye.value,onConfirm:Se,onCancel:o[12]||(o[12]=e=>me.value=!1)},null,8,["columns"])])),_:1},8,["show"]),(0,l._)("div",ee,[(0,l.Wm)(p,{round:"",type:"primary",class:"footer_gray_btn",onClick:ze},{default:(0,l.w5)((()=>[...o[34]||(o[34]=[(0,l.Uk)("取消",-1)])])),_:1}),e.isReadOnly?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(p,{key:0,round:"",type:"primary",class:"footer_red_btn",onClick:o[14]||(o[14]=e=>ce.value?Re():We())},{default:(0,l.w5)((()=>[(0,l.Uk)((0,s.zw)(ce.value?"更新":"确认"),1)])),_:1}))])])])),_:1},8,["show"]),(0,l.Wm)(f,{show:he.value,"onUpdate:show":o[17]||(o[17]=e=>he.value=e),position:"bottom",round:""},{default:(0,l.w5)((()=>[(0,l.Wm)(m,{columns:we.value,onConfirm:sa,onCancel:o[16]||(o[16]=e=>he.value=!1)},null,8,["columns"])])),_:1},8,["show"]),(0,l._)("div",ae,[e.fromLossItemCar?((0,l.wg)(),(0,l.j4)(le,{key:0},{default:(0,l.w5)((()=>[(0,l.Wm)(oe,{span:"24"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{round:"",type:"primary",class:"footer_red_btn",onClick:o[18]||(o[18]=e=>Qe("save"))},{default:(0,l.w5)((()=>[...o[36]||(o[36]=[(0,l.Uk)(" 保存 ",-1)])])),_:1})])),_:1})])),_:1})):["4","2","8"].includes(a.$route.query.taskState)||e.isReadOnly?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(le,{key:1},{default:(0,l.w5)((()=>[(0,l.Wm)(oe,{span:"12"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{round:"",type:"success",class:"footer_gray_btn",onClick:o[19]||(o[19]=e=>Qe("save"))},{default:(0,l.w5)((()=>[...o[37]||(o[37]=[(0,l.Uk)(" 保存 ",-1)])])),_:1})])),_:1}),(0,l.Wm)(oe,{span:"12"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{round:"",type:"success",class:"footer_red_btn",onClick:o[20]||(o[20]=e=>Qe("commit"))},{default:(0,l.w5)((()=>[...o[38]||(o[38]=[(0,l.Uk)(" 提交 ",-1)])])),_:1})])),_:1})])),_:1}))])])}}},le=o(3744);const se=(0,le.Z)(oe,[["__scopeId","data-v-5e70bdce"]]);var te=se},1959:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKgSURBVHgB7ZkxctpAFIbfCpM4DeMWKKIjOAwFXfABkhEnMDlBnBNYKdORE5jcQC5TWekoGIYjqGCgTIrMOAmDlPdnkCMzAiTtW7nRN8NIy66k/5MWaVcQVVRUVDwl6lBlp9MZ8sImGYLZbDYmYfYKILxS6oYEiaLIZYmPJIh1oM4mYfiEuHxirkmQk4ztfD5736ggHNzmxeV2HRIkdSUyCSA8H9AlDbrdbsD7+Xf2JSUsKonpdOpy8IfAUt2pNAFgQqJUASAtYUTg/o0z/PXWGd07jp1WLykhLvDbca6VRTf8hHkfhTTa105KQlTgz2BwGUXkxuWaou+H2ktIiAkgfBhG47jMj/j5M0Ufjm2nKyEi8NNxzpPhmSBUNFCe9yPL9joS2gIIfxLRXeKrIFJ08cLzAspBUQktAdxltuHPtl8VCh9TREJLQEWE0apI+Ji8EnpdSNHtdk0kfEweCS2BU88bIfhzRa+kwsdkldD+EXNwP+vdJi9pEjyq7SfbZBV4SU8EJHjhxeUwDJ1k/SGBIF5h86H0TConX+h/FjtZsVcAE3AT4/ci8ETI3ldXowMsl0u/3W5j4t9HmSX6zWbzbLVafaWSOGfwcoE/pyizzCc+/jyurx3bQYpEr9Vq2byTWzIMwluWdcfHfHjWcM94l2xzVADsSmDfpiXSwtfr9YvFYvHojpdJAJQpsS/8ZDIJdttmFgBlSOQJD3IJAJMSecOD3ALAhESR8KCQAJCUKBoeFBYAEhI64YGWANCR0A0PtAVAEQmJ8EBEAOSRkAoPxARAFgnJ8ECRAXjS4cav0rd4m83mMwd/zetXUuGBEQGQIrGLdngg2oWSpHSnJCLhgbErENPr9ez1en3FVwPjevxLM280GmPf943MoysqcvIX/8mu9EdYQBQAAAAASUVORK5CYII="}}]);