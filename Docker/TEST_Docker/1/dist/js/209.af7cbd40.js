"use strict";(self["webpackChunkclaimApp_web"]=self["webpackChunkclaimApp_web"]||[]).push([[209],{3209:function(e,l,a){a.r(l),a.d(l,{default:function(){return p}});var u=a(6252),t=a(2262),i=a(1831),s=a(7500);const o={class:"video-call-test"},v={class:"test-container"},n={class:"action-buttons"},r={key:0,class:"test-result"};var c={__name:"index",setup(e){const l=(0,t.iH)({}),a=(0,t.iH)({isValid:!1,errors:[]}),c=(0,t.iH)({}),m=(0,t.iH)({}),d=(0,t.iH)(!1),p=(0,t.iH)(null),g=()=>{l.value=(0,s.m7)(),a.value=(0,s.ww)(),c.value=s.pm.videoConfig,m.value=s.pm.audioConfig,console.log("当前TRTC配置:",{config:l.value,validation:a.value,fullConfig:s.pm})},w=async()=>{try{d.value=!0,p.value=null;const e=(0,s.ww)();if(!e.isValid)return void(0,i.CF)("配置验证失败: "+e.errors.join(", "));const a=(0,s.qP)(),u=`${window.location.origin}/video-room/${a}`;console.log("开始视频通话测试:",{roomId:a,roomLink:u,config:l.value}),p.value={roomId:a,roomLink:u,success:!0,message:"测试成功"},(0,i.CF)("视频通话测试成功")}catch(e){console.error("视频通话测试失败:",e),p.value={success:!1,message:e.message},(0,i.CF)("测试失败: "+e.message)}finally{d.value=!1}},f=()=>{const e=(0,s.qP)(),l=`${window.location.origin}/video-room/${e}`;p.value={roomId:e,roomLink:l,success:!0,message:"房间生成成功"},(0,i.CF)(`测试房间已生成: ${e}`),navigator.clipboard&&navigator.clipboard.writeText(l).then((()=>{(0,i.CF)("房间链接已复制到剪贴板")})).catch((()=>{(0,i.CF)("房间链接复制失败")}))};return(0,u.bv)((()=>{g()})),(e,t)=>{const i=(0,u.up)("van-nav-bar"),s=(0,u.up)("van-cell"),k=(0,u.up)("van-cell-group"),W=(0,u.up)("van-button");return(0,u.wg)(),(0,u.iD)("div",o,[(0,u.Wm)(i,{title:"视频通话配置测试","left-arrow":"",onClickLeft:t[0]||(t[0]=l=>e.$router.go(-1))}),(0,u._)("div",v,[(0,u.Wm)(k,{title:"当前配置",inset:""},{default:(0,u.w5)((()=>[(0,u.Wm)(s,{title:"SDKAppID",value:l.value.SDKAppID},null,8,["value"]),(0,u.Wm)(s,{title:"UserID",value:l.value.userID},null,8,["value"]),(0,u.Wm)(s,{title:"UserSig状态",value:l.value.hasUserSig?"已配置":"未配置"},null,8,["value"]),(0,u.Wm)(s,{title:"场景",value:l.value.scene},null,8,["value"])])),_:1}),(0,u.Wm)(k,{title:"配置验证",inset:""},{default:(0,u.w5)((()=>[a.value.isValid?((0,u.wg)(),(0,u.j4)(s,{key:0,title:"验证结果",value:"✅ 配置完整","value-class":"success"})):((0,u.wg)(),(0,u.j4)(s,{key:1,title:"验证结果",value:"❌ 配置不完整","value-class":"error"})),((0,u.wg)(!0),(0,u.iD)(u.HY,null,(0,u.Ko)(a.value.errors,((e,l)=>((0,u.wg)(),(0,u.j4)(s,{key:l,title:`错误${l+1}`,value:e,"value-class":"error"},null,8,["title","value"])))),128))])),_:1}),(0,u.Wm)(k,{title:"视频配置",inset:""},{default:(0,u.w5)((()=>[(0,u.Wm)(s,{title:"分辨率",value:c.value.resolution},null,8,["value"]),(0,u.Wm)(s,{title:"帧率",value:c.value.frameRate+"fps"},null,8,["value"]),(0,u.Wm)(s,{title:"码率",value:c.value.bitrate+"kbps"},null,8,["value"])])),_:1}),(0,u.Wm)(k,{title:"音频配置",inset:""},{default:(0,u.w5)((()=>[(0,u.Wm)(s,{title:"采样率",value:m.value.sampleRate+"Hz"},null,8,["value"]),(0,u.Wm)(s,{title:"声道数",value:m.value.channelCount},null,8,["value"]),(0,u.Wm)(s,{title:"码率",value:m.value.bitrate+"kbps"},null,8,["value"])])),_:1}),(0,u._)("div",n,[(0,u.Wm)(W,{type:"primary",block:"",onClick:w,loading:d.value,disabled:!a.value.isValid},{default:(0,u.w5)((()=>[...t[1]||(t[1]=[(0,u.Uk)(" 测试视频通话 ",-1)])])),_:1},8,["loading","disabled"]),(0,u.Wm)(W,{type:"success",block:"",onClick:f},{default:(0,u.w5)((()=>[...t[2]||(t[2]=[(0,u.Uk)(" 生成测试房间 ",-1)])])),_:1}),(0,u.Wm)(W,{type:"default",block:"",onClick:g},{default:(0,u.w5)((()=>[...t[3]||(t[3]=[(0,u.Uk)(" 刷新配置 ",-1)])])),_:1})]),p.value?((0,u.wg)(),(0,u.iD)("div",r,[(0,u.Wm)(k,{title:"测试结果",inset:""},{default:(0,u.w5)((()=>[(0,u.Wm)(s,{title:"房间ID",value:p.value.roomId},null,8,["value"]),(0,u.Wm)(s,{title:"房间链接",value:p.value.roomLink},null,8,["value"]),(0,u.Wm)(s,{title:"状态",value:p.value.success?"✅ 成功":"❌ 失败","value-class":p.value.success?"success":"error"},null,8,["value","value-class"])])),_:1})])):(0,u.kq)("",!0)])])}}},m=a(3744);const d=(0,m.Z)(c,[["__scopeId","data-v-2ade98b2"]]);var p=d}}]);