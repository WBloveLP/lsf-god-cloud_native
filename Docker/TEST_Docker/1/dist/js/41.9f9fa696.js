"use strict";(self["webpackChunkclaimApp_web"]=self["webpackChunkclaimApp_web"]||[]).push([[41],{5041:function(e,l,a){a.r(l),a.d(l,{default:function(){return F}});var o=a(6252),t=a(3577),u=a(2262),n=a(8339),v=a(1831),i=a(1163),s=a(4810);const r={class:"video-room"},c={class:"room-container"},d={key:0,class:"host-controls"},m={class:"video-area"},p={class:"video-placeholder"},w={key:1,class:"video-content"},g={class:"local-video"},y={key:0,class:"remote-video"},k={key:1,class:"waiting-message"},_={key:0},h={class:"control-buttons"};var f={__name:"index",setup(e){const l=(0,n.yj)(),a=(0,n.tv)(),f=(0,u.iH)(""),C=(0,u.iH)("host"),b=(0,u.iH)(""),F=(0,u.iH)(!1),W=(0,u.iH)(!1),q=(0,u.iH)(!1),H=(0,u.iH)(!1),D=(0,u.iH)(""),I=(0,o.Fl)((()=>F.value?"åˆå§‹åŒ–ä¸­...":q.value?"æ­£åœ¨è¿žæŽ¥...":W.value&&H.value?"é€šè¯ä¸­":W.value?"ç­‰å¾…å¯¹æ–¹æŽ¥å¬...":"å·²å°±ç»ª")),U=(0,o.Fl)((()=>F.value||q.value?"status-waiting":W.value?"status-active":"status-ready")),j=(0,o.Fl)((()=>{const e=window.location.origin;return`${e}/video-room/${f.value}?role=audience&phone=${encodeURIComponent(b.value)}`})),T=()=>{if(f.value=l.params.id||l.query.roomId||"",C.value=l.query.role||"host",b.value=l.query.phone||"",!f.value)return(0,v.CF)("æˆ¿é—´IDä¸èƒ½ä¸ºç©º"),void a.go(-1);console.log("åˆå§‹åŒ–æˆ¿é—´:",{roomId:f.value,role:C.value,phone:b.value}),$()},$=async()=>{try{F.value=!0,await new Promise((e=>setTimeout(e,1e3))),console.log("æˆ¿é—´æ£€æŸ¥å®Œæˆ")}catch(e){console.error("æˆ¿é—´æ£€æŸ¥å¤±è´¥:",e),(0,v.CF)("æˆ¿é—´ä¸å­˜åœ¨æˆ–å·²å¤±æ•ˆ"),a.go(-1)}finally{F.value=!1}},z=async()=>{try{q.value=!0,console.log("å¼€å§‹è§†é¢‘é€šè¯:",{roomId:f.value,role:C.value,phone:b.value}),await new Promise((e=>setTimeout(e,2e3))),W.value=!0,"audience"===C.value&&setTimeout((()=>{H.value=!0,D.value="ä¸»æŒäºº"}),3e3),(0,v.CF)("è§†é¢‘é€šè¯å·²å¼€å§‹"),await P("start")}catch(e){console.error("è§†é¢‘é€šè¯å¯åŠ¨å¤±è´¥:",e),(0,v.CF)("è§†é¢‘é€šè¯å¯åŠ¨å¤±è´¥: "+e.message)}finally{q.value=!1}},x=async()=>{try{console.log("ç»“æŸè§†é¢‘é€šè¯"),W.value=!1,H.value=!1,await P("end"),(0,v.CF)("è§†é¢‘é€šè¯å·²ç»“æŸ")}catch(e){console.error("ç»“æŸè§†é¢‘é€šè¯å¤±è´¥:",e),(0,v.CF)("ç»“æŸé€šè¯å¤±è´¥: "+e.message)}},A=()=>{navigator.clipboard.writeText(j.value).then((()=>{(0,v.CF)("è§‚ä¼—ç«¯é“¾æŽ¥å·²å¤åˆ¶")})).catch((()=>{(0,v.CF)("å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶")}))},P=async e=>{try{const l={roomId:f.value,role:C.value,phone:b.value,action:e,timestamp:(0,s.r2)(),type:"video_room_action"};console.log("æäº¤è§†é¢‘æˆ¿é—´è®°å½•:",l);const a=await(0,i.T)(l);console.log("è§†é¢‘æˆ¿é—´è®°å½•æäº¤å“åº”:",a.data)}catch(l){console.error("æäº¤è§†é¢‘æˆ¿é—´è®°å½•å¤±è´¥:",l)}};return(0,o.bv)((()=>{T()})),(e,l)=>{const a=(0,o.up)("van-nav-bar"),u=(0,o.up)("van-cell"),n=(0,o.up)("van-cell-group"),v=(0,o.up)("van-button"),i=(0,o.up)("van-loading");return(0,o.wg)(),(0,o.iD)("div",r,[(0,o.Wm)(a,{title:"è§†é¢‘æˆ¿é—´","left-arrow":"",onClickLeft:l[0]||(l[0]=l=>e.$router.go(-1))}),(0,o._)("div",c,[(0,o.Wm)(n,{title:"æˆ¿é—´ä¿¡æ¯",inset:""},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{title:"æˆ¿é—´å·",value:f.value},null,8,["value"]),(0,o.Wm)(u,{title:"è§’è‰²",value:"host"===C.value?"ä¸»æŒäºº":"è§‚ä¼—"},null,8,["value"]),b.value?((0,o.wg)(),(0,o.j4)(u,{key:0,title:"æ‰‹æœºå·",value:b.value},null,8,["value"])):(0,o.kq)("",!0),(0,o.Wm)(u,{title:"çŠ¶æ€",value:I.value,"value-class":U.value},null,8,["value","value-class"])])),_:1}),"host"===C.value?((0,o.wg)(),(0,o.iD)("div",d,[(0,o.Wm)(n,{title:"ä¸»æŒäººæŽ§åˆ¶",inset:""},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{title:"è§‚ä¼—ç«¯é“¾æŽ¥",value:j.value},null,8,["value"]),(0,o.Wm)(v,{type:"primary",block:"",onClick:A,style:{margin:"0.5rem"}},{default:(0,o.w5)((()=>[...l[2]||(l[2]=[(0,o.Uk)(" å¤åˆ¶è§‚ä¼—ç«¯é“¾æŽ¥ ",-1)])])),_:1})])),_:1})])):(0,o.kq)("",!0),(0,o._)("div",m,[(0,o._)("div",p,[F.value?((0,o.wg)(),(0,o.j4)(i,{key:0,size:"1.5rem"},{default:(0,o.w5)((()=>[...l[3]||(l[3]=[(0,o.Uk)("æ­£åœ¨åˆå§‹åŒ–è§†é¢‘...",-1)])])),_:1})):((0,o.wg)(),(0,o.iD)("div",w,[(0,o._)("div",g,[l[4]||(l[4]=(0,o._)("span",null,"ðŸ“¹ æœ¬åœ°è§†é¢‘",-1)),(0,o._)("p",null,(0,t.zw)("host"===C.value?"ä¸»æŒäºº":"è§‚ä¼—"),1)]),H.value?((0,o.wg)(),(0,o.iD)("div",y,[l[5]||(l[5]=(0,o._)("span",null,"ðŸ“¹ è¿œç¨‹è§†é¢‘",-1)),(0,o._)("p",null,(0,t.zw)(D.value),1)])):((0,o.wg)(),(0,o.iD)("div",k,[l[6]||(l[6]=(0,o._)("p",null,"ç­‰å¾…å¯¹æ–¹åŠ å…¥æˆ¿é—´...",-1)),"host"===C.value?((0,o.wg)(),(0,o.iD)("p",_,"è¯·å°†è§‚ä¼—ç«¯é“¾æŽ¥å‘é€ç»™å¯¹æ–¹")):(0,o.kq)("",!0)]))]))])]),(0,o._)("div",h,[W.value?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(v,{key:0,type:"primary",block:"",onClick:z,loading:q.value},{default:(0,o.w5)((()=>[...l[7]||(l[7]=[(0,o.Uk)(" å¼€å§‹è§†é¢‘é€šè¯ ",-1)])])),_:1},8,["loading"])),W.value?((0,o.wg)(),(0,o.j4)(v,{key:1,type:"danger",block:"",onClick:x},{default:(0,o.w5)((()=>[...l[8]||(l[8]=[(0,o.Uk)(" ç»“æŸé€šè¯ ",-1)])])),_:1})):(0,o.kq)("",!0),(0,o.Wm)(v,{type:"default",block:"",onClick:l[1]||(l[1]=l=>e.$router.go(-1)),style:{"margin-top":"0.5rem"}},{default:(0,o.w5)((()=>[...l[9]||(l[9]=[(0,o.Uk)(" è¿”å›ž ",-1)])])),_:1})])])])}}},C=a(3744);const b=(0,C.Z)(f,[["__scopeId","data-v-5c00c2cc"]]);var F=b}}]);