"use strict";(self["webpackChunkclaimApp_web"]=self["webpackChunkclaimApp_web"]||[]).push([[962,167],{5674:function(e,a,t){t.r(a),t.d(a,{default:function(){return E}});var n=t(6252),i=t(2262),s=t(8339),c=(t(2490),t(4514),t(3577)),o=t(9201),l="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAFdUlEQVR4AeyZv2/bRhTH3x0lJRUyyHBjW5nipR0jb3WW2sg/YC/taPcviAx3adFC9t4gzl8Qd2wXBXDXwM7SjlLGelECBHCk2LCGQHUtktfvu4iORFE/SIoqJYfgM3W/3r0P7927O1pSRJeqVDJmtbp2eXb20KzVnjar1RLSFTxVu+i8Wu0QeUXITvPduxVuG5FZNFJgNhQGF5oAMNPpc0VUFKa5p5TaBEBOEd0l16XzlFpB9hqkQLZ9yG21jtPTDXVy0tWGQlwjAW6enKxoAwEJg3foA0AIs9AUOpRl7ZtSVlg3XiS/FBSEu0MBO6Ak5SHBwHCm9GnNunnkq9XKv6en7Al9KvcvCgT8D9yM33rkoC7bFaaEtKwix4Sgru4b+LJWe5gwjFKkI+oCdScVYgJcvWRijrvLBqWHBtYBqVZ7LJTaA2xmkOIxlGd4jmNuP/bT11DA7MKInDxP836Uj6WubeexnJWGdfGBwAyb5KBElKP4XjkLNg4D3RfYgVVEI10LKYKLbRwGui9wQsoiK4rAvkhUsq0IZkWON7066AmMZYeDQZzduBdTzrx1q9Cr0BMYS88mInH8AlQvCnc+AtnF27ee9ncB87wVRDy6bjUTlTaEKHgFsS7gpGEUMLoZmvwrYxrGUzdGBzCOamu8i3FXmtg09uDYmHQcOjqAATbxrgyGzlup9gD28TzMJx8O6521pyDlGuWPI8xzNwxfo0Hq+DgSobOzMJYRYlLBUaCBOTIjs8PXnQrDPNXz52Tlt8j+5VEkYv3wI6mDg2FM8a6DUXY2IxrYMIzAsPTmDdm//e7d0Qhz7YM/tPcEVYnDj16XNTDW3Y2gilSpHLSp/3Z/H/tv47QQ4mv+KdX5eSaMO7OSiZCWW0vz4mIS98uB3vFlOr0i8V0q+Pzlbj+fJfHlF2MRQl/cZVARSt2VmL/3girgdmJ5meT29liE++I+g4qU8p5UQoTaN6s//yL7EZajMQj3FRSW22FjlZM8zJwILNgUKETPcUjYDQhYMxLUsf98E3gwXA2ZVa/DrvypTn4CnurhBRwvS6/wvBa3IHolsSzVrwUtIJVSryU+6bzE72tx20R1iYPDGI87/+97lUKUJf5cmzmMc8ORNFKpIwpzpdNhWvtrOzvrr76rduL9+7IUMzN1EiIwtFj+ikRIQ1x2eSa5D5ELcc5R6oVYXMQcZvWW9YIfgQQjLL/fJnH/fnRHxAcPSP78ExH6CmQjGgkp9Ud5vdNK3Ly5h7zgN0ZYbm5Ed0T89ptQsAxmtAZVA4uQbs0KYy3sztmsDs4aWBtrWbv6OY1/DGPHwboCTmazR2GCl6Mwbk+B7WTy9u0jx64rYJ0xnaO8pdlafzqAp22UhRD7ifn5Zy1W/egA5hzTsr6Da9f590SLEHVE5q641AX8GaKZMs2uijRhF+ZuXoDFbXYXMFdI3bmzh0PFE/49kaLUk8Tc3K9etnsCc8XEjRs7cO1JPEmVkwsLeWbwkp7AvBnBfF6Ha+gF26tx3PLY1oRtr/e0CwU9gVFGPJ+btr3KijgdZ2EbDbbVY962290XmCs60DF37/IwsMwzEJgrMXRybm4ploGMA1SjseoVkdl2twwF7DTiYKBsOx7rNNZZfI/bYpv4nOvYOOjpC5iVpbLZfQSzJfzbwjPsc53IBaefhGUtpRYWfB9rfQMzDLt4an5+E4FivFEcoITAhFFdGdaF2d52CQTsKOB9KmSRjcC+9epE4pSP7NkGqvf7IRSHAnb6ZSOws1k1bXuR5/hI4D9A7iYajRkeUe7D6S/McyTAjgHa1THHGZ4N5ZFH2S6+Jz3jl4Ag8xrpjpvzEA9eonxfCZEXROvctgW54ycgdSjukfgPAAD//4uPFG8AAAAGSURBVAMAyBtckPPpYAoAAAAASUVORK5CYII=",r=t(2237);const d={class:"payee-info-container"},u={key:0,class:"list-content"},m={class:"item-title"},v={class:"item-text"},p={class:"item-operate"},A=["onClick"],k={class:"item-card"},f={class:"card-name"},b={class:"card-text"},g={key:1,class:"detail-overlay"};var w={__name:"index",setup(e){(0,n.aZ)({name:"PayeeInfo"});const a=(0,s.yj)(),t=((0,s.tv)(),(0,i.iH)([])),w=(0,i.iH)(!1),y=(0,i.iH)(null),N=(0,i.iH)("add"),I=(0,i.iH)(new Map),S=e=>{if(!e)return"";const a=e.replace(/\s/g,"");return a.replace(/(\d{4})(?=\d)/g,"$1 ")},z=(e,a)=>e||a?a||(e&&I.value.size>0?I.value.get(e)||e:e||""):"",D=e=>{y.value={...e},N.value="edit",w.value=!0},W=()=>{y.value=null,N.value="add",w.value=!0},Y=async e=>{try{const t={id:e.id||e.accounId||"",name:e.name||"",certificateNo:e.certificateNo||"",properties:e.properties||"1",accountNumber:e.accountNumber||e.remitaccount||"",contactNumber:e.contactNumber||"",ifsendsms:e.ifsendsms||"1",bankNo:e.bankNo||"",bankNoName:e.bankNoName||"",subBankNo:e.subBankNo||"",subBankNoName:e.subBankNoName||"",sid:e.sid||"",xid:e.xid||"",nid:e.nid||"",bankAddressS:e.bankAddressS||e.province||"",bankAddressX:e.bankAddressX||e.city||"",bankAddressN:e.bankAddressN||e.county||"",pktype:e.pktype||e.payeeType||"",PKTYPEName:e.PKTYPEName||"",reason:e.reason||e.exceptionReason||"",reasonName:e.reasonName||"",remark:e.remark||e.description||"",career:e.career||e.profession||"",operateflag:"3",operation:e.operation||"system",registNo:a.query.registNo,certificateVaildStartTime:e.certificateVaildStartTime||"",certificateVaildEndTime:e.certificateVaildEndTime||"",certificateVaildFlag:e.certificateVaildFlag||"0",taskId:a.query.taskId||"",payeeType:e.payeeType||"",accounid:e.accounid||e.id||e.accounId||""},{data:n}=await(0,o.Jk)(t);if(200==n.code)return Promise.resolve(n);throw n}catch(t){return console.error("toDeletePayment",t),Promise.reject(t)}},E=async e=>{const a=t.value[e];if(a.id||a.accounId)try{await Y(a),t.value.splice(e,1)}catch(n){console.error("删除失败",n)}else t.value.splice(e,1)},F=async e=>{w.value=!1,y.value=null,await T()},P=()=>{w.value=!1,y.value=null},C=async()=>{try{const{data:e}=await(0,o.cM)();if(200==e.code){const a=new Map;e.data.forEach((e=>{a.set(e.areaCode,e.bankName)})),I.value=a}}catch(e){console.error("加载银行数据失败:",e)}},T=async()=>{try{const{data:e}=await(0,o.JY)({registNo:a.query.registNo});e.data&&(t.value=e.data.accountInfoList)}catch(e){console.error("toGetPayment",e)}};return(0,n.wF)((()=>{T(),C()})),(e,s)=>{const o=(0,n.up)("van-icon"),I=(0,n.up)("van-button");return(0,n.wg)(),(0,n.iD)("div",d,[w.value?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",u,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.value,((e,a)=>((0,n.wg)(),(0,n.iD)("div",{key:e.id||e.paymentId||a,class:"list-item"},[(0,n._)("div",m,[(0,n._)("div",v,[(0,n._)("span",null,(0,c.zw)(e.name),1),(0,n.Wm)(o,{name:"minus",size:"10"}),(0,n._)("span",null,(0,c.zw)(e.accounId),1)]),(0,n._)("div",p,[(0,n.Wm)(I,{round:"",size:"small",onClick:a=>D(e)},{default:(0,n.w5)((()=>[...s[0]||(s[0]=[(0,n.Uk)("编辑",-1)])])),_:1},8,["onClick"])]),(0,n._)("div",{class:"item-delete",onClick:e=>E(a)},[(0,n.Wm)(o,{name:"cross",size:"15"})],8,A)]),(0,n._)("div",k,[(0,n._)("div",f,[(0,n.Wm)(o,{name:(0,i.SU)(l),size:"20"},null,8,["name"]),(0,n._)("div",null,(0,c.zw)(z(e.bankNo)),1)]),(0,n._)("div",b,(0,c.zw)(S(e.accountNumber||e.remitaccount)),1)])])))),128)),(0,n._)("div",{class:"list-add",onClick:W},[(0,n.Wm)(o,{name:"add-o",class:"add-icon",size:"18"}),s[1]||(s[1]=(0,n._)("span",null,"添加接赔人信息",-1))])])),w.value?((0,n.wg)(),(0,n.iD)("div",g,[(0,n.Wm)(r["default"],{"edit-data":y.value,mode:N.value,"regist-no":(0,i.SU)(a).query.registNo,onSaveSuccess:F,onClose:P},null,8,["edit-data","mode","regist-no"])])):(0,n.kq)("",!0)])}}},y=t(3744);const N=(0,y.Z)(w,[["__scopeId","data-v-78aa8e81"]]);var I=N,S=t(4891);const z={class:"view-content"},D={key:0,class:"submit-button"};var W={__name:"index",setup(e){(0,n.aZ)({name:"CollectionVue"});const a=(0,s.tv)(),t=(0,i.iH)("PayeeInfo"),c=()=>{a.back()},o=()=>{console.log("保存")},l=()=>{console.log("提交")};return(e,a)=>{const i=(0,n.up)("van-nav-bar"),s=(0,n.up)("van-tab"),r=(0,n.up)("van-tabs"),d=(0,n.up)("van-button");return(0,n.wg)(),(0,n.iD)("div",z,[(0,n.Wm)(i,{title:"单证收集","left-arrow":"",onClickLeft:c}),(0,n.Wm)(r,{active:t.value,"onUpdate:active":a[0]||(a[0]=e=>t.value=e),class:"flex-auto",color:"#f84f50"},{default:(0,n.w5)((()=>[(0,n.Wm)(s,{title:"接赔人信息",name:"PayeeInfo"},{default:(0,n.w5)((()=>[(0,n.Wm)(I)])),_:1}),(0,n.Wm)(s,{title:"单证影像",name:"images"},{default:(0,n.w5)((()=>[(0,n.Wm)(S.Z,{"task-id":e.taskId,"regist-no":e.registNo,onSave:o,onSubmit:l},null,8,["task-id","regist-no"])])),_:1})])),_:1},8,["active"]),"PayeeInfo"===t.value?((0,n.wg)(),(0,n.iD)("div",D,[(0,n.Wm)(d,{type:"primary",block:"",color:"#f6f6f8",round:"",class:"button-save",onClick:o},{default:(0,n.w5)((()=>[...a[1]||(a[1]=[(0,n.Uk)("保存",-1)])])),_:1}),(0,n.Wm)(d,{type:"primary",block:"",color:"#f84f50",round:"",onClick:l},{default:(0,n.w5)((()=>[...a[2]||(a[2]=[(0,n.Uk)("提交",-1)])])),_:1})])):(0,n.kq)("",!0)])}}};const Y=(0,y.Z)(W,[["__scopeId","data-v-0cfdac1f"]]);var E=Y}}]);