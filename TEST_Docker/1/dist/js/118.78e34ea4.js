"use strict";(self["webpackChunkclaimApp_web"]=self["webpackChunkclaimApp_web"]||[]).push([[118],{8673:function(e,a,t){t.d(a,{WE:function(){return i},Ym:function(){return s},ol:function(){return l}});var o=t(4471);function l(){return(0,o.Z)({url:"http://192.168.137.1:9528/bankarea/getProvince",method:"GET"})}function s(e){return(0,o.Z)({url:"http://192.168.137.1:9528/bankarea/getAreaCity",method:"GET",params:e})}function i(e){return(0,o.Z)({url:"http://192.168.137.1:9528/bankarea/getAreaCountry",method:"GET",params:e})}},9201:function(e,a,t){t.d(a,{JY:function(){return l},Jk:function(){return s},cM:function(){return i},s5:function(){return n}});var o=t(4471);const l=e=>o.Z.post("payment/queryCentiPerson",e),s=e=>o.Z.post("/payment/savePayment",e),i=e=>o.Z.get("http://192.168.137.1:9528/bank/getBank",e),n=e=>o.Z.post("http://192.168.137.1:9528/bank/getSubBank",e)},1056:function(e,a,t){t.d(a,{iG:function(){return i},vx:function(){return s}});var o=t(6154);const l=o.Z.create({baseURL:"https://restapi.amap.com",timeout:3e4});function s(e){return l.request({url:"/v3/config/district?output=JSON&subdistrict=1&key=19eee9d8317f22934109ba047be6b0b1&keywords="+e,method:"get"})}function i(e,a){return l.request({url:`/v3/geocode/regeo?location=${e},${a}&output=JSON&key=19eee9d8317f22934109ba047be6b0b1`,method:"get"})}},6523:function(e,a,t){t.d(a,{Mz:function(){return s},k9:function(){return i},nq:function(){return l}});var o=t(4471);const l=e=>(0,o.Z)({url:"/lossAssessment/submit",method:"post",data:e}),s=e=>(0,o.Z)({url:"/lossAssessment/temporary",method:"post",data:e}),i=e=>(0,o.Z)({url:"/lossAssessment/propLossInfoFromLP",method:"GET",params:e})},7350:function(e,a,t){t.d(a,{Z:function(){return le}});t(2490),t(9461),t(9924);var o=t(6252),l=t(3577),s=t(2262),i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAF/klEQVR4AexbT2xURRj/ptvee9OEm9oDiNpIU2xJNYZQDoC3crPWmGiiEXareNADeNCDYneL0UQTY8EbvQkcCiFGG3alKaYqwqHqjURvvXe34+/3sibd92bezvu33beUzMeb+eb7+3sz82ambZ885P92AXjIB4DsjoBOjoCDFf3IREU/PT6nJ8fL+uWxsn6XxDp57KNMJ2PKdAQwoWaCS0hSF7T809DyqyhZQpKXlMinJNbJYx9lKHuorL+H7uvPlfVe9GdWUgcAwQ+DKqDfmVAzwcmoGWiRE9D9CgHeAxCroDJsDke1004e9tuJuPUfnNdDeGtlSK+AToP2g1IpAOIAqAhjK/RBX6inUhIDMDan92D+flTYkhW8NQY5kEpkZiMD9EFf9EnfZjF3biIADs3pEaXkBubv+3A5COpUGaRP+P5hrKKPJnEaG4Dxin5eK6nBeaaLFOyHlSGl5RpexCthQmF9sQDAYnRMtPwIw/2gnS4FvIgFTAeuO5FjiQzA+Gf6HLxcBXVVwXSoNGOLFFckADyU++RsJA+dFEZs3uiM4NMZAM4zohzB9k6JXuX65OrcCQCutJhn37gadZT7HHKvwu5JPBdB6RUtN/HCRkwG/by2AGDY78FKy2ALfuUE7cVqSZ0CLdSKivWTsiUfJrDnV+0HsJcYu7/D324LAHZgb0JpCJRa0Vq4b2ixVxiQyy2M5I29zdhDLYUC4G05lRCAUCNRO2uz6k+/zvIpdc/PS9xG7F4OIYZCAejf8pIfDNHv9q7BZg7WOK0A4HMyrEXesmrmpIM5MBdbuFYAoMjtZZYHG1tMafOZw4zNqBUAKEyAeqUctiViBIC3MFhBD9iUcsjfz9spU9xGAJB8L719L++6lkmv4vvPCACYx31yuW/ipR4xJYFcg2wsgCeC3Nxz3EbA+Cf68dynaknAlFtwBPRLzwIghtwCAGCuPGYB0MzGIaZQkCdxsFGuZDYk4qpPOZwneD6JdIo05RYAQFSkEbBYfUedy2Qfb0Opyed5AkDwKM2TapPb5mHILQiAdgcAR85Ib6BNeHG7fwlTbOkz5BYEoEWj9xtBAJT85Zo2LkqmXGUzlHvW2bYhtyAA2h0AOJ7iTezEBb0P9Y4W3PY8gVMeL1HednZsyC0AADZBfzsbpGCfnG005A8Eo12JaiZy1accLmjXYSPSCDTlFgBA6pFGAGLIUTHkFgCg+p5yXgNylLoXqim3AACUxIbhCp89RtdN+RgB2BLpuh99mYKPwsP8v2GSNwIA4WWTcJ55/UrcR8DPJXUfINzJc8K+2O8uF9VvPp7XNI4Ar0dkufnshcdNWxJWALAQXoTSJijvhTks2JKwAoCT1hpA+MKmmBc+c2AutnitAFCh3idf4rkBymvZaOZgjT8UgNun1bpoDwSrgTgd3Mf79TI5TyB2Lwe/s23tUAAoh68BRwH33WymQtjHf+w31NgUXm742ZHb2xT4JWPs21jBalsAcPPyABcfPHE1guqxOVM40FwAzYxVNOuXBYeq2NaCinUc1acZe7CrldMWAIrXimoJBl9jPUUiqN/CLo+0kU51bWNQcvjWrFptKwcBJwAgJzB4EReR/E1QNruZjleL6ifXAJ0BoEEMqfmUf5WFZtMj3FBXS+paFIORAKBh3gLj2XU/OuPobMaG8NxLZABo2kNZyQuo10E7XRpYR2a80RkjklgA0A/nGRyPoX4ftFNlHV+oY1yf4gYQGwA6hONVDL0jooXf9U7uGDfoE75f5BeKscSlRADQKYbeg+qs+qDRJ6PYd1fA4+EDj0zKJn3QF33Sd1IviQH4PwBuOW+VVAntUdA86C4olYLd6B0QwR2lD/pKxTCMpAYAbHkFC+QaqAh6qqDkGQR+Bh3G2xjwrQVv+gp038D13L5aSY2ASrC5ZlWI2ZE6ANvjWMYtDAI/j8CPglRDyaMEBfOXf+UxjQTPkKAzTR77KENZvOmXoPs1b6fQn1nJFAB/1LeL6l+Cgvl7HUl+hwTPk1gnj32U8etl2e4oAFkmEtf2LgBxkesWvaRx/AcAAP//2dJyFAAAAAZJREFUAwD/LySfyi4DMQAAAABJRU5ErkJggg==",n=(t(7658),t(8339)),r=t(6001),d=t(6512),u=(t(9849),t(9963));const c={class:"item-title"},m={style:{display:"flex","align-items":"center"}},v={style:{"margin-left":"10px"}},p={class:"item-content"},y={class:"one-line"},f={class:"one-line",style:{"margin-top":"0.875rem"}};var g={__name:"ReassignItem",props:{data:{type:Object,default:()=>({})},dataModifiers:{}},emits:(0,o.Vf)(["checked"],["update:data"]),setup(e,{emit:a}){const t=(0,o.tT)(e,"data");console.log("data-",t);const s=a,i=()=>{t.value.checked=!t.value.checked,s("checked",t.value.checked)};return(e,a)=>{const s=(0,o.up)("van-checkbox");return(0,o.wg)(),(0,o.iD)("div",{class:"item-box",onClick:i},[(0,o._)("div",c,[(0,o._)("div",m,[(0,o.Wm)(s,{modelValue:t.value.checked,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value.checked=e),"icon-size":"1rem","checked-color":"#3A8FFF"},null,8,["modelValue"]),(0,o._)("div",v,[(0,o._)("span",null,"用户名："+(0,l.zw)(t.value.userName),1)])])]),a[1]||(a[1]=(0,o._)("div",{class:"line-dashed"},null,-1)),(0,o._)("div",p,[(0,o._)("div",y,[(0,o._)("div",null,"员工工号："+(0,l.zw)(t.value.empNo),1)]),(0,o._)("div",f,[(0,o._)("div",null,"联系方式："+(0,l.zw)(t.value.mobile),1)])])])}}},C=t(3744);const A=(0,C.Z)(g,[["__scopeId","data-v-73573010"]]);var w=A;const h={class:"container"},k={class:"top-fixed"},b={class:"list-clue"},x={class:"list-container"},N={key:0,class:"loading-tip"},T={key:1,class:"empty-tip"};var _={__name:"ReassignList",setup(e,{expose:a}){const t=(0,s.qj)({userName:""}),l=(0,s.iH)([]),i=(0,s.iH)([]),n=(0,s.iH)(!1),r=(0,s.iH)(!1),c=(0,s.iH)([]),m=(e,a)=>{const t=c.value[0];t&&(t.checked=!1),c.value=e?[a]:[]},v=()=>c.value[0],p=async()=>{try{n.value=!0;const e={userCode:t.userName},a=await(0,d.Pg)(e);console.log("surveyorList res : ",a),200===a.data.code&&a.data.data?(l.value=a.data.data.map((e=>({userName:e.userName,empNo:e.userCode,mobile:e.mobile,companyName:e.companyName||"",companyCode:e.companyCode||"",statu:e.statu||""}))),i.value=l.value):(l.value=[],i.value=[]),r.value=!0}catch(e){console.error("获取调查员列表失败:",e),l.value=[],i.value=[],r.value=!0}finally{n.value=!1}},y=()=>{n.value||r.value||p()},f=()=>{const e=t.userName.trim();i.value=e?l.value.filter((a=>{const t=a.userName&&a.userName.includes(e),o=a.empNo&&a.empNo.includes(e);return t||o})):l.value};return(0,o.bv)((()=>{p()})),a({reload:f,getCheckedItem:v}),(e,a)=>{const l=(0,o.up)("van-field"),s=(0,o.up)("van-cell-group"),d=(0,o.up)("van-icon"),c=(0,o.up)("van-loading"),v=(0,o.up)("van-empty"),p=(0,o.up)("van-list");return(0,o.wg)(),(0,o.iD)("div",h,[(0,o._)("div",k,[(0,o.Wm)(s,{inset:"",class:"search-group"},{default:(0,o.w5)((()=>[(0,o.Wm)(l,{modelValue:t.userName,"onUpdate:modelValue":a[0]||(a[0]=e=>t.userName=e),placeholder:"请输入工号或者姓名",onBlur:f,onKeyup:(0,u.D2)(f,["enter"])},null,8,["modelValue"])])),_:1}),(0,o._)("div",b,[(0,o.Wm)(d,{name:"info",size:"16"}),a[3]||(a[3]=(0,o._)("div",{class:"clue-text"},"请在以下人员中选择一位进行案件移交",-1))])]),(0,o._)("div",x,[(0,o.Wm)(p,{loading:n.value,"onUpdate:loading":a[1]||(a[1]=e=>n.value=e),finished:r.value,"onUpdate:finished":a[2]||(a[2]=e=>r.value=e),"finished-text":"没有更多了","immediate-check":!1,onLoad:y},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.value,(e=>((0,o.wg)(),(0,o.j4)(w,{key:e.empNo,data:e,onChecked:a=>m(a,e)},null,8,["data","onChecked"])))),128)),n.value&&0===i.value.length?((0,o.wg)(),(0,o.iD)("div",N,[(0,o.Wm)(c,{size:"1.5rem"},{default:(0,o.w5)((()=>[...a[4]||(a[4]=[(0,o.Uk)("加载中...",-1)])])),_:1})])):(0,o.kq)("",!0),!n.value&&r.value&&0===i.value.length?((0,o.wg)(),(0,o.iD)("div",T,[(0,o.Wm)(v,{description:"暂无数据"})])):(0,o.kq)("",!0)])),_:1},8,["loading","finished"])])])}}};const D=(0,C.Z)(_,[["__scopeId","data-v-65269d7a"]]);var F=D;const I={class:"submit-button"};var B={__name:"index",setup(e,{expose:a}){(0,o.aZ)({name:"ReassignIndex"});const t=(0,n.tv)(),l=(0,n.yj)();console.info("taskId",l.query.taskId);const i=(0,s.iH)(!1),u=()=>{i.value=!0},c=()=>{C.value={}},m=()=>{i.value=!1},v=(0,s.iH)(null);let p={};const y=()=>{const e=v.value.getCheckedItem();console.log("checkedItem",e),e?(p=e,f.value=!0):(0,r.vC)({title:"提示",message:"请选择移交人员"})},f=(0,s.iH)(!1),g=(0,s.iH)(null),C=(0,s.iH)({}),A=async()=>{try{await g.value.validate(),w()}catch(e){console.error("handleSubmit",e)}},w=async()=>{try{const e={taskId:l.query.taskId,applyUserCode:p.empNo,message:C.value.message},{data:a}=await(0,d.l9)(e);if(console.log("updateSurveyor",a),200!==a.code)throw a;(0,r.vC)({title:"提示",message:a.message||"移交成功"}).then((()=>{i.value=!1,t.push({path:"/task"})}))}catch(e){console.error("updateSurveyor===>",e)}};return a({show:u}),(e,a)=>{const t=(0,o.up)("van-nav-bar"),l=(0,o.up)("van-button"),s=(0,o.up)("van-field"),n=(0,o.up)("van-form"),r=(0,o.up)("BaseDialog"),d=(0,o.up)("van-popup");return(0,o.wg)(),(0,o.j4)(d,{show:i.value,"onUpdate:show":a[2]||(a[2]=e=>i.value=e),position:"right",class:"reassign-popup"},{default:(0,o.w5)((()=>[(0,o.Wm)(t,{title:"案件移交","left-arrow":"",onClickLeft:m}),(0,o.Wm)(F,{ref_key:"refReassignList",ref:v,class:"flex-auto"},null,512),(0,o._)("div",I,[(0,o.Wm)(l,{type:"primary",block:"",color:"#3A8FFF",round:"",onClick:y},{default:(0,o.w5)((()=>[...a[3]||(a[3]=[(0,o.Uk)("确定",-1)])])),_:1})]),(0,o.Wm)(r,{show:f.value,"onUpdate:show":a[1]||(a[1]=e=>f.value=e),title:"案件移交",onConfirm:A,onClose:c},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{ref_key:"refForm",ref:g,required:"auto"},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{modelValue:C.value.message,"onUpdate:modelValue":a[0]||(a[0]=e=>C.value.message=e),class:"return-field",rows:"6",autosize:"",type:"textarea",placeholder:"请输入移交原因",rules:[{required:!0,message:"请输入移交原因"}]},null,8,["modelValue"])])),_:1},512)])),_:1},8,["show"])])),_:1},8,["show"])}}};const P=(0,C.Z)(B,[["__scopeId","data-v-4aed6e0e"]]);var U=P,V={__name:"Return",setup(e,{expose:a}){(0,o.aZ)({name:"ReturnVue"});const t=(0,n.tv)(),i=(0,n.yj)();console.info("taskId",i.query.taskId);const u=(0,s.iH)(!1),c=()=>{m(),u.value=!0},m=async()=>{try{const{data:e}=await(0,d.ME)();if(console.log("getBackMessages",e),200!==e.code)throw e;{const a=e.data.map((e=>({label:e.value,value:e.code})));f.value=a}}catch(e){console.log("toGetBackMessages",e)}},v=()=>{y.value={}},p=(0,s.iH)(null),y=(0,s.iH)({code:"",message:""}),f=(0,s.iH)([]),g=async()=>{try{await p.value.validate(),C()}catch(e){console.log("handleConfirm",e)}},C=async()=>{try{const e={taskId:i.query.taskId,backCode:y.value.code,message:y.value.message,province:i.query.returnInfos.province,city:i.query.returnInfos.city,area:i.query.returnInfos.area,address:i.query.returnInfos.address,smx:i.query.returnInfos.smx,smy:i.query.returnInfos.smy},{data:a}=await(0,d.RD)(e);if(console.log("backDispatch",a),200!==a.code)throw a;(0,r.vC)({title:"提示",message:a.message||"退回成功"}).then((()=>{u.value=!1,t.push({path:"/task"})}))}catch(e){console.error(e)}};return a({open:c}),(e,a)=>{const t=(0,o.up)("van-radio"),s=(0,o.up)("van-radio-group"),i=(0,o.up)("van-field"),n=(0,o.up)("van-form"),r=(0,o.up)("BaseDialog");return(0,o.wg)(),(0,o.j4)(r,{show:u.value,"onUpdate:show":a[2]||(a[2]=e=>u.value=e),title:"退回调度",onConfirm:g,onClose:v},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{ref_key:"refForm",ref:p,required:"auto"},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{rules:[{required:!0,message:"请选择退回调度原因"}]},{input:(0,o.w5)((()=>[(0,o.Wm)(s,{modelValue:y.value.code,"onUpdate:modelValue":a[0]||(a[0]=e=>y.value.code=e),class:"return-raido","checked-color":"#3A8FFF"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(f.value,(e=>((0,o.wg)(),(0,o.j4)(t,{key:e.value,name:e.value},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.label),1)])),_:2},1032,["name"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(i,{modelValue:y.value.message,"onUpdate:modelValue":a[1]||(a[1]=e=>y.value.message=e),class:"textarea-field",rows:"3",autosize:"",type:"textarea",placeholder:"请输入退回调度原因"},null,8,["modelValue"])])),_:1},512)])),_:1},8,["show"])}}};const W=(0,C.Z)(V,[["__scopeId","data-v-3b3672a5"]]);var R=W,H={__name:"Cancellation",setup(e,{expose:a}){(0,o.aZ)({name:"CancellationVue"});const t=(0,n.tv)(),i=(0,n.yj)();console.info("taskId",i.query.taskId);const u=(0,s.iH)(!1),c=()=>{m(),u.value=!0},m=async()=>{try{const{data:e}=await(0,d.ix)();if(console.log("getCancelledMessages",e),200!==e.code)throw e;{const a=e.data.map((e=>({label:e.value,value:e.code})));f.value=a}}catch(e){console.log("toGetCancelledMessages",e)}},v=()=>{y.value={}},p=(0,s.iH)(null),y=(0,s.iH)({code:"",message:""}),f=(0,s.iH)([]),g=async()=>{try{await p.value.validate(),C()}catch(e){console.log("handleConfirm",e)}},C=async()=>{try{const e={taskId:i.query.taskId,cancelledCode:y.value.code,cancelledMessage:y.value.message},{data:a}=await(0,d.Bx)(e);if(200!==a.code)throw a;(0,r.vC)({title:"提示",message:a.message||"注销成功"}).then((()=>{u.value=!1,t.push({path:"/task"})}))}catch(e){console.error(e)}};return a({open:c}),(e,a)=>{const t=(0,o.up)("van-radio"),s=(0,o.up)("van-radio-group"),i=(0,o.up)("van-field"),n=(0,o.up)("van-form"),r=(0,o.up)("BaseDialog");return(0,o.wg)(),(0,o.j4)(r,{show:u.value,"onUpdate:show":a[2]||(a[2]=e=>u.value=e),title:"任务注销",onConfirm:g,onClose:v},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{ref_key:"refForm",ref:p,required:"auto"},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{rules:[{required:!0,message:"请选择注销原因"}]},{input:(0,o.w5)((()=>[(0,o.Wm)(s,{modelValue:y.value.code,"onUpdate:modelValue":a[0]||(a[0]=e=>y.value.code=e),class:"return-raido","checked-color":"#3A8FFF"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(f.value,(e=>((0,o.wg)(),(0,o.j4)(t,{key:e.value,name:e.value},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.label),1)])),_:2},1032,["name"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(i,{modelValue:y.value.message,"onUpdate:modelValue":a[1]||(a[1]=e=>y.value.message=e),class:"textarea-field",rows:"3",autosize:"",type:"textarea",placeholder:"请输入注销原因"},null,8,["modelValue"])])),_:1},512)])),_:1},8,["show"])}}};const E=(0,C.Z)(H,[["__scopeId","data-v-4a80b236"]]);var S=E,j=t(1831),q=t(4052),L=t(1056),O=t(4471);function Y(){return(0,O.Z)({url:"http://192.168.137.1:9528/company/getProvinces",method:"GET"})}function Z(e){return(0,O.Z)({url:"http://192.168.137.1:9528/company/getCities",method:"GET",params:e})}function K(e){return(0,O.Z)({url:"http://192.168.137.1:9528/company/getCountries",method:"GET",params:e})}const z={class:"popup-content"},M={class:"change-buttons"},X=["onClick"],J={class:"change-icon"},Q={class:"popup-header"},G={class:"header-title-container"},$={class:"header-location-status"},ee={class:"popup-content"},ae={class:"popup-actions"};var te={__name:"index",setup(e){const a=(0,n.yj)();(0,o.aZ)({name:"SurveyChange"});const r=(0,s.iH)(!1),d=(0,s.iH)(!1),u=()=>{c.value=!0},c=(0,s.iH)(!1),m=[{icon:"guide-o",text:"申请改派",onClick:()=>{v.value.show()}},{icon:"guide-o",text:"退回调度",onClick:()=>{w.value=!0}},{icon:"guide-o",text:"任务注销",onClick:()=>{"0"!==a.query.taskType?g.value.open():(0,j.CF)("查勘任务不能任务注销")}}],v=(0,s.iH)(null),p=()=>{},y=(0,s.iH)(null),f=()=>{},g=(0,s.iH)(null),C=()=>{};console.log("route.query.taskType",a.query.taskType);const A=(0,s.iH)(""),w=(0,s.iH)(!1);(0,o.YP)(w,(e=>{e&&(h.sid||h.xid||h.nid||h.jid||x())}));const h=(0,s.qj)({sid:"",xid:"",nid:"",jid:"",address:"",bankAddressS:"",bankAddressX:"",bankAddressN:"",bankAddressJ:""}),k=(0,s.qj)({sid:[],xid:[],nid:[],jid:[]}),b=()=>new Promise((e=>{if(!navigator.geolocation)return console.error("浏览器不支持地理定位"),void e({latitude:0,longitude:0});const a=setTimeout((()=>{console.log("获取位置信息超时，使用默认值"),e({latitude:0,longitude:0})}),1e4);navigator.geolocation.getCurrentPosition((t=>{clearTimeout(a);const{latitude:o,longitude:l}=t.coords;console.log("成功获取位置信息:",{latitude:o,longitude:l}),e({latitude:o,longitude:l})}),(t=>{clearTimeout(a),console.error("获取位置信息失败:",t),e({latitude:0,longitude:0})}),{enableHighAccuracy:!0,timeout:3e4,maximumAge:6e5})})),x=async()=>{r.value=!0,d.value=!1;const e=(0,j.di)({message:"正在获取您的位置...",duration:0,forbidClick:!0});try{(0,j.CF)({message:"正在定位中，请稍候...",type:"loading",duration:0});const a=await b();if(0===a.latitude&&0===a.longitude)return(0,j.yg)(),void(0,j.CF)({message:"定位失败，请检查定位权限或手动选择地址",type:"fail",duration:3e3});e.message="正在解析地址信息...";const t=await(0,L.iG)(a.longitude,a.latitude);if("1"===t.data.status&&t.data.regeocode){const a=t.data.regeocode.addressComponent;console.log("定位到的地址信息:",a);const o=a.province,l=a.city,s=a.district,i=a.township;e.message="正在匹配地址数据...";const n=k.sid.find((e=>e.text.includes(o.replace("省",""))||o.includes(e.text)));if(n){h.sid=n.value,h.bankAddressS=n.text,await _(n.value+n.text),await new Promise((e=>setTimeout(e,300)));const e=k.xid.find((e=>e.text.includes(l.replace("市",""))||l.includes(e.text)));if(e){h.xid=e.value,h.bankAddressX=e.text,await D(e.value+e.text),await new Promise((e=>setTimeout(e,300)));const a=k.nid.find((e=>e.text.includes(s.replace("区","").replace("县",""))||s.includes(e.text)));if(a){h.nid=a.value,h.bankAddressN=a.text,await H(a.text),await new Promise((e=>setTimeout(e,300)));const e=k.jid.find((e=>e.text.includes(i.replace("街道","").replace("镇",""))||i.includes(e.text)));e?(h.jid=e.value,h.bankAddressJ=e.text,d.value=!0,(0,j.yg)(),(0,j.CF)({message:"地址已根据定位自动填充",type:"success",duration:2e3})):((0,j.yg)(),(0,j.CF)({message:"已定位到您的位置，但未找到匹配的街道，请手动选择",type:"warning",duration:3e3}))}else(0,j.yg)(),(0,j.CF)({message:"已定位到您的位置，但未找到匹配的区县，请手动选择",type:"warning",duration:3e3})}else(0,j.yg)(),(0,j.CF)({message:"已定位到您的位置，但未找到匹配的城市，请手动选择",type:"warning",duration:3e3})}else(0,j.yg)(),(0,j.CF)({message:"已定位到您的位置，但未找到匹配的省份，请手动选择",type:"warning",duration:3e3})}else(0,j.yg)(),(0,j.CF)({message:"地址解析失败，请手动选择地址",type:"fail",duration:3e3})}catch(a){console.error("自动定位填充地址失败:",a),(0,j.yg)(),(0,j.CF)({message:"自动定位失败，请手动选择地址",type:"fail",duration:3e3})}finally{r.value=!1}},N=()=>{r.value?(0,j.CF)("正在定位中，请稍候..."):x()},T=async()=>{try{const{data:e}=await Y();200===e.code&&(k.sid=e.data.map((e=>({value:e.code,text:e.name}))))}catch(e){console.error("获取省份数据失败:",e)}},_=async e=>{if(e)try{const a={province:e},{data:t}=await Z(a);if(200===t.code){if(k.xid=t.data.map((e=>({value:e.code,text:e.name}))),h.xid&&k.xid.length>0){const e=k.xid.find((e=>e.value===h.xid));e||(h.xid="",h.bankAddressX="")}}else k.xid=[]}catch(a){console.error("获取城市数据失败:",a),k.xid=[]}else k.xid=[]},D=async e=>{if(e&&h.sid)try{const a={province:h.sid+h.bankAddressS,city:e},{data:t}=await K(a);if(200===t.code){if(k.nid=t.data.map((e=>({value:e.code,text:e.name}))),h.nid&&k.nid.length>0){const e=k.nid.find((e=>e.value===h.nid));e||(h.nid="",h.bankAddressN="")}}else k.nid=[]}catch(a){console.error("获取区县数据失败:",a),k.nid=[]}else k.nid=[]},F=e=>{"xid"!==e||h.sid?"nid"!==e||h.sid&&h.xid?"jid"!==e||h.sid&&h.xid&&h.nid?(V.value=!0,A.value=e):(0,j.CF)("请先选择省市区"):(0,j.CF)("请先选择省市"):(0,j.CF)("请先选择省")},I=(0,s.iH)(null),B=async()=>{try{if(h.sid&&h.sid.length>0&&h.xid&&h.xid.length>0&&h.nid&&h.nid.length>0&&h.jid&&h.jid.length>0&&h.address&&h.address.length>0){const e=h.jid.split(",");a.query.returnInfos={province:h.sid,city:h.xid,area:h.nid,address:h.bankAddressJ+" "+h.address,smx:e[0],smy:e[1]},y.value.open(),w.value=!1}else(0,j.CF)("请选择并输入完整的信息！")}catch(e){console.log("表单校验失败:",e)}},P=()=>{w.value=!1},V=(0,s.iH)(!1);(0,o.bv)((()=>{T()}));const W=({selectedOptions:e})=>{if(e?.length>0){const a=e[0],t=A.value;h[t]=a.value;const o={sid:"bankAddressS",xid:"bankAddressX",nid:"bankAddressN",jid:"bankAddressJ"},l=o[t];l?h[l]=a.text:h[`${t}Name`]=a.text,"sid"===t?(h.xid="",h.bankAddressX="",h.nid="",h.bankAddressN="",h.jid="",h.bankAddressJ="",_(a.value+a.text)):"xid"===t?(h.nid="",h.bankAddressN="",h.jid="",h.bankAddressJ="",D(a.value+a.text)):"nid"===t&&(h.jid="",h.bankAddressJ="",H(h.bankAddressN))}V.value=!1},H=async function(e){const a=await(0,L.vx)(e);if(200===a.status&&a.data.districts&&a.data.districts.length>0){const e=a.data.districts[0];if(e.districts&&e.districts.length>0){let a=e.districts;a&&a.length>0&&(k.jid=a.map((e=>({value:e.center,text:e.name}))))}}},E=(0,s.iH)(t(5513));return(e,a)=>{const t=(0,o.up)("van-icon"),n=(0,o.up)("van-button"),b=(0,o.up)("van-popup"),x=(0,o.up)("van-field"),T=(0,o.up)("van-cell-group"),_=(0,o.up)("van-form"),D=(0,o.up)("van-picker");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("div",{onClick:u,class:"surveyChange-bubble"},[...a[16]||(a[16]=[(0,o._)("img",{src:i,alt:"",style:{width:"50%","background-color":"white","border-radius":"50%"}},null,-1)])]),(0,o.Wm)(b,{class:"surveyChange-popup",show:c.value,"onUpdate:show":a[1]||(a[1]=e=>c.value=e),round:"",position:"bottom",style:{height:"30%"}},{default:(0,o.w5)((()=>[(0,o._)("div",z,[(0,o._)("div",M,[((0,o.wg)(),(0,o.iD)(o.HY,null,(0,o.Ko)(m,((e,a)=>(0,o._)("div",{key:a,class:"change-button",onClick:e.onClick},[(0,o._)("div",J,[(0,o.Wm)(t,{name:e.icon,color:"#3A8FFF",size:"30px"},null,8,["name"])]),(0,o._)("div",null,(0,l.zw)(e.text),1)],8,X))),64))]),(0,o.Wm)(n,{round:"",size:"large",color:"#f6f6f8",style:{"margin-top":"52px",background:"#3a8fff"},onClick:a[0]||(a[0]=e=>{c.value=!1})},{default:(0,o.w5)((()=>[...a[17]||(a[17]=[(0,o.Uk)(" 取消 ",-1)])])),_:1})])])),_:1},8,["show"]),(0,o.Wm)(U,{ref_key:"refReassign",ref:v,onSubmit:p},null,512),(0,o.Wm)(R,{ref_key:"refReturn",ref:y,onConfirm:f},null,512),(0,o.Wm)(S,{ref_key:"refCancellation",ref:g,onConfirm:C},null,512),(0,o.Wm)(b,{show:w.value,"onUpdate:show":a[13]||(a[13]=e=>w.value=e),round:"",position:"bottom",style:{height:"60%"},class:"payee-form-popup"},{default:(0,o.w5)((()=>[(0,o._)("div",Q,[(0,o._)("div",G,[(0,o.Wm)(q.Z,{titleName:"填写退回地址",showStar:"",showArrow:"",imgurl:E.value,style:{flex:"1",background:"white"}},null,8,["imgurl"]),(0,o._)("div",$,[r.value?((0,o.wg)(),(0,o.iD)("div",{key:0,class:"locating-indicator",onClick:a[2]||(a[2]=e=>(0,s.SU)(j.CF)("正在定位中，请稍候..."))},[(0,o.Wm)(t,{name:"location-o",color:"#3A8FFF"}),a[18]||(a[18]=(0,o._)("span",{class:"locating-text"},"定位中...",-1))])):d.value?((0,o.wg)(),(0,o.iD)("div",{key:1,class:"location-success",onClick:a[3]||(a[3]=e=>(0,s.SU)(j.CF)("地址已根据定位自动填充"))},[(0,o.Wm)(t,{name:"success",color:"#07c160"}),a[19]||(a[19]=(0,o._)("span",{class:"success-text"},"已定位",-1))])):(0,o.kq)("",!0),(0,o.Wm)(n,{size:"small",class:"manual-location-btn",onClick:N,disabled:r.value,loading:r.value},{icon:(0,o.w5)((()=>[(0,o.Wm)(t,{name:"location",size:"14"})])),default:(0,o.w5)((()=>[(0,o.Uk)(" "+(0,l.zw)(r.value?"定位中":"重新定位"),1)])),_:1},8,["disabled","loading"])])])]),(0,o._)("div",ee,[(0,o.Wm)(_,{ref_key:"payeeForm",ref:I},{default:(0,o.w5)((()=>[(0,o.Wm)(T,null,{default:(0,o.w5)((()=>[(0,o.Wm)(x,{modelValue:h.bankAddressS,"onUpdate:modelValue":a[4]||(a[4]=e=>h.bankAddressS=e),"is-link":"",readonly:"",label:"省",placeholder:"请选择省",rules:[{required:!0,message:"请选择省"}],onClick:a[5]||(a[5]=e=>F("sid"))},null,8,["modelValue"]),(0,o.Wm)(x,{modelValue:h.bankAddressX,"onUpdate:modelValue":a[6]||(a[6]=e=>h.bankAddressX=e),"is-link":"",readonly:"",label:"市",placeholder:"请选择市",rules:[{required:!0,message:"请选择市"}],onClick:a[7]||(a[7]=e=>F("xid"))},null,8,["modelValue"]),(0,o.Wm)(x,{modelValue:h.bankAddressN,"onUpdate:modelValue":a[8]||(a[8]=e=>h.bankAddressN=e),"is-link":"",readonly:"",label:"区",placeholder:"请选择区",rules:[{required:!0,message:"请选择区"}],onClick:a[9]||(a[9]=e=>F("nid"))},null,8,["modelValue"]),(0,o.Wm)(x,{modelValue:h.bankAddressJ,"onUpdate:modelValue":a[10]||(a[10]=e=>h.bankAddressJ=e),"is-link":"",readonly:"",label:"街",placeholder:"请选择街道",rules:[{required:!0,message:"请选择街道"}],onClick:a[11]||(a[11]=e=>F("jid"))},null,8,["modelValue"]),(0,o.Wm)(x,{modelValue:h.address,"onUpdate:modelValue":a[12]||(a[12]=e=>h.address=e),class:"textarea-field",rows:"2",autosize:"",type:"textarea","label-align":"top",label:"详细地址",placeholder:"请输入详细地址"},null,8,["modelValue"])])),_:1})])),_:1},512)]),(0,o._)("div",ae,[(0,o.Wm)(n,{class:"footer_gray_btn",onClick:P},{default:(0,o.w5)((()=>[...a[20]||(a[20]=[(0,o.Uk)("取消",-1)])])),_:1}),(0,o.Wm)(n,{class:"footer_red_btn",onClick:B},{default:(0,o.w5)((()=>[...a[21]||(a[21]=[(0,o.Uk)("确定",-1)])])),_:1})])])),_:1},8,["show"]),(0,o.Wm)(b,{show:V.value,"onUpdate:show":a[15]||(a[15]=e=>V.value=e),"destroy-on-close":"",position:"bottom"},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{columns:k[A.value],onConfirm:W,onCancel:a[14]||(a[14]=e=>V.value=!1)},null,8,["columns"])])),_:1},8,["show"])])}}};const oe=(0,C.Z)(te,[["__scopeId","data-v-70e8897a"]]);var le=oe},714:function(e,a,t){t.d(a,{Z:function(){return L}});t(7658),t(2490),t(9849),t(9461),t(4514),t(9924);var o=t(6252),l=t(3577),s=t(9963),i=t.p+"img/carcar.34a78d09.png",n=t.p+"img/surveyCarunder.cc76ca08.png",r=t(2262),d=t(1831);const u={key:0,class:"vehicle-loss-assessor"},c={class:"header"},m={class:"content"},v={class:"vehicle-view"},p=["viewBox"],y=["d","onClick"],f={class:"float-header"},g={class:"float-title"},C={class:"float-options"},A=["onClick"],w={class:"option-text"},h={class:"vehicle-view"},k=["viewBox"],b=["d","onClick"],x={key:0,class:"adjustment-panel"},N={class:"adjustment-controls"},T={class:"adjustment-group"},_={class:"slider-container"},D={class:"slider-value"},F={class:"adjustment-group"},I={class:"slider-container"},B={class:"slider-value"},P={class:"adjustment-group"},U={class:"slider-container"},V={class:"slider-value"},W={key:1,class:"loss-selection"},R={class:"loss-options"},H=["onClick"],E={class:"footer"};var S={__name:"VehicleLossAssessor",props:{show:{type:Boolean,default:!1},savedParts:{type:Array,default:()=>[]}},emits:["update:show","submit","update:savedParts"],setup(e,{emit:a}){const t=e,S=a,j=(0,o.Fl)((()=>{const e=Z.filter((e=>null!==e.level&&""!==e.level)),a=K.filter((e=>null!==e.level&&""!==e.level));return[...e,...a].map((e=>({lossPart:e.id,lossDegree:e.level})))})),q=(0,o.Fl)({get:()=>t.show,set:e=>S("update:show",e)}),L=(0,r.iH)("0 0 600 800"),O=(0,r.iH)("0 0 300 400"),Y=(0,r.iH)(!1),Z=(0,r.qj)([{id:5,name:"中间右侧",path:"M 517.500 260.500 C 527.976 260.574 538.309 261.741 548.500 264.000 C 549.056 264.383 549.389 264.883 549.500 265.500 C 549.500 298.167 549.500 330.833 549.500 363.500 C 549.500 384.167 549.500 404.833 549.500 425.500 C 527.035 420.796 504.368 419.462 481.500 421.500 C 471.860 422.046 462.527 424.046 453.500 427.500 C 452.893 427.376 452.560 427.043 452.500 426.500 C 453.943 374.167 455.443 321.834 457.000 269.500 C 458.371 267.959 459.871 266.625 461.500 265.500 C 464.644 263.724 467.977 262.224 471.500 261.000 C 486.830 260.500 502.163 260.333 517.500 260.500 Z  M 483.500 422.500 C 505.430 421.312 527.096 422.978 548.500 427.500 C 548.500 448.500 548.500 469.500 548.500 490.500 C 548.666 500.839 548.500 511.172 548.000 521.500 C 520.567 538.804 492.401 554.971 463.500 570.000 C 458.082 572.362 453.082 571.862 448.500 568.500 C 448.500 562.167 448.500 555.833 448.500 549.500 C 449.078 533.173 449.411 516.839 449.500 500.500 C 450.414 486.001 451.080 471.334 451.500 456.500 C 451.173 447.318 451.507 438.318 452.500 429.500 C 462.637 425.805 472.970 423.471 483.500 422.500 Z  M 455.500 258.500 C 459.490 258.999 463.490 259.499 467.500 260.000 C 465.102 261.524 462.769 263.024 460.500 264.500 C 456.102 267.895 452.436 271.895 449.500 276.500 C 447.413 277.585 446.080 279.251 445.500 281.500 C 442.800 283.234 440.800 285.568 439.500 288.500 C 437.242 291.357 435.242 294.357 433.500 297.500 C 409.979 325.558 395.979 357.891 391.500 394.500 C 389.749 403.607 388.749 412.940 388.500 422.500 C 388.500 434.833 388.500 447.167 388.500 459.500 C 388.194 462.385 388.527 465.052 389.500 467.500 C 390.188 484.564 391.688 501.564 394.000 518.500 C 394.587 524.849 396.087 530.849 398.500 536.500 C 398.259 538.898 398.926 540.898 400.500 542.500 C 409.634 572.432 422.800 600.432 440.000 626.500 C 441.011 627.337 442.178 627.670 443.500 627.500 C 441.707 635.800 440.040 644.133 438.500 652.500 C 438.190 653.738 437.690 653.738 437.000 652.500 C 421.443 624.048 408.609 594.381 398.500 563.500 C 394.224 547.057 390.891 530.390 388.500 513.500 C 385.540 483.914 384.374 454.248 385.000 424.500 C 386.327 399.528 390.827 375.195 398.500 351.500 C 400.676 344.147 403.676 337.147 407.500 330.500 C 422.323 305.684 438.323 281.684 455.500 258.500 Z  M 448.500 414.500 C 449.486 418.970 449.819 423.637 449.500 428.500 C 450.791 428.263 451.791 428.596 452.500 429.500 C 451.507 438.318 451.173 447.318 451.500 456.500 C 450.670 448.010 450.170 439.343 450.000 430.500 C 449.218 444.494 448.551 458.494 448.000 472.500 C 447.501 468.179 447.334 463.846 447.500 459.500 C 447.500 451.833 447.500 444.167 447.500 436.500 C 429.079 438.454 410.746 440.787 392.500 443.500 C 391.686 445.631 391.186 447.964 391.000 450.500 C 390.667 447.167 390.333 443.833 390.000 440.500 C 389.828 447.013 389.328 453.347 388.500 459.500 C 388.500 447.167 388.500 434.833 388.500 422.500 C 389.327 427.651 389.827 432.984 390.000 438.500 C 390.002 435.949 390.836 433.949 392.500 432.500 C 396.747 431.150 401.080 430.650 405.500 431.000 C 401.272 432.412 396.939 433.246 392.500 433.500 C 392.500 434.833 392.500 436.167 392.500 437.500 C 411.154 434.702 429.821 432.035 448.500 429.500 C 448.500 427.167 448.500 424.833 448.500 422.500 C 434.513 425.333 420.513 427.833 406.500 430.000 C 420.360 426.202 434.360 423.035 448.500 420.500 C 448.500 418.500 448.500 416.500 448.500 414.500 Z",offsetX:0,offsetY:0,level:null},{id:4,name:"顶部",path:"M 286.5,352.5 C 308.208,352.276 329.874,353.109 351.5,355C 362.728,356.093 373.728,358.26 384.5,361.5C 381.228,376.98 379.061,392.647 378,408.5C 377.5,440.832 377.333,473.165 377.5,505.5C 377.971,532.214 379.304,558.88 381.5,585.5C 327.151,593.445 272.818,593.445 218.5,585.5C 220.832,555.218 222.165,524.885 222.5,494.5C 222.667,468.498 222.5,442.498 222,416.5C 221.55,397.945 219.383,379.612 215.5,361.5C 238.763,355.655 262.43,352.655 286.5,352.5 Z",offsetX:0,offsetY:-20,level:null},{id:3,name:"中间左侧",path:"M 80.500 259.500 C 70.024 259.574 59.691 260.741 49.500 263.000 C 48.944 263.383 48.611 263.883 48.500 264.500 C 48.500 297.167 48.500 329.833 48.500 362.500 C 48.500 383.167 48.500 403.833 48.500 424.500 C 70.965 419.796 93.632 418.462 116.500 420.500 C 126.140 421.046 135.473 423.046 144.500 426.500 C 145.107 426.376 145.440 426.043 145.500 425.500 C 144.057 373.167 142.557 320.834 141.000 268.500 C 139.629 266.959 138.129 265.625 136.500 264.500 C 133.356 262.724 130.023 261.224 126.500 260.000 C 111.170 259.500 95.837 259.333 80.500 259.500 Z M 114.500 421.500 C 92.570 420.312 70.904 421.978 49.500 426.500 C 49.500 447.500 49.500 468.500 49.500 489.500 C 49.334 499.839 49.500 510.172 50.000 520.500 C 77.433 537.804 105.599 553.971 134.500 569.000 C 139.918 571.362 144.918 570.862 149.500 567.500 C 149.500 561.167 149.500 554.833 149.500 548.500 C 148.922 532.173 148.589 515.839 148.500 499.500 C 147.586 485.001 146.920 470.334 146.500 455.500 C 146.827 446.318 146.493 437.318 145.500 428.500 C 135.363 424.805 125.030 422.471 114.500 421.500 Z M 142.500 257.500 C 138.510 257.999 134.510 258.499 130.500 259.000 C 132.898 260.524 135.231 262.024 137.500 263.500 C 141.898 266.895 145.564 270.895 148.500 275.500 C 150.587 276.585 151.920 278.251 152.500 280.500 C 155.200 282.234 157.200 284.568 158.500 287.500 C 160.758 290.357 162.758 293.357 164.500 296.500 C 188.021 324.558 202.021 356.891 206.500 393.500 C 208.251 402.607 209.251 411.940 209.500 421.500 C 209.500 433.833 209.500 446.167 209.500 458.500 C 209.806 461.385 209.473 464.052 208.500 466.500 C 207.812 483.564 206.312 500.564 204.000 517.500 C 203.413 523.849 201.913 529.849 199.500 535.500 C 199.741 537.898 199.074 539.898 197.500 541.500 C 188.366 571.432 175.200 599.432 158.000 625.500 C 156.989 626.337 155.822 626.670 154.500 626.500 C 156.293 634.800 157.960 643.133 159.500 651.500 C 159.810 652.738 160.310 652.738 161.000 651.500 C 176.557 623.048 189.391 593.381 199.500 562.500 C 203.776 546.057 207.109 529.390 209.500 512.500 C 212.460 482.914 213.626 453.248 213.000 423.500 C 211.673 398.528 207.173 374.195 199.500 350.500 C 197.324 343.147 194.324 336.147 190.500 329.500 C 175.677 304.684 159.677 280.684 142.500 257.500 Z M 149.500 413.500 C 148.514 417.970 148.181 422.637 148.500 427.500 C 147.209 427.263 146.209 427.596 145.500 428.500 C 146.493 437.318 146.827 446.318 146.500 455.500 C 147.330 447.010 147.830 438.343 148.000 429.500 C 148.782 443.494 149.449 457.494 150.000 471.500 C 150.499 467.179 150.666 462.846 150.500 458.500 C 150.500 450.833 150.500 443.167 150.500 435.500 C 168.921 437.454 187.254 439.787 205.500 442.500 C 206.314 444.631 206.814 446.964 207.000 449.500 C 207.333 446.167 207.667 442.833 208.000 439.500 C 208.172 446.013 208.672 452.347 209.500 458.500 C 209.500 446.167 209.500 433.833 209.500 421.500 C 208.673 426.651 208.173 431.984 208.000 437.500 C 207.998 434.949 207.164 432.949 205.500 431.500 C 201.253 430.150 196.920 429.650 192.500 430.000 C 196.728 431.412 201.061 432.246 205.500 432.500 C 205.500 433.833 205.500 435.167 205.500 436.500 C 186.846 433.702 168.179 431.035 149.500 428.500 C 149.500 426.167 149.500 423.833 149.500 421.500 C 163.487 424.333 177.487 426.833 191.500 429.000 C 177.640 425.202 163.640 422.035 149.500 419.500 C 149.500 417.500 149.500 415.500 149.500 413.500 Z",offsetX:0,offsetY:0,level:null},{id:2,name:"前方右侧",path:"M 504.500 144.500 C 504.779 149.595 504.445 154.595 503.500 159.500 C 500.539 161.412 498.539 164.079 497.500 167.500 C 493.453 171.615 491.119 176.615 490.500 182.500 C 484.134 214.274 495.800 236.441 525.500 249.000 C 530.063 250.475 534.730 251.308 539.500 251.500 C 539.500 255.833 539.500 260.167 539.500 264.500 C 520.554 262.761 501.554 262.095 482.500 262.500 C 478.132 262.370 473.798 262.703 469.500 263.500 C 464.194 262.551 458.861 261.885 453.500 261.500 C 453.818 256.968 453.485 252.634 452.500 248.500 C 452.415 238.740 451.415 229.074 449.500 219.500 C 450.900 205.833 452.233 192.166 453.500 178.500 C 456.714 154.543 460.380 130.543 464.500 106.500 C 466.115 95.374 469.282 84.707 474.000 74.500 C 482.769 65.893 492.935 59.560 504.500 55.500 C 504.500 85.167 504.500 114.833 504.500 144.500 Z  M 560.500 154.500 C 560.833 154.500 561.167 154.500 561.500 154.500 C 561.500 155.167 561.833 155.500 562.500 155.500 C 577.330 162.654 585.997 174.320 588.500 190.500 C 588.653 196.869 588.320 203.203 587.500 209.500 C 583.497 222.176 575.497 231.509 563.500 237.500 C 561.973 237.427 560.973 238.094 560.500 239.500 C 560.167 239.500 559.833 239.500 559.500 239.500 C 558.209 239.263 557.209 239.596 556.500 240.500 C 531.268 245.492 513.102 236.492 502.000 213.500 C 494.169 187.654 502.002 168.154 525.500 155.000 C 537.103 150.543 548.769 150.376 560.500 154.500 Z",offsetX:0,offsetY:0,level:null},{id:9,name:"后方右侧",path:"M 538.500 540.500 C 507.695 544.305 490.695 561.639 487.500 592.500 C 488.150 601.728 489.817 610.728 492.500 619.500 C 492.500 659.167 492.500 698.833 492.500 738.500 C 483.983 738.174 475.650 738.507 467.500 739.500 C 467.038 740.880 466.038 741.547 464.500 741.500 C 453.981 740.836 446.481 735.836 442.000 726.500 C 440.054 717.503 438.221 708.503 436.500 699.500 C 436.666 695.154 436.499 690.821 436.000 686.500 C 435.768 685.263 435.268 684.263 434.500 683.500 C 433.709 677.794 433.709 672.127 434.500 666.500 C 436.078 661.417 436.745 656.084 436.500 650.500 C 436.500 649.167 436.500 647.833 436.500 646.500 C 438.991 637.721 440.991 628.721 442.500 619.500 C 443.486 615.030 443.819 610.363 443.500 605.500 C 443.357 591.793 444.024 578.126 445.500 564.500 C 449.813 567.853 454.480 568.353 459.500 566.000 C 483.822 553.174 507.822 539.841 531.500 526.000 C 533.650 524.589 535.984 523.755 538.500 523.500 C 538.500 529.167 538.500 534.833 538.500 540.500 Z  M 555.500 549.500 C 556.568 550.434 557.901 550.768 559.500 550.500 C 575.285 557.280 585.285 568.947 589.500 585.500 C 589.500 589.833 589.500 594.167 589.500 598.500 C 584.545 619.788 571.545 633.121 550.500 638.500 C 545.595 637.555 540.595 637.221 535.500 637.500 C 515.083 632.914 502.916 620.247 499.000 599.500 C 497.430 573.823 508.930 556.990 533.500 549.000 C 540.856 548.364 548.189 548.531 555.500 549.500 Z",offsetX:0,offsetY:0,level:null},{id:1,name:"正前方",path:"M 287.5,60.5 C 288.833,60.5 290.167,60.5 291.5,60.5C 298.167,60.5 304.833,60.5 311.5,60.5C 325.894,61.3771 340.227,62.8771 354.5,65C 357.139,67.4827 360.139,69.316 363.5,70.5C 364.574,71.8846 365.907,73.0513 367.5,74C 379.534,79.4335 391.367,85.2668 403,91.5C 404.332,107.472 405.166,123.472 405.5,139.5C 407.71,177.473 408.877,215.473 409,253.5C 406.721,250.619 403.888,248.619 400.5,247.5C 395.726,243.604 390.392,240.437 384.5,238C 356.441,227.824 327.441,222.99 297.5,223.5C 275.133,223.548 253.133,226.382 231.5,232C 216.176,235.91 202.676,243.077 191,253.5C 190.5,241.505 190.333,229.505 190.5,217.5C 192.998,175.674 194.998,133.674 196.5,91.5C 199.54,90.3197 202.206,88.653 204.5,86.5C 214.776,82.3612 224.776,77.6946 234.5,72.5C 238.64,70.2612 242.64,67.7612 246.5,65C 247.793,64.51 249.127,64.3433 250.5,64.5C 251.492,64.6716 252.158,64.3382 252.5,63.5C 264.124,62.0376 275.791,61.0376 287.5,60.5 Z M 348.5,6.5 C 361.42,8.58477 374.086,11.7514 386.5,16C 396.217,19.2701 404.717,24.4368 412,31.5C 412.832,40.8511 412.665,50.1845 411.5,59.5C 401.926,51.1299 390.926,45.2966 378.5,42C 366.261,38.9745 353.928,36.4745 341.5,34.5C 319.358,32.5634 297.025,32.0634 274.5,33C 266.981,33.5135 259.648,34.3468 252.5,35.5C 232.598,37.4121 213.931,43.2454 196.5,53C 193.688,54.9773 191.022,57.144 188.5,59.5C 187.335,50.1845 187.168,40.8511 188,31.5C 195.676,24.2457 204.509,18.9123 214.5,15.5C 226.653,11.7675 238.986,8.60087 251.5,6C 283.876,2.51295 316.209,2.67962 348.5,6.5 Z",offsetX:0,offsetY:0,level:null},{id:8,name:"正后方",path:"M 390.500 731.500 C 390.919 734.325 389.919 736.491 387.500 738.000 C 381.784 741.183 375.784 743.683 369.500 745.500 C 369.303 741.144 367.137 738.477 363.000 737.500 C 350.381 740.850 337.547 742.850 324.500 743.500 C 309.167 743.500 293.833 743.500 278.500 743.500 C 264.369 743.504 250.536 741.504 237.000 737.500 C 232.637 738.371 230.803 741.038 231.500 745.500 C 223.477 743.904 216.310 740.570 210.000 735.500 C 209.474 728.829 208.974 722.163 208.500 715.500 C 207.333 697.168 207.333 678.834 208.500 660.500 C 236.760 674.730 266.760 681.397 298.500 680.500 C 331.257 681.655 362.257 674.988 391.500 660.500 C 392.757 684.188 392.424 707.855 390.500 731.500 Z  M 228.500 759.500 C 239.741 763.209 251.408 765.543 263.500 766.500 C 275.300 767.955 287.300 768.622 299.500 768.500 C 307.008 768.500 314.341 768.166 321.500 767.500 C 347.940 766.721 373.273 761.221 397.500 751.000 C 402.893 748.274 407.726 744.774 412.000 740.500 C 412.667 750.167 412.667 759.833 412.000 769.500 C 404.170 776.334 395.336 781.500 385.500 785.000 C 372.851 789.630 359.851 792.796 346.500 794.500 C 317.873 797.944 289.206 798.277 260.500 795.500 C 238.714 793.377 218.047 787.543 198.500 778.000 C 194.908 775.287 191.408 772.453 188.000 769.500 C 187.333 759.833 187.333 750.167 188.000 740.500 C 199.523 750.957 213.023 757.290 228.500 759.500 Z",offsetX:0,offsetY:0,level:null},{id:7,name:"后方左侧",path:"M 63.500 523.500 C 89.485 538.495 115.818 552.995 142.500 567.000 C 146.950 568.114 150.950 567.280 154.500 564.500 C 155.480 567.086 155.813 569.753 155.500 572.500 C 156.158 588.490 156.658 604.490 157.000 620.500 C 160.390 634.412 162.890 648.412 164.500 662.500 C 165.058 666.011 165.724 669.511 166.500 673.000 C 164.425 690.971 161.592 708.805 158.000 726.500 C 155.002 733.933 149.502 738.433 141.500 740.000 C 129.853 739.732 118.187 739.565 106.500 739.500 C 106.500 699.500 106.500 659.500 106.500 619.500 C 110.288 613.502 111.955 606.835 111.500 599.500 C 113.043 578.685 105.376 561.851 88.500 549.000 C 82.282 545.879 75.949 543.379 69.500 541.500 C 67.393 540.532 65.059 540.198 62.500 540.500 C 62.178 534.642 62.511 528.975 63.500 523.500 Z  M 61.500 637.500 C 57.400 637.237 53.400 637.570 49.500 638.500 C 22.586 631.419 9.753 613.753 11.000 585.500 C 14.498 569.166 23.998 557.833 39.500 551.500 C 41.626 550.952 43.626 550.285 45.500 549.500 C 74.266 545.794 92.766 557.794 101.000 585.500 C 102.602 606.128 94.769 621.962 77.500 633.000 C 72.406 635.421 67.072 636.921 61.500 637.500 Z",offsetX:0,offsetY:0,level:null},{id:0,name:"前方左侧",path:"M 95.500 148.500 C 95.221 153.595 95.555 158.595 96.500 163.500 C 99.461 165.412 101.461 168.079 102.500 171.500 C 106.547 175.615 108.881 180.615 109.500 186.500 C 115.866 218.274 104.200 240.441 74.500 253.000 C 69.937 254.475 65.270 255.308 60.500 255.500 C 60.500 259.833 60.500 264.167 60.500 268.500 C 79.446 266.761 98.446 266.095 117.500 266.500 C 121.868 266.370 126.202 266.703 130.500 267.500 C 135.806 266.551 141.139 265.885 146.500 265.500 C 146.182 260.968 146.515 256.634 147.500 252.500 C 147.585 242.740 148.585 233.074 150.500 223.500 C 149.100 209.833 147.767 196.166 146.500 182.500 C 143.286 158.543 139.620 134.543 135.500 110.500 C 133.885 99.374 130.718 88.707 126.000 78.500 C 117.231 69.893 107.065 63.560 95.500 59.500 C 95.500 89.167 95.500 118.833 95.500 148.500 Z  M 39.500 158.500 C 39.167 158.500 38.833 158.500 38.500 158.500 C 38.500 159.167 38.167 159.500 37.500 159.500 C 22.670 166.654 14.003 178.320 11.500 194.500 C 11.347 200.869 11.680 207.203 12.500 213.500 C 16.503 226.176 24.503 235.509 36.500 241.500 C 38.027 241.427 39.027 242.094 39.500 243.500 C 39.833 243.500 40.167 243.500 40.500 243.500 C 41.791 243.263 42.791 243.596 43.500 244.500 C 68.732 249.492 86.898 240.492 98.000 217.500 C 105.831 191.654 97.998 172.154 74.500 159.000 C 62.897 154.543 51.231 154.376 39.500 158.500 Z",offsetX:0,offsetY:0,level:null}]),K=(0,r.qj)([{id:6,name:"底部",path:"M 140.000 13.000 C 141.181 12.995 141.181 12.995 142.387 12.990 C 144.062 12.985 145.737 12.983 147.413 12.983 C 149.932 12.981 152.451 12.962 154.971 12.943 C 164.223 12.911 173.057 13.356 182.168 15.168 C 183.109 15.355 184.050 15.541 185.019 15.734 C 186.083 15.949 186.083 15.949 187.168 16.168 C 187.655 18.437 188.133 20.708 188.605 22.980 C 188.872 24.245 189.139 25.510 189.414 26.813 C 191.247 36.610 191.413 46.607 191.730 56.543 C 191.774 57.768 191.817 58.992 191.861 60.254 C 192.918 91.912 192.918 91.912 188.793 97.230 C 185.503 99.659 183.142 100.296 179.156 100.266 C 178.020 100.261 178.020 100.261 176.861 100.256 C 175.683 100.243 175.683 100.243 174.480 100.230 C 173.683 100.226 172.886 100.221 172.064 100.217 C 170.099 100.205 168.133 100.187 166.168 100.168 C 166.173 100.738 166.178 101.309 166.184 101.896 C 166.205 104.466 166.218 107.036 166.230 109.605 C 166.239 110.503 166.247 111.401 166.256 112.326 C 166.259 113.180 166.262 114.034 166.266 114.914 C 166.271 115.705 166.276 116.496 166.281 117.310 C 166.168 119.168 166.168 119.168 165.168 120.168 C 165.068 122.363 165.037 124.561 165.035 126.758 C 165.034 127.418 165.033 128.077 165.032 128.757 C 165.032 130.155 165.033 131.553 165.038 132.951 C 165.043 135.093 165.038 137.235 165.031 139.377 C 165.032 140.733 165.033 142.089 165.035 143.445 C 165.037 145.305 165.037 145.305 165.039 147.203 C 164.963 150.098 164.963 150.098 166.168 152.168 C 166.168 154.148 166.168 156.128 166.168 158.168 C 155.608 158.168 145.048 158.168 134.168 158.168 C 134.168 152.718 134.168 152.718 136.152 149.172 C 138.939 143.246 138.611 137.539 138.418 131.105 C 138.400 129.954 138.382 128.802 138.363 127.615 C 138.317 124.799 138.251 121.984 138.168 119.168 C 137.508 119.168 136.848 119.168 136.168 119.168 C 135.838 113.228 135.508 107.288 135.168 101.168 C 133.167 101.230 131.167 101.292 129.105 101.355 C 121.889 101.340 118.226 100.295 112.293 96.168 C 106.509 88.002 109.165 73.615 109.410 63.955 C 109.480 61.136 109.534 58.317 109.588 55.498 C 109.780 46.668 110.149 37.895 111.086 29.109 C 111.162 28.377 111.238 27.645 111.316 26.891 C 111.769 23.043 112.395 19.633 114.168 16.168 C 118.017 14.244 122.737 14.693 126.980 14.449 C 131.446 14.055 135.363 13.007 140.000 13.000 Z",offsetX:0,offsetY:0,level:null}]),z=(0,r.iH)(!1),M=(0,r.qj)({x:0,y:0}),X=(0,r.iH)(null),J=[{id:"",name:"无"},{id:"3",name:"轻微碰撞"},{id:"2",name:"中等碰撞"},{id:"1",name:"严重碰撞"}],Q=(0,r.iH)(null),G=e=>e.offsetX||e.offsetY||1!==e.scale?$(e.originalPath,e.offsetX,e.offsetY,e.scale):e.path,$=(e,a,t)=>{if(0===a&&0===t)return e;let o=e;return 0===a&&0===t||(o=ee(o,a,t)),o},ee=(e,a,t)=>{const o=e?.split(/(?=[A-Z])/);let l="";return o&&o.forEach((e=>{if(e.trim()){const o=e[0],s=e.slice(1).trim().split(/[\s,]+/).map(parseFloat);let i=[];for(let e=0;e<s.length;e+=2)e+1<s.length&&(i.push((s[e]+a).toFixed(3)),i.push((s[e+1]+t).toFixed(3)));l+=o+" "+i.join(" ")+" "}})),l.trim()},ae=()=>{Q.value&&(Q.value.path=G(Q.value))},te=()=>{Q.value&&(Q.value.offsetX=0,Q.value.offsetY=0,Q.value.scale=1,Q.value.path=Q.value.originalPath)},oe=async()=>{if(Q.value)try{await navigator.clipboard.writeText(Q.value.path),(0,d.CF)(`已复制 ${Q.value.name} 的调整后路径`)}catch(e){const a=document.createElement("textarea");a.value=Q.value.path,document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a),(0,d.CF)(`已复制 ${Q.value.name} 的调整后路径`)}},le=()=>{Q.value&&(Y.value=!1)},se=e=>{Q.value=e;const a=window.event;if(a){const e=a.clientX,t=a.clientY,o=window.innerWidth,l=window.innerHeight,s=160,i=200;let n=e+10,r=t+10;n+s>o-20&&(n=e-s-10),r+i>l-20&&(r=t-i-10),n=Math.max(10,Math.min(n,o-s-15)),r=Math.max(10,Math.min(r,l-i-15)),M.x=n,M.y=r,z.value=!0}},ie=e=>{Q.value&&(Q.value.level=""===e?null:e,z.value=!1,Q.value=null)},ne=()=>{Z.forEach((e=>{e.level=null})),K.forEach((e=>{e.level=null}))};(0,r.iH)([...t.savedParts]);(0,o.YP)((()=>t.savedParts),(e=>{e&&e.length>0?re(e):ne()}),{deep:!0,immediate:!0});const re=e=>{ne(),console.log("savedPartsData=",e),e.forEach((e=>{if(e.lossDegree&&""!==e.lossDegree){let a=Z.find((a=>a.id===Number(e.lossPart))),t=K.find((a=>a.id===Number(e.lossPart)));!a&&e.lossPartName&&(a=Z.find((a=>a.name===e.lossPartName))),!t&&e.lossPartName&&(t=K.find((a=>a.name===e.lossPartName))),a&&(a.level=e.lossDegree),t&&(t.level=e.lossDegree)}}))},de=e=>{if(z.value&&X.value&&!X.value.contains(e.target)){const a=e.target.classList.contains("part-path");a||ue()}},ue=()=>{z.value=!1,Q.value=null},ce=e=>({selected:Q.value&&Q.value.id===e.id,mild:"3"===e.level,moderate:"2"===e.level,severe:"1"===e.level,adjusting:Y.value&&Q.value&&Q.value.id===e.id}),me=()=>{const e=j.value.filter((e=>""!==e.lossDegree)),a=e.map((e=>{const a=Z.find((a=>a.id===e.lossPart))||K.find((a=>a.id===e.lossPart));return{lossPart:e.lossPart,lossPartName:a?a.name:"",lossDegree:e.lossDegree}}));S("submit",a),S("update:savedParts",a),ve()},ve=()=>{q.value=!1},pe=()=>{ne(),t.savedParts&&t.savedParts.length>0&&re(t.savedParts)};return(0,o.YP)((()=>t.show),(e=>{e&&(0,o.Y3)((()=>{pe()}))})),(0,o.bv)((()=>{Z.forEach((e=>{e.originalPath||(e.originalPath=e.path),void 0===e.offsetX&&(e.offsetX=0),void 0===e.offsetY&&(e.offsetY=0),void 0===e.scale&&(e.scale=1)})),K.forEach((e=>{e.originalPath||(e.originalPath=e.path),void 0===e.offsetX&&(e.offsetX=0),void 0===e.offsetY&&(e.offsetY=0),void 0===e.scale&&(e.scale=1)})),document.addEventListener("click",de),document.removeEventListener("click",de),pe()})),(e,a)=>{const t=(0,o.up)("van-icon"),r=(0,o.up)("van-button");return q.value?((0,o.wg)(),(0,o.iD)("div",u,[(0,o._)("div",c,[(0,o.Wm)(t,{name:"cross",class:"close-btn",onClick:ve}),a[4]||(a[4]=(0,o._)("div",{class:"title"},"损失部位",-1))]),a[11]||(a[11]=(0,o.uE)('<div class="status-indicator" data-v-abb1d75e><div class="status-item" data-v-abb1d75e><span class="status-dot severe" data-v-abb1d75e></span><span class="status-text" data-v-abb1d75e>严重碰撞</span></div><div class="status-item" data-v-abb1d75e><span class="status-dot moderate" data-v-abb1d75e></span><span class="status-text" data-v-abb1d75e>中等碰撞</span></div><div class="status-item" data-v-abb1d75e><span class="status-dot mild" data-v-abb1d75e></span><span class="status-text" data-v-abb1d75e>轻微碰撞</span></div><div class="status-item" data-v-abb1d75e><span class="status-dot none" data-v-abb1d75e></span><span class="status-text" data-v-abb1d75e>无</span></div></div>',1)),(0,o._)("div",m,[(0,o._)("div",v,[a[5]||(a[5]=(0,o._)("img",{src:i,alt:"",class:"vehicle-image",style:{"pointer-events":"none"}},null,-1)),((0,o.wg)(),(0,o.iD)("svg",{class:"vehicle-svg",viewBox:L.value,preserveAspectRatio:"xMidYMid meet"},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(Z,(e=>((0,o.wg)(),(0,o.iD)("path",{key:e.id,d:G(e),class:(0,l.C_)(["part-path",ce(e)]),onClick:a=>se(e),style:{"pointer-events":"all"}},null,10,y)))),128))],8,p)),Q.value&&z.value?((0,o.wg)(),(0,o.iD)("div",{key:0,ref_key:"floatPanelRef",ref:X,class:"float-panel",style:(0,l.j5)({left:M.x+"px",top:M.y+"px"}),onClick:a[0]||(a[0]=(0,s.iM)((()=>{}),["stop"]))},[(0,o._)("div",f,[(0,o._)("span",g,(0,l.zw)(Q.value.name),1),(0,o.Wm)(t,{name:"cross",class:"float-close",onClick:ue})]),(0,o._)("div",C,[((0,o.wg)(),(0,o.iD)(o.HY,null,(0,o.Ko)(J,(e=>(0,o._)("div",{key:e.id,class:(0,l.C_)(["float-option",{selected:Q.value.level===e.id,[e.id]:!0}]),onClick:a=>ie(e.id)},[(0,o._)("div",{class:(0,l.C_)(["checkbox",{checked:Q.value.level===e.id}])},[Q.value.level===e.id?((0,o.wg)(),(0,o.j4)(t,{key:0,name:"success",class:"check-icon"})):(0,o.kq)("",!0)],2),(0,o._)("span",w,(0,l.zw)(e.name),1)],10,A))),64))])],4)):(0,o.kq)("",!0)]),(0,o._)("div",h,[a[6]||(a[6]=(0,o._)("img",{src:n,alt:"",class:"vehicle-image",style:{"pointer-events":"none"}},null,-1)),((0,o.wg)(),(0,o.iD)("svg",{class:"vehicle-svg2",viewBox:O.value,preserveAspectRatio:"xMidYMid meet"},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(K,(e=>((0,o.wg)(),(0,o.iD)("path",{key:e.id,d:G(e),class:(0,l.C_)(["part-path",ce(e)]),onClick:a=>se(e),style:{"pointer-events":"all"}},null,10,b)))),128))],8,k))]),Q.value&&Y.value?((0,o.wg)(),(0,o.iD)("div",x,[(0,o._)("h3",null,"调整 "+(0,l.zw)(Q.value.name)+" 的位置",1),(0,o._)("div",N,[(0,o._)("div",T,[a[7]||(a[7]=(0,o._)("label",null,"水平偏移 (X):",-1)),(0,o._)("div",_,[(0,o.wy)((0,o._)("input",{type:"range","onUpdate:modelValue":a[1]||(a[1]=e=>Q.value.offsetX=e),min:"-50",max:"50",step:"1",class:"adjust-slider",onInput:ae},null,544),[[s.nr,Q.value.offsetX,void 0,{number:!0}]]),(0,o._)("span",D,(0,l.zw)(Q.value.offsetX)+"px",1)])]),(0,o._)("div",F,[a[8]||(a[8]=(0,o._)("label",null,"垂直偏移 (Y):",-1)),(0,o._)("div",I,[(0,o.wy)((0,o._)("input",{type:"range","onUpdate:modelValue":a[2]||(a[2]=e=>Q.value.offsetY=e),min:"-50",max:"50",step:"1",class:"adjust-slider",onInput:ae},null,544),[[s.nr,Q.value.offsetY,void 0,{number:!0}]]),(0,o._)("span",B,(0,l.zw)(Q.value.offsetY)+"px",1)])]),(0,o._)("div",P,[a[9]||(a[9]=(0,o._)("label",null,"缩放比例:",-1)),(0,o._)("div",U,[(0,o.wy)((0,o._)("input",{type:"range","onUpdate:modelValue":a[3]||(a[3]=e=>Q.value.scale=e),min:"0.5",max:"1.5",step:"0.05",class:"adjust-slider",onInput:ae},null,544),[[s.nr,Q.value.scale,void 0,{number:!0}]]),(0,o._)("span",V,(0,l.zw)(Q.value.scale.toFixed(2)),1)])]),(0,o._)("div",{class:"adjustment-buttons"},[(0,o._)("button",{onClick:te,class:"reset-btn"},"重置"),(0,o._)("button",{onClick:oe,class:"copy-btn"},"复制调整后路径"),(0,o._)("button",{onClick:le,class:"save-btn"},"保存调整")])])])):(0,o.kq)("",!0),Q.value&&!Y.value?((0,o.wg)(),(0,o.iD)("div",W,[(0,o._)("h3",null,"选择 "+(0,l.zw)(Q.value.name)+" 的损失程度",1),(0,o._)("div",R,[((0,o.wg)(),(0,o.iD)(o.HY,null,(0,o.Ko)(J,(e=>(0,o._)("div",{key:e.id,class:(0,l.C_)(["loss-option",{selected:Q.value.level===e.id,[e.id]:!0}]),onClick:a=>ie(e.id)},(0,l.zw)(e.name),11,H))),64))])])):(0,o.kq)("",!0)]),(0,o._)("div",E,[(0,o.Wm)(r,{class:"footer_red_btn",style:{"border-radius":"25px"},onClick:me},{default:(0,o.w5)((()=>[...a[10]||(a[10]=[(0,o.Uk)(" 确定 ",-1)])])),_:1})])])):(0,o.kq)("",!0)}}},j=t(3744);const q=(0,j.Z)(S,[["__scopeId","data-v-abb1d75e"]]);var L=q},1308:function(e,a,t){t.d(a,{Z:function(){return R}});var o=t(6252),l=t(3577);const s={class:"field-item",style:{padding:"0.5rem 1rem"}},i={class:"field-value"},n={class:"field-item",style:{padding:"0.5rem 1rem"}},r={class:"field-value"},d={class:"field-item",style:{padding:"0.5rem 1rem"}},u={class:"field-value"},c={class:"field-item",style:{padding:"0.5rem 1rem"}},m={class:"radio-group"},v={class:"field-item",style:{padding:"0.5rem 1rem"}},p={class:"radio-group"},y={class:"field-item",style:{padding:"0.5rem 1rem"}},f={class:"radio-group"},g={class:"field-item",style:{padding:"0.5rem 1rem"}},C={class:"field-value"},A={class:"field-item",style:{padding:"0.5rem 1rem"}},w={class:"field-value"},h={class:"field-item",style:{padding:"0.5rem 1rem"}},k={class:"field-value"},b={class:"field-item",style:{padding:"0.5rem 1rem"}},x={class:"field-value"},N={class:"field-item",style:{padding:"0.5rem 1rem"}},T={class:"field-value"},_={class:"field-item",style:{padding:"0.5rem 1rem"}},D={class:"field-value"},F={class:"field-item",style:{padding:"0.5rem 1rem"}},I={class:"field-value"},B={class:"field-item",style:{padding:"0.5rem 1rem"}},P={class:"field-value"};var U={__name:"offenseInfo",props:{offenseInfoList:{type:Object,default:()=>({registNo:"",insuredName:"",reporterName:"",onSiteReport:"",wechatClaim:"",normalDriving:"",accidentTime:"",accidentLocation:"",detailedAddress:"",reportTime:"",reportPhone:"",driverName:"",driverPhone:"",accidentProcess:""})}},setup(e){return(a,t)=>{const U=(0,o.up)("van-radio"),V=(0,o.up)("van-radio-group");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",s,[t[3]||(t[3]=(0,o._)("span",{class:"field-label",style:{"min-width":"25%"}},"报案号",-1)),(0,o._)("span",i,(0,l.zw)(e.offenseInfoList.registNo),1)]),(0,o._)("div",n,[t[4]||(t[4]=(0,o._)("span",{class:"field-label",style:{"min-width":"25%"}},"被保险人",-1)),(0,o._)("span",r,(0,l.zw)(e.offenseInfoList.insuredName),1)]),(0,o._)("div",d,[t[5]||(t[5]=(0,o._)("span",{class:"field-label",style:{"min-width":"25%"}},"报案人",-1)),(0,o._)("span",u,(0,l.zw)(e.offenseInfoList.reportorName),1)]),(0,o._)("div",c,[t[8]||(t[8]=(0,o._)("span",{class:"field-label",style:{"min-width":"25%"}},"现场报案",-1)),(0,o._)("div",m,[(0,o.Wm)(V,{modelValue:e.offenseInfoList.onSiteReport,"onUpdate:modelValue":t[0]||(t[0]=a=>e.offenseInfoList.onSiteReport=a),direction:"horizontal",disabled:"",class:"custom-radio-group"},{default:(0,o.w5)((()=>[(0,o.Wm)(U,{name:"true"},{default:(0,o.w5)((()=>[...t[6]||(t[6]=[(0,o.Uk)("是",-1)])])),_:1}),(0,o.Wm)(U,{name:"false"},{default:(0,o.w5)((()=>[...t[7]||(t[7]=[(0,o.Uk)("否",-1)])])),_:1})])),_:1},8,["modelValue"])])]),(0,o._)("div",v,[t[11]||(t[11]=(0,o._)("span",{class:"field-label",style:{"min-width":"25%"}},"微信理赔",-1)),(0,o._)("div",p,[(0,o.Wm)(V,{modelValue:e.offenseInfoList.wechatClaim,"onUpdate:modelValue":t[1]||(t[1]=a=>e.offenseInfoList.wechatClaim=a),direction:"horizontal",disabled:"",class:"custom-radio-group"},{default:(0,o.w5)((()=>[(0,o.Wm)(U,{name:"true"},{default:(0,o.w5)((()=>[...t[9]||(t[9]=[(0,o.Uk)("是",-1)])])),_:1}),(0,o.Wm)(U,{name:"false"},{default:(0,o.w5)((()=>[...t[10]||(t[10]=[(0,o.Uk)("否",-1)])])),_:1})])),_:1},8,["modelValue"])])]),(0,o._)("div",y,[t[14]||(t[14]=(0,o._)("span",{class:"field-label",style:{"min-width":"25%"}},"正常行驶",-1)),(0,o._)("div",f,[(0,o.Wm)(V,{modelValue:e.offenseInfoList.normalDriving,"onUpdate:modelValue":t[2]||(t[2]=a=>e.offenseInfoList.normalDriving=a),direction:"horizontal",disabled:"",class:"custom-radio-group"},{default:(0,o.w5)((()=>[(0,o.Wm)(U,{name:"true"},{default:(0,o.w5)((()=>[...t[12]||(t[12]=[(0,o.Uk)("是",-1)])])),_:1}),(0,o.Wm)(U,{name:"false"},{default:(0,o.w5)((()=>[...t[13]||(t[13]=[(0,o.Uk)("否",-1)])])),_:1})])),_:1},8,["modelValue"])])]),(0,o._)("div",g,[t[15]||(t[15]=(0,o._)("span",{class:"field-label",style:{"min-width":"25%"}},"出险时间",-1)),(0,o._)("span",C,(0,l.zw)(e.offenseInfoList.notifyDate),1)]),(0,o._)("div",A,[t[16]||(t[16]=(0,o._)("span",{class:"field-label",style:{"min-width":"25%"}},"出险地点",-1)),(0,o._)("span",w,(0,l.zw)(e.offenseInfoList.damageaddress),1)]),(0,o._)("div",h,[t[17]||(t[17]=(0,o._)("span",{class:"field-label",style:{"min-width":"25%"}},"详细地址",-1)),(0,o._)("span",k,(0,l.zw)(e.offenseInfoList.damageaddress),1)]),(0,o._)("div",b,[t[18]||(t[18]=(0,o._)("span",{class:"field-label",style:{"min-width":"25%"}},"报案时间",-1)),(0,o._)("span",x,(0,l.zw)(e.offenseInfoList.reportDate),1)]),(0,o._)("div",N,[t[19]||(t[19]=(0,o._)("span",{class:"field-label",style:{"min-width":"25%"}},"报案电话",-1)),(0,o._)("span",T,(0,l.zw)(e.offenseInfoList.reportorMobile),1)]),(0,o._)("div",_,[t[20]||(t[20]=(0,o._)("span",{class:"field-label",style:{"min-width":"25%"}},"驾驶员姓名",-1)),(0,o._)("span",D,(0,l.zw)(e.offenseInfoList.driversName),1)]),(0,o._)("div",F,[t[21]||(t[21]=(0,o._)("span",{class:"field-label",style:{"min-width":"25%"}},"驾驶员电话",-1)),(0,o._)("span",I,(0,l.zw)(e.offenseInfoList.driverPhone),1)]),(0,o._)("div",B,[t[22]||(t[22]=(0,o._)("span",{class:"field-label",style:{"min-width":"25%"}},"出险经过",-1)),(0,o._)("span",P,(0,l.zw)(e.offenseInfoList.damageCase),1)])],64)}}},V=t(3744);const W=(0,V.Z)(U,[["__scopeId","data-v-9e4fd646"]]);var R=W},2487:function(e,a,t){t.d(a,{Z:function(){return D}});t(7658),t(2490),t(9849),t(9461),t(4514),t(9924);var o=t(6252),l=t(3577),s=t(2262),i=t(8339),n=t(1831),r=t(9201),d=t(9659),u=t(4029);const c={class:"reparations-component"},m={class:"property-list"},v={class:"property-content"},p={class:"property-name"},y={class:"add-reparation-popup"},f={class:"popup-header"},g={class:"popup-content"},C={class:"form-item"},A={class:"form-item"},w={class:"form-item"},h={class:"form-item"},k={class:"form-item"},b={class:"form-item"},x={class:"popup-footer"};var N={__name:"reparations",props:{isReadOnly:{type:Boolean,default:!1}},emits:["update"],setup(e,{expose:a,emit:t}){const N=(0,i.yj)(),T=e,_=(0,s.iH)(!1),D=(0,s.iH)(!1),F=(0,s.iH)(!1),I=(0,s.iH)(!1),B=(0,s.iH)(!1),P=(0,s.iH)(!1),U=(0,s.iH)(!1),V=(0,s.iH)(null),W=(0,s.iH)(!1),R=(0,s.iH)(-1),H=(0,s.iH)([]),E=(0,s.qj)({id:null,costType:{value:"",text:""},chargeCode:{value:"",text:""},invoiceAmount:"",name:{value:"",text:""},accounid:{value:"",text:""},insuranceCode:{value:"",text:""},kindCode:{value:"",text:""},exceptionType:{value:"",text:""},payExcreasonType:{value:"",text:""},paymentType:{value:"",text:""},payeeType:{value:"",text:""}}),S=(0,s.iH)([]),j=(0,s.iH)([{text:"律师费",value:"1009"},{text:"其他法律费用",value:"02"},{text:"公估费",value:"1008"},{text:"代查勘费",value:"1013"},{text:"鉴定费",value:"1005"},{text:"诉讼费",value:"1004"},{text:"检验费",value:"1001"},{text:"其他",value:"1000"},{text:"差旅费",value:"1014"},{text:"奖励费",value:"1018"}]),q=(0,s.iH)([]),L=(0,s.iH)([{text:"正常",value:"01"},{text:"例外",value:"02"},{text:"特殊",value:"03"}]),O=(0,s.iH)([{text:"个人",value:"01"},{text:"公司",value:"02"},{text:"机构",value:"03"}]),Y=(0,s.iH)([]),Z=async()=>{try{const e=N.query.registNo;if(!e)return void(q.value=[]);const a=await(0,u.yj)(e);if(200===a.data.code&&a.data.data){const e=a.data.data;if(e.policyItemKindList&&Array.isArray(e.policyItemKindList)){const a=await(0,d.getCodeOptions)("coverageCode"),t=e.policyItemKindList.map((e=>({value:e.itemCode,text:""}))).filter((e=>e.value)),o=t.map((e=>{const t=a.find((a=>a.value===e.value));return{value:e.value,text:t?t.text:e.value}}));q.value=o}else q.value=[]}}catch(e){console.error("加载险别代码选项失败:",e),q.value=[]}},K=async()=>{try{const e=await(0,d.getCodeOptions)("payeeType");Y.value=e.map((e=>({text:e.text||e.label||e.name,value:e.value||e.code||e.id})))}catch(e){console.error("加载支付对象类型选项失败:",e),Y.value=[]}},z=async()=>{try{const e=await(0,d.getCodeOptions)("exceptionModifyType");L.value=e.map((e=>({text:e.text||e.label||e.name,value:e.value||e.code||e.id})))}catch(e){console.error("加载例外修改类型选项失败:",e),L.value=[]}},M=async()=>{J(),W.value=!1,R.value=-1,ae(),K(),z(),await Z(),_.value=!0},X=()=>{_.value=!1,J()},J=()=>{Object.keys(E).forEach((e=>{"id"!==e&&("object"===typeof E[e]?E[e]={value:"",text:""}:E[e]="")})),E.id=Date.now(),E.name={value:"",text:""},E.accounid={value:"",text:""}},Q=e=>{const a=H.value[e];if(Object.keys(E).forEach((e=>{if(void 0!==a[e])if("object"===typeof E[e]&&"object"===typeof a[e])E[e]={...a[e]};else if("object"===typeof E[e]&&"object"!==typeof a[e]){const t=G(e,a[e]);E[e]=t||{value:a[e],text:a[e]}}else E[e]=a[e]})),a.accounid)if("object"===typeof a.accounid)E.accounid={...a.accounid},E.name={value:a.accounid.text||a.name||"",text:a.accounid.text||a.name||""};else{const e=S.value.find((e=>e.value===a.accounid));e&&(E.accounid={value:e.value,text:e.text},E.name={value:e.text,text:e.text})}if(a.payeeType){if("object"===typeof a.payeeType)E.payeeType={...a.payeeType};else{const e=Y.value.find((e=>e.value===a.payeeType));E.payeeType=e?{value:e.value,text:e.text}:{value:a.payeeType,text:a.payeeType}}if("A01"===E.payeeType.value){const e=L.value.find((e=>"00"===e.value));e&&(E.payExcreasonType={value:e.value,text:e.text})}}W.value=!0,R.value=e,_.value=!0},G=(e,a)=>{const t={kindCode:q.value,chargeCode:j.value,payExcreasonType:L.value,accounid:O.value,name:S.value,payeeType:Y.value},o=t[e];return o&&o.find((e=>e.value===a||e.text===a))||null},$=e=>{H.value.splice(e,1),me("update")},ee=async()=>{try{if(await V.value.validate(),!E.accounid.value)return void(0,n.CF)("请选择接赔人");if(!E.chargeCode.value||!E.chargeCode.text)return void(0,n.CF)("请选择费用类型");if(!E.invoiceAmount||parseFloat(E.invoiceAmount)<=0)return void(0,n.CF)("请输入有效的费用金额");if(!E.kindCode.value||!E.kindCode.text)return void(0,n.CF)("请选择险别代码");if(!E.payExcreasonType.value||!E.payExcreasonType.text)return void(0,n.CF)("请选择例外修改类型");let e=E.payeeType.value,a=E.payeeType.text;if(!e){const t=Y.value.find((e=>"A01"!==e.value));t&&(e=t.value,a=t.text)}let t=E.payExcreasonType.value,o=E.payExcreasonType.text;if("A01"===e){const e=L.value.find((e=>"00"===e.value));e&&(t=e.value,o=e.text)}const l={id:E.id||Date.now(),chargeCode:E.chargeCode,invoiceAmount:parseFloat(E.invoiceAmount||0).toFixed(2),name:E.name,accounid:E.accounid,kindCode:E.kindCode,payExcreasonType:{value:t,text:o||""},paymentType:E.paymentType,payeeType:{value:e,text:a||""}};W.value&&-1!==R.value?(H.value[R.value]=l,(0,n.CF)("修改成功")):(H.value.push(l),(0,n.CF)("添加成功")),X(),me("update")}catch(e){console.log("表单验证失败",e),e.errors&&e.errors.length>0&&(0,n.CF)(e.errors[0].message)}},ae=async()=>{try{const e=N.query.registNo;if(!e)return console.log("未找到案件号，跳过加载接赔人数据"),void(S.value=[]);const a=await(0,r.JY)({registNo:e});if(200===a.data.code&&a.data.data){const e=a.data.data.accountInfoList||[];S.value=e.map((e=>({value:e.accounId,text:e.name}))),console.log("recipientOptions",S)}else S.value=[]}catch(e){S.value=[]}},te=e=>{let a=null;if(a=e.selectedOptions&&e.selectedOptions.length>0?e.selectedOptions[0]:"object"===typeof e&&void 0!==e.value?e:S.value.find((a=>a.value===e||a.text===e)),a){E.name={value:a.text,text:a.text},E.accounid={value:a.value,text:a.text};const e=Y.value.find((e=>"A01"!==e.value));if(e&&(E.payeeType={value:e.value,text:e.text}),"A01"===E.payeeType.value){const e=L.value.find((e=>"00"===e.value));e&&(E.payExcreasonType={value:e.value,text:e.text})}}F.value=!1},oe=(e,a)=>{let t=null;if("object"===typeof e&&e.selectedOptions)t=e.selectedOptions[0];else if("object"===typeof e&&e.value)t=e;else{const o={costType:j.value,insurance:q.value,exception:L.value,payment:O.value,payee:Y.value}[a];t=o.find((a=>a.text===e||a.value===e))}if(t){const e={costType:{valueField:"costType",textField:"chargeCode"},insurance:{valueField:"insuranceCode",textField:"kindCode"},exception:{valueField:"exceptionType",textField:"payExcreasonType"},payment:{valueField:"paymentType",textField:"accounid"},payee:{valueField:"payeeType",textField:"payeeType"}},{valueField:o,textField:l}=e[a];if(E[l]={value:t.value,text:t.text},"payee"===a&&"A01"===t.value){const e=L.value.find((e=>"00"===e.value));e&&(E.payExcreasonType={value:e.value,text:e.text})}}const o={costType:"showCostTypePicker",insurance:"showInsurancePicker",exception:"showExceptionPicker",payment:"showPaymentPicker",payee:"showPayeeTypePicker"},l=o[a];if(l){const e={showCostTypePicker:D,showInsurancePicker:I,showExceptionPicker:B,showPaymentPicker:P,showPayeeTypePicker:U}[l];e.value=!1}},le=e=>{oe(e,"costType")},se=e=>{oe(e,"insurance")},ie=e=>{oe(e,"exception")},ne=e=>{oe(e,"payee")},re=e=>e?parseFloat(e).toFixed(2):"0.00",de=e=>{if(!e)return"";const a=j.value.find((a=>a.value===e));return a?a.text:e},ue=e=>{if(e.accounid&&(E.accounid=ce(e.accounid,"accounid")),e.chargeCode&&(E.chargeCode=ce(e.chargeCode,"chargeCode")),e.invoiceAmount&&(E.invoiceAmount=e.invoiceAmount),e.kindCode&&(E.kindCode=ce(e.kindCode,"kindCode")),e.payExcreasonType&&(E.payExcreasonType=ce(e.payExcreasonType,"payExcreasonType")),e.payeeType){if("object"===typeof e.payeeType)E.payeeType={...e.payeeType};else{const a=Y.value.find((a=>a.value===e.payeeType));E.payeeType=a?{value:a.value,text:a.text}:{value:e.payeeType,text:e.payeeType}}if("A01"===E.payeeType.value){const e=L.value.find((e=>"00"===e.value));e&&(E.payExcreasonType={value:e.value,text:e.text})}}},ce=(e,a)=>{if("object"===typeof e&&null!==e)return{...e};{const t={kindCode:q.value,chargeCode:j.value,payExcreasonType:L.value,paymentType:O.value,accounid:S.value,name:S.value,payeeType:Y.value},o=t[a];if(o&&o.length>0){const a=o.find((a=>a.value===e||a.text===e));return a?{value:a.value,text:a.text}:{value:e,text:e}}return{value:e,text:e}}},me=t,ve=()=>H.value.map((e=>({accounid:"object"===typeof e.accounid&&e.accounid?e.accounid.value:e.accounid,name:"object"===typeof e.name&&e.name?e.name.text:e.name,chargeCode:"object"===typeof e.chargeCode&&e.chargeCode?e.chargeCode.value:e.chargeCode,invoiceAmount:parseFloat(e.invoiceAmount)||0,kindCode:"object"===typeof e.kindCode&&e.kindCode?e.kindCode.value:e.kindCode,payExcreasonType:"object"===typeof e.payExcreasonType&&e.payExcreasonType?e.payExcreasonType.value:e.payExcreasonType,paymentType:"object"===typeof e.paymentType&&e.paymentType?e.paymentType.value:e.paymentType,payeeType:"object"===typeof e.payeeType&&e.payeeType?e.payeeType.value:e.payeeType}))),pe=e=>{e&&Array.isArray(e)&&(H.value=e.map((e=>{let a={value:"",text:""},t={value:"",text:""};if(e.accounid){if("object"===typeof e.accounid&&null!==e.accounid)a={value:e.accounid.value||e.accounid,text:e.accounid.text||e.accounid};else{const t=S.value.find((a=>a.value===e.accounid||a.text===e.name));a=t?{value:t.value,text:t.text}:{value:e.accounid,text:e.accounid}}if("object"===typeof e.name&&null!==e.name)t={value:e.name.value||e.name,text:e.name.text||e.name};else{const a=S.value.find((a=>a.text===e.name||a.value===e.name));t=a?{value:a.text,text:a.text}:{value:e.name,text:e.name}}}let o={value:"",text:""};if(e.payeeType)if("object"===typeof e.payeeType)o={...e.payeeType};else{const a=Y.value.find((a=>a.value===e.payeeType));o=a?{value:a.value,text:a.text}:{value:e.payeeType,text:e.payeeType}}let l={value:"",text:""};if(e.payExcreasonType)if("object"===typeof e.payExcreasonType)l={...e.payExcreasonType};else{const a=L.value.find((a=>a.value===e.payExcreasonType));l=a?{value:a.value,text:a.text}:{value:e.payExcreasonType,text:e.payExcreasonType}}if("A01"===o.value){const e=L.value.find((e=>"00"===e.value));e&&(l={value:e.value,text:e.text})}return{...e,accounid:a,name:t,chargeCode:ce(e.chargeCode,"chargeCode"),kindCode:ce(e.kindCode,"kindCode"),payExcreasonType:l,paymentType:ce(e.paymentType,"paymentType"),payeeType:o,invoiceAmount:re(e.invoiceAmount)}})))};return(0,o.bv)((()=>{(0,o.Y3)((async()=>{await ae(),await Z(),await K(),await z()}))})),(0,o.YP)((()=>N.query.registNo),(e=>{e&&ae()})),a({getFormData:ve,updateFormData:pe,setFormData:ue,loadRecipientData:ae,loadPayeeTypeOptions:K,loadExceptionOptions:z,loadInsuranceOptions:Z}),(e,a)=>{const t=(0,o.up)("van-button"),s=(0,o.up)("van-icon"),i=(0,o.up)("van-field"),n=(0,o.up)("van-form"),r=(0,o.up)("van-popup"),d=(0,o.up)("van-picker");return(0,o.wg)(),(0,o.iD)("div",c,[(0,o._)("div",m,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(H.value,((e,i)=>((0,o.wg)(),(0,o.iD)("div",{key:i,class:"property-item"},[(0,o._)("div",v,[(0,o._)("span",p,(0,l.zw)(e.accounid.text||"")+"-"+(0,l.zw)(de(e.chargeCode.text))+" 【"+(0,l.zw)(re(e.invoiceAmount))+"】",1),T.isReadOnly?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(t,{key:0,size:"small",type:"primary",class:"edit-btn",onClick:e=>Q(i)},{default:(0,o.w5)((()=>[...a[21]||(a[21]=[(0,o.Uk)(" 编辑 ",-1)])])),_:1},8,["onClick"]))]),T.isReadOnly?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(s,{key:0,name:"cross",class:"property-delete-icon",onClick:e=>$(i)},null,8,["onClick"]))])))),128))]),T.isReadOnly?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",{key:0,class:"add-reparation",onClick:M},[(0,o.Wm)(s,{name:"add-o",class:"add-icon"}),a[22]||(a[22]=(0,o._)("span",null,"添加费用赔款",-1))])),(0,o.Wm)(r,{show:_.value,"onUpdate:show":a[10]||(a[10]=e=>_.value=e),position:"bottom",round:"",style:{height:"auto",backgroundColor:"white"}},{default:(0,o.w5)((()=>[(0,o._)("div",y,[(0,o._)("div",f,[a[23]||(a[23]=(0,o._)("span",{class:"popup-title"},"添加费用赔款",-1)),(0,o.Wm)(s,{name:"cross",class:"popup-close",onClick:X})]),(0,o._)("div",g,[(0,o.Wm)(n,{ref_key:"reparationForm",ref:V,class:"reparation-form"},{default:(0,o.w5)((()=>[(0,o._)("div",C,[a[24]||(a[24]=(0,o._)("label",{class:"form-label"},[(0,o.Uk)(" 费用类型"),(0,o._)("span",{class:"required-star"},"*")],-1)),(0,o.Wm)(i,{modelValue:E.chargeCode.text,"onUpdate:modelValue":a[0]||(a[0]=e=>E.chargeCode.text=e),readonly:"",clickable:"",placeholder:"请选择",rules:[{required:!0,message:"请选择费用类型"}],onClick:a[1]||(a[1]=e=>D.value=!0),class:"custom-field"},{"right-icon":(0,o.w5)((()=>[(0,o.Wm)(s,{name:"arrow"})])),_:1},8,["modelValue"])]),(0,o._)("div",A,[a[25]||(a[25]=(0,o._)("label",{class:"form-label"},[(0,o.Uk)(" 费用金额"),(0,o._)("span",{class:"required-star"},"*")],-1)),(0,o.Wm)(i,{modelValue:E.invoiceAmount,"onUpdate:modelValue":a[2]||(a[2]=e=>E.invoiceAmount=e),type:"number",placeholder:"请输入费用金额",rules:[{required:!0,message:"请输入费用金额"}],class:"custom-field"},null,8,["modelValue"])]),(0,o._)("div",w,[a[26]||(a[26]=(0,o._)("label",{class:"form-label"},[(0,o.Uk)(" 接赔人"),(0,o._)("span",{class:"required-star"},"*")],-1)),(0,o.Wm)(i,{"model-value":E.name?E.name.text:"",readonly:"",clickable:"",placeholder:"请选择接赔人",rules:[{required:!0,message:"请选择接赔人"}],onClick:a[3]||(a[3]=e=>F.value=!0),class:"custom-field"},{"right-icon":(0,o.w5)((()=>[(0,o.Wm)(s,{name:"arrow"})])),_:1},8,["model-value"])]),(0,o._)("div",h,[a[27]||(a[27]=(0,o._)("label",{class:"form-label"},[(0,o.Uk)(" 险别代码"),(0,o._)("span",{class:"required-star"},"*")],-1)),(0,o.Wm)(i,{modelValue:E.kindCode.text,"onUpdate:modelValue":a[4]||(a[4]=e=>E.kindCode.text=e),readonly:"",clickable:"",placeholder:"请选择",rules:[{required:!0,message:"请选择险别代码"}],onClick:a[5]||(a[5]=e=>I.value=!0),class:"custom-field"},{"right-icon":(0,o.w5)((()=>[(0,o.Wm)(s,{name:"arrow"})])),_:1},8,["modelValue"])]),(0,o._)("div",k,[a[28]||(a[28]=(0,o._)("label",{class:"form-label"},[(0,o.Uk)("支付对象类型"),(0,o._)("span",{class:"required-star"},"*")],-1)),(0,o.Wm)(i,{modelValue:E.payeeType.text,"onUpdate:modelValue":a[6]||(a[6]=e=>E.payeeType.text=e),readonly:"",clickable:"",placeholder:"请选择",onClick:a[7]||(a[7]=e=>U.value=!0),class:"custom-field"},{"right-icon":(0,o.w5)((()=>[(0,o.Wm)(s,{name:"arrow"})])),_:1},8,["modelValue"])]),(0,o._)("div",b,[a[29]||(a[29]=(0,o._)("label",{class:"form-label"},[(0,o.Uk)(" 例外修改类型"),(0,o._)("span",{class:"required-star"},"*")],-1)),(0,o.Wm)(i,{modelValue:E.payExcreasonType.text,"onUpdate:modelValue":a[8]||(a[8]=e=>E.payExcreasonType.text=e),readonly:"",clickable:"",placeholder:"请选择",rules:[{required:!0,message:"请选择例外修改类型"}],onClick:a[9]||(a[9]=e=>B.value=!0),class:"custom-field"},{"right-icon":(0,o.w5)((()=>[(0,o.Wm)(s,{name:"arrow"})])),_:1},8,["modelValue"])])])),_:1},512)]),(0,o._)("div",x,[(0,o.Wm)(t,{class:"footer_gray_btn",onClick:X},{default:(0,o.w5)((()=>[...a[30]||(a[30]=[(0,o.Uk)("取消",-1)])])),_:1}),T.isReadOnly?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(t,{key:0,class:"footer_red_btn",onClick:ee},{default:(0,o.w5)((()=>[...a[31]||(a[31]=[(0,o.Uk)("确认添加",-1)])])),_:1}))])])])),_:1},8,["show"]),(0,o.Wm)(r,{show:D.value,"onUpdate:show":a[12]||(a[12]=e=>D.value=e),position:"bottom",round:""},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{columns:j.value,onConfirm:le,onCancel:a[11]||(a[11]=e=>D.value=!1)},null,8,["columns"])])),_:1},8,["show"]),(0,o.Wm)(r,{show:I.value,"onUpdate:show":a[14]||(a[14]=e=>I.value=e),position:"bottom",round:""},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{columns:q.value,onConfirm:se,onCancel:a[13]||(a[13]=e=>I.value=!1)},null,8,["columns"])])),_:1},8,["show"]),(0,o.Wm)(r,{show:F.value,"onUpdate:show":a[16]||(a[16]=e=>F.value=e),position:"bottom",round:""},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{columns:S.value,onConfirm:te,onCancel:a[15]||(a[15]=e=>F.value=!1)},null,8,["columns"])])),_:1},8,["show"]),(0,o.Wm)(r,{show:B.value,"onUpdate:show":a[18]||(a[18]=e=>B.value=e),position:"bottom",round:""},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{columns:L.value,onConfirm:ie,onCancel:a[17]||(a[17]=e=>B.value=!1)},null,8,["columns"])])),_:1},8,["show"]),(0,o.Wm)(r,{show:U.value,"onUpdate:show":a[20]||(a[20]=e=>U.value=e),position:"bottom",round:""},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{columns:Y.value,onConfirm:ne,onCancel:a[19]||(a[19]=e=>U.value=!1)},null,8,["columns"])])),_:1},8,["show"])])}}},T=t(3744);const _=(0,T.Z)(N,[["__scopeId","data-v-fd7c607a"]]);var D=_},5592:function(e,a,t){t.d(a,{Z:function(){return D}});t(7658),t(2490),t(9461),t(4514),t(9924);var o=t(6252),l=t(3577),s=t(2262),i=t(4052),n=t(309),r=t(1831),d=t(8673),u=t(9201),c=t(9659),m=t(8339);const v={class:"payee-info-container"},p={class:"page-header"},y={key:0,class:"payee-list"},f={class:"payee-content"},g={class:"payee-main-info"},C={class:"payee-name"},A={class:"payee-account"},w={class:"payee-bank"},h={class:"payee-actions"},k={class:"popup-header"},b={class:"popup-content"},x={class:"popup-actions"};var N={__name:"payee-Info",props:{carItem:{type:Object,default:()=>({})},payeeData:{type:Object,default:()=>({})},isReadOnly:{type:Boolean,default:!1}},emits:["update","form-data-change","add-payee"],setup(e,{expose:a,emit:N}){const T=(0,m.yj)(),_=e,D=N,F=(0,s.iH)(null),I=(0,s.iH)(t(5487)),B=(0,s.iH)(t(5371)),P=(0,s.iH)([]),U=(0,s.iH)(!1),V=(0,s.iH)(!1),W=(0,s.iH)(-1),R=(0,s.qj)({id:"",accountId:"",name:"",certificateNo:"",properties:"2",accountNumber:"",bankNo:"",contactNumber:"",ifsendsms:"1",bankNoName:"",bankAddressS:"",bankAddressX:"",bankAddressN:"",subBankNo:"",subBankNoName:"",pktype:"",PKTYPEName:"",reason:"",reasonName:"",remark:""}),H=[{required:!0,message:"请输入接赔人姓名"},{pattern:/^[\u4e00-\u9fa5]{2,20}$/,message:"姓名格式不正确"}],E=[{required:!0,message:"请输入手机号"},{pattern:/^1[3-9]\d{9}$/,message:"手机号格式不正确"}],S=[{required:!0,message:"请输入证件号码"},{validator:e=>{if(!e)return!0;const a=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;return a.test(e)||e.length>=5},message:"证件号码格式不正确"}],j=[{required:!0,message:"请输入银行账号"},{pattern:/^\d{16,19}$/,message:"银行账号格式不正确"}],q=(0,s.iH)(!1),L=(0,s.iH)(""),O=(0,s.qj)({bankNo:[],sid:[],xid:[],nid:[],subBankNo:[],pktype:[],reason:[]}),Y=()=>{_.payeeData&&_.payeeData.payeeList&&(P.value=[..._.payeeData.payeeList])},Z=async()=>{try{await F.value.validate(),await M()}catch(e){console.log("表单校验失败:",e)}},K=()=>{J(),V.value=!1,W.value=-1,U.value=!0},z=async e=>{if(!_.isReadOnly&&e>=0&&e<P.value.length){const t=P.value[e];if(J(),await Promise.all([te(),oe(),de()]),console.log("📝 开始编辑接赔人，原始数据:",t),Object.keys(t).forEach((e=>{(e in R||"accounId"===e)&&("properties"===e?R[e]=t[e]||"2":"accounId"===e?R.accountId=t[e]||"":"pktype"===e||"reason"===e?(R[e]=t[e]||"","pktype"===e?(R.PKTYPEName=t.PKTYPEName||ne(t[e],"pktype")||"",console.log(`✅ pktype: ${t[e]} -> PKTYPEName: ${R.PKTYPEName}`)):"reason"===e&&(R.reasonName=t.reasonName||ne(t[e],"reason")||"",console.log(`✅ reason: ${t[e]} -> reasonName: ${R.reasonName}`))):"bankNo"===e||"subBankNo"===e?(R[e]=t[e]||"",R[`${e}Name`]=t[`${e}Name`]||"","subBankNo"===e&&console.log(`✅ subBankNo: ${t[e]} -> subBankNoName: ${R.subBankNoName}`)):R[e]=t[e])})),!R.sid&&R.bankAddressS)try{O.sid&&0!==O.sid.length||await oe();const e=O.sid.find((e=>e.text===R.bankAddressS));e&&(R.sid=e.value)}catch(a){console.error("获取省份码值失败:",a)}if(!R.xid&&R.bankAddressX&&R.sid)try{if(O.xid&&0!==O.xid.length||await le(R.sid),O.xid&&O.xid.length>0){const e=O.xid.find((e=>e.text===R.bankAddressX));e&&(R.xid=e.value)}}catch(a){console.error("获取城市码值失败:",a)}if((!R.nid||!R.sid||!R.xid)&&R.bankAddressS&&R.bankAddressX&&R.bankAddressN)try{if(O.sid&&0!==O.sid.length||await oe(),!R.sid){const e=O.sid.find((e=>e.text===R.bankAddressS));e&&(R.sid=e.value)}if(!R.sid||O.xid&&0!==O.xid.length||await le(R.sid),!R.xid&&O.xid&&O.xid.length>0){const e=O.xid.find((e=>e.text===R.bankAddressX));e&&(R.xid=e.value)}if(R.sid&&R.bankAddressX){const e={areaProvinceCode:R.sid,areaCityName:R.bankAddressX},{data:a}=await(0,d.WE)(e);if(200===a.code){O.nid=a.data;const e=a.data.find((e=>e.name===R.bankAddressN));e&&(R.nid=e.code)}}}catch(a){console.error("获取区县码值失败:",a)}if(!R.subBankNoName&&R.subBankNo&&R.bankNo&&R.nid)try{const e={bankNo:R.bankNo,areaCode:R.areaCode},{data:a}=await(0,u.s5)(e);if(200===a.code){const e=a.data.find((e=>e.bankNo===R.subBankNo));e&&(R.subBankNoName=e.bankName,O.subBankNo=a.data.map((e=>({value:e.bankNo,text:e.bankName}))))}}catch(a){console.error("获取支行信息失败:",a)}V.value=!0,W.value=e;try{R.sid&&await le(R.sid),R.xid&&R.sid&&await se(R.xid),R.nid&&R.bankNo&&await ie()}catch(a){}U.value=!0}},M=async()=>{if(R.name?.trim())if(R.accountNumber?.trim())try{const e={name:R.name?.trim()||"",certificateNo:R.certificateNo?.trim()||"",properties:R.properties,accountNumber:R.accountNumber?.trim()||"",contactNumber:R.contactNumber?.trim()||"",ifsendsms:R.ifsendsms||"1",bankNo:R.bankNo?.value||R.bankNo||"",bankNoName:R.bankNoName||"",subBankNo:R.subBankNo?.value||R.subBankNo||"",subBankNoName:R.subBankNoName||"",sid:R.sid||"",xid:R.xid||"",nid:R.nid||"",bankAddressS:R.bankAddressS||"",bankAddressX:R.bankAddressX||"",bankAddressN:R.bankAddressN||"",pktype:R.pktype?.value||R.pktype||"",PKTYPEName:R.PKTYPEName||"",reason:R.reason?.value||R.reason||"",reasonName:R.reasonName||"",remark:R.remark||"",contactNumber:R.contactNumber||"",career:R.career||"",operateflag:V.value?"2":"1",operation:"system",registNo:T.query.registNo||"",certificateVaildStartTime:R.certificateVaildStartTime||"",certificateVaildEndTime:R.certificateVaildEndTime||"",certificateVaildFlag:R.certificateVaildFlag||"0",id:V.value?R.id:"",accounId:V.value?R.accountId:""},a=await(0,u.Jk)(e);if(200!==a.data.code)throw new Error(a.data.message||"保存失败");{(0,r.CF)(V.value?"修改成功":"添加成功");const e={...R,id:a.data.data?.id||R.id,accountId:a.data.data?.accounId||R.accountId,properties:R.properties,bankNo:R.bankNo,subBankNo:R.subBankNo,pktype:R.pktype,reason:R.reason};V.value&&W.value>=0?P.value[W.value]=e:P.value.push(e),Q(),X()}}catch(e){console.error("保存接赔人失败:",e);const a=e.response?.data?.message||e.message||"保存失败，请重试";(0,r.CF)(a)}else(0,r.CF)("请输入银行账号");else(0,r.CF)("请输入接赔人姓名")};(0,o.YP)((()=>T.query.registNo),(e=>{e&&re()}));const X=()=>{U.value=!1,J(),V.value=!1,W.value=-1},J=()=>{Object.keys(R).forEach((e=>{"properties"===e?R[e]="2":"ifsendsms"===e?R[e]="1":"pktype"===e||"reason"===e?(R[e]="","pktype"===e?R.PKTYPEName="":"reason"===e&&(R.reasonName="")):"bankNo"===e||"subBankNo"===e?(R[e]="",R[`${e}Name`]=""):(R[e],R[e]="")})),R.id="",R.accountId=""},Q=()=>{const e={payeeList:[...P.value],currentPayee:P.value.length>0?P.value[0]:{}};D("form-data-change",e),D("update",{key:"payeeList",value:P.value}),V.value||D("add-payee",e)},G=e=>{"xid"!==e||R.sid?"nid"!==e||R.sid&&R.xid?"subBankNo"!==e||R.sid&&R.xid&&R.nid?(L.value=e,q.value=!0,"xid"===e&&R.sid?le(R.sid):"nid"===e&&R.xid?se(R.xid):"subBankNo"===e&&R.nid&&ie()):(0,r.CF)("请先选择完整的省市区"):(0,r.CF)("请先选择省市"):(0,r.CF)("请先选择省")},$=({selectedOptions:e})=>{if(e?.length>0){const a=e[0],t=L.value;R[t]=a.value;const o={sid:"bankAddressS",xid:"bankAddressX",nid:"bankAddressN",bankNo:"bankNoName",subBankNo:"subBankNoName",pktype:"PKTYPEName",reason:"reasonName"},l=o[t];l?R[l]=a.text:R[`${t}Name`]=a.text,"sid"===t?(R.xid="",R.bankAddressX="",R.nid="",R.bankAddressN="",R.subBankNo="",R.subBankNoName="",le(a.value)):"xid"===t?(R.nid="",R.bankAddressN="",R.subBankNo="",R.subBankNoName="",se(a.value)):"nid"===t?(R.subBankNo="",R.subBankNoName="",R.areaCode=a.areaCode,ie()):"bankNo"===t&&R.nid&&ie()}q.value=!1},ee=e=>{try{const a=e.detail,t=a.data?.data||a.data||a;t&&(R.name=t.name||t.姓名||"",R.certificateNo=t.idNumber||t.证件号码||"")}finally{window.androidOCR=!1}},ae=e=>{try{const a=e.detail,t=a.data?.data||a.data||a;if(t){let e=t.card_number||t.银行卡号||"";e=e.replace(/\s+/g,""),R.accountNumber=e;const a=t.issuer||t.银行名称||t.bankName||"";if(a){const e=O.bankNo.find((e=>e.text.includes(a)||a.includes(e.text)));e?(R.bankNo=e.value,R.bankNoName=e.text):(R.bankNoName=a,R.bankNo="",(0,r.CF)("未找到匹配的开户行，请手动选择"))}}}finally{window.androidOCR=!1}},te=async()=>{try{const{data:e}=await(0,u.cM)();200===e.code&&(O.bankNo=e.data.map((e=>({value:e.areaCode,text:e.bankName}))))}catch(e){console.error("获取银行数据失败:",e)}},oe=async()=>{try{const{data:e}=await(0,d.ol)();200===e.code&&(O.sid=e.data.map((e=>({value:e.code,text:e.name}))))}catch(e){console.error("获取省份数据失败:",e)}},le=async e=>{if(e)try{const a={areaProvinceCode:e},{data:t}=await(0,d.Ym)(a);if(200===t.code){if(O.xid=t.data.map((e=>({value:e.code,text:e.name}))),R.xid&&O.xid.length>0){const e=O.xid.find((e=>e.value===R.xid));e||(R.xid="",R.bankAddressX="")}}else O.xid=[]}catch(a){console.error("获取城市数据失败:",a),O.xid=[]}else O.xid=[]},se=async e=>{if(e&&R.sid)try{const a={areaProvinceCode:R.sid,areaCityName:e},{data:t}=await(0,d.WE)(a);if(200===t.code){if(O.nid=t.data.map((e=>({value:e.code,text:e.name,areaCode:e.areaCode}))),R.nid&&O.nid.length>0){const e=O.nid.find((e=>e.value===R.nid));e||(R.nid="",R.bankAddressN="",R.areaCode="")}}else O.nid=[]}catch(a){console.error("获取区县数据失败:",a),O.nid=[]}else O.nid=[]},ie=async()=>{if(R.bankNo&&R.nid)try{const e={bankNo:R.bankNo,areaCode:R.areaCode},{data:a}=await(0,u.s5)(e);if(200===a.code){if(O.subBankNo=a.data.map((e=>({value:e.bankNo,text:e.bankName}))),R.subBankNo&&O.subBankNo.length>0){const e=O.subBankNo.find((e=>e.value===R.subBankNo));e||(R.subBankNo="",R.subBankNoName="")}}else O.subBankNo=[]}catch(e){console.error("获取支行数据失败:",e),O.subBankNo=[]}else O.subBankNo=[]},ne=(e,a)=>{if(!e)return"";const t=O[a]||[],o=t.find((a=>a.value===e));return o?o.text:e},re=async()=>{try{const a=T.query.registNo;if(!a)return void console.log("未找到案件号，跳过加载接赔人数据");const t=await(0,u.JY)({registNo:a});if(200===t.data.code&&t.data.data){const a=t.data.data.accountInfoList||[];if(a.length>0){await Promise.all([de(),te(),oe()]),P.value=a.map((e=>{const a=(e,a)=>{if(!e)return"";const t=O[a]||[],o=t.find((a=>a.value===e));return o?o.text:e};return{id:e.id||e.paymentId||Date.now().toString(),name:e.name||e.payee||"",certificateNo:e.certificateNo||e.idno||"",properties:e.properties||"2",accountId:e.accounId||e.id||"",accountNumber:e.accountNumber||e.remitaccount||"",bankNo:e.bankNo||e.bank||"",contactNumber:e.contactNumber||"",ifsendsms:e.ifsendsms||"1",bankNoName:e.bankNoName||a(e.bankNo,"bankNo")||"",bankAddressS:e.bankAddressS||e.province||"",bankAddressX:e.bankAddressX||e.city||"",bankAddressN:e.bankAddressN||e.county||"",sid:e.sid||"",xid:e.xid||"",nid:e.nid||"",subBankNo:e.subBankNo||e.subbranch||"",subBankNoName:e.subBankNoName||e.subBankName||"",pktype:e.pktype||e.payeeType||"",PKTYPEName:e.PKTYPEName||a(e.pktype,"pktype")||"",reason:e.reason||e.exceptionReason||"",reasonName:e.reasonName||a(e.reason,"reason")||"",remark:e.remark||e.description||"",career:e.career||e.profession||"",certificateVaildStartTime:e.certificateVaildStartTime||"",certificateVaildEndTime:e.certificateVaildEndTime||"",certificateVaildFlag:e.certificateVaildFlag||"0",certificateType:e.certificateType||"",operateflag:e.operateflag||"",operation:e.operation||"",taskId:e.taskId||T.query.taskId||"",payeeType:e.payeeType||"",accounId:e.accounId||e.id||""}}));for(let a=0;a<P.value.length;a++){const t=P.value[a];if(console.log("payee",t),t.sid)try{O.sid&&0!==O.sid.length||await oe(),console.log("sid=",O.sid);const e=O.sid.find((e=>e.value===t.sid));if(e)t.bankAddressS=e.text;else{const e=O.sid.find((e=>e.text===t.bankAddressS));e&&(t.sid=e.value)}}catch(e){console.error("获取省份信息失败:",e)}if(t.xid&&!t.bankAddressX)try{!t.sid||O.xid&&0!==O.xid.length||await le(t.sid);const e=O.xid.find((e=>e.value===t.xid));e&&(t.bankAddressX=e.text)}catch(e){console.error("获取城市信息失败:",e)}else if(t.bankAddressX&&!t.xid)try{!t.sid||O.xid&&0!==O.xid.length||await le(t.sid);const e=O.xid.find((e=>e.text===t.bankAddressX));e&&(t.xid=e.value)}catch(e){console.error("获取城市码值失败:",e)}if(t.sid)try{await le(t.sid)}catch(e){console.error("初始化城市数据失败:",e)}if(t.sid&&t.xid&&t.nid)try{const e={areaProvinceCode:t.sid,areaCityName:t.xid},{data:a}=await(0,d.WE)(e);if(200===a.code){O.nid=a.data;const e=a.data.find((e=>e.code===t.nid));e&&(t.bankAddressN=e.name)}}catch(e){console.error("初始化区县数据失败:",e)}if(t.bankNo&&t.bankAddressS&&t.bankAddressX&&t.bankAddressN&&t.subBankNo)try{const e={bankNo:t.bankNo,areaCode:t.areaCode},{data:a}=await(0,u.s5)(e);if(200===a.code){const e=a.data.find((e=>e.bankNo===t.subBankNo));e&&(t.subBankNoName=e.bankName)}}catch(e){console.error("初始化支行数据失败:",e)}}for(let a=0;a<P.value.length;a++){const t=P.value[a];if(t.pktype)try{O.pktype&&0!==O.pktype.length||await de();const e=O.pktype.find((e=>e.value===t.pktype));e&&(t.PKTYPEName=e.text)}catch(e){console.error("获取接赔人类型信息失败:",e)}if(t.reason)try{O.reason&&0!==O.reason.length||await de();const e=O.reason.find((e=>e.value===t.reason));e&&(t.reasonName=e.text)}catch(e){console.error("获取异常修改原因信息失败:",e)}}Q()}else console.log("未找到接赔人数据"),P.value=[]}else P.value=[]}catch(e){console.error("加载接赔人数据失败:",e),P.value=[]}},de=async()=>{try{const e=await(0,c.getCodeOptions)("PKTYPE");O.pktype=e||[];const a=await(0,c.getCodeOptions)("accountReason");O.reason=a||[]}catch(e){console.error("获取接赔人类型失败:",e)}},ue=e=>{if(console.log("🔍 onCardRead 被触发",e),e.stopPropagation(),e.preventDefault(),window.cameraEventProcessing)return void console.log("⚠️ 相机事件正在处理中，跳过");window.cameraEventProcessing=!0,window.androidOCR=!0;const a=new CustomEvent("taskitemCamera",{detail:{cameraType:"ocrId"}});console.log("📤 派发 taskitemCamera 事件:",a.detail),window.dispatchEvent(a),setTimeout((()=>{window.cameraEventProcessing=!1}),300)},ce=e=>{if(console.log("🔍 onCardReadB 被触发",e),e.stopPropagation(),e.preventDefault(),window.cameraEventProcessing)return void console.log("⚠️ 相机事件正在处理中，跳过");window.cameraEventProcessing=!0,window.androidOCR=!0;const a=new CustomEvent("taskitemCamera",{detail:{cameraType:"ocrBank"}});console.log("📤 派发 taskitemCamera 事件:",a.detail),window.dispatchEvent(a),setTimeout((()=>{window.cameraEventProcessing=!1}),300)},me=()=>({payeeList:P.value.map((e=>{const{accountId:a,...t}=e;return void 0!==e.accountId&&(t.accountId=e.accountId),t})),currentPayee:P.value.length>0?(()=>{const e=P.value[0],{accountId:a,...t}=e;return void 0!==e.accountId&&(t.accountId=e.accountId),t})():{}}),ve=e=>{e&&e.payeeList&&(P.value=[...e.payeeList]),e&&Object.keys(e).length>0&&(0,o.Y3)((async()=>{e.sid&&await le(e.sid),e.xid&&e.sid&&await se(e.xid),e.nid&&e.bankNo&&await ie()}))},pe=async()=>{try{await Promise.all([te(),oe(),de()]),await re(),Y()}catch(e){console.error("初始化数据失败:",e),(0,r.CF)("数据加载失败，请重试")}};return(0,o.YP)((()=>_.payeeData),(e=>{e&&Y()}),{deep:!0,immediate:!0}),(0,o.bv)((()=>{pe(),window.addEventListener("ocr-id-result",ee),window.addEventListener("ocr-bank-result",ae)})),(0,o.Ah)((()=>{window.removeEventListener("ocr-id-result",ee),window.removeEventListener("ocr-bank-result",ae)})),a({getFormData:me,updateFormData:ve,getPayeeList:()=>P.value,reloadPayeeData:re}),(a,t)=>{const s=(0,o.up)("van-icon"),r=(0,o.up)("van-field"),d=(0,o.up)("van-radio"),u=(0,o.up)("van-radio-group"),c=(0,o.up)("van-cell-group"),m=(0,o.up)("van-form"),N=(0,o.up)("van-button"),T=(0,o.up)("van-popup"),_=(0,o.up)("van-picker");return(0,o.wg)(),(0,o.iD)("div",v,[(0,o.Wm)(n.Z),(0,o._)("div",p,[(0,o.Wm)(i.Z,{"title-name":"接赔人信息",imgurl:I.value},null,8,["imgurl"])]),(0,o._)("div",{class:"add-payee-btn",onClick:t[0]||(t[0]=a=>e.isReadOnly?null:K())},[(0,o.Wm)(s,{name:"add-o",class:"add-icon",size:"18"}),t[23]||(t[23]=(0,o._)("span",null,"添加接赔人信息",-1))]),P.value.length>0?((0,o.wg)(),(0,o.iD)("div",y,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(P.value,((e,a)=>((0,o.wg)(),(0,o.iD)("div",{class:"payee-item",key:e.id||a},[(0,o._)("div",f,[(0,o._)("div",g,[(0,o._)("span",C,(0,l.zw)(e.name||e.carowner),1),(0,o._)("span",A,(0,l.zw)(e.accountNumber),1)]),(0,o._)("div",w,(0,l.zw)(e.bankNo?.text||e.bankNoName),1),(0,o._)("div",h,[(0,o.Wm)(s,{name:"edit",class:"edit-icon",onClick:e=>z(a)},null,8,["onClick"])])])])))),128))])):(0,o.kq)("",!0),(0,o.Wm)(T,{show:U.value,"onUpdate:show":t[20]||(t[20]=e=>U.value=e),position:"bottom",round:"",class:"payee-form-popup"},{default:(0,o.w5)((()=>[(0,o._)("div",k,[(0,o._)("span",null,(0,l.zw)(V.value?"编辑接赔人":"添加接赔人"),1),(0,o.Wm)(s,{name:"cross",onClick:X})]),(0,o._)("div",b,[(0,o.Wm)(m,{ref_key:"payeeForm",ref:F,onSubmit:M},{default:(0,o.w5)((()=>[(0,o.Wm)(c,null,{default:(0,o.w5)((()=>[(0,o.Wm)(r,{modelValue:R.name,"onUpdate:modelValue":t[1]||(t[1]=e=>R.name=e),label:"姓名",placeholder:"请输入接赔人姓名",rules:H},null,8,["modelValue"]),(0,o.Wm)(r,{modelValue:R.certificateNo,"onUpdate:modelValue":t[2]||(t[2]=e=>R.certificateNo=e),label:"证件号",placeholder:"请输入证件号码",rules:S},{"right-icon":(0,o.w5)((()=>[(0,o._)("div",{class:"ocr-box",onClick:ue},[(0,o.Wm)(s,{name:B.value},null,8,["name"]),t[24]||(t[24]=(0,o._)("span",null,"识别",-1))])])),_:1},8,["modelValue"]),(0,o.Wm)(r,{modelValue:R.contactNumber,"onUpdate:modelValue":t[3]||(t[3]=e=>R.contactNumber=e),label:"手机号",placeholder:"请输入手机号",rules:E},null,8,["modelValue"]),(0,o.Wm)(r,{name:"ifsendsms",label:"是否发送短信",rules:[{required:!0,message:"请选择是否发送短信"}]},{input:(0,o.w5)((()=>[(0,o.Wm)(u,{modelValue:R.ifsendsms,"onUpdate:modelValue":t[4]||(t[4]=e=>R.ifsendsms=e),direction:"horizontal"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{name:"0"},{default:(0,o.w5)((()=>[...t[25]||(t[25]=[(0,o.Uk)("否",-1)])])),_:1}),(0,o.Wm)(d,{name:"1"},{default:(0,o.w5)((()=>[...t[26]||(t[26]=[(0,o.Uk)("是",-1)])])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(r,{name:"radio",label:"类型",rules:[{required:!0,message:"请选择类型"}]},{input:(0,o.w5)((()=>[(0,o.Wm)(u,{modelValue:R.properties,"onUpdate:modelValue":t[5]||(t[5]=e=>R.properties=e),direction:"horizontal"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{name:"1"},{default:(0,o.w5)((()=>[...t[27]||(t[27]=[(0,o.Uk)("对公",-1)])])),_:1}),(0,o.Wm)(d,{name:"2"},{default:(0,o.w5)((()=>[...t[28]||(t[28]=[(0,o.Uk)("对私",-1)])])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(r,{modelValue:R.accountNumber,"onUpdate:modelValue":t[6]||(t[6]=e=>R.accountNumber=e),label:"银行账号",placeholder:"请输入银行账号",rules:j},{"right-icon":(0,o.w5)((()=>[(0,o._)("div",{class:"ocr-box",onClick:ce},[(0,o.Wm)(s,{name:B.value},null,8,["name"]),t[29]||(t[29]=(0,o._)("span",null,"识别",-1))])])),_:1},8,["modelValue"]),(0,o.Wm)(r,{modelValue:R.bankNoName,"onUpdate:modelValue":t[7]||(t[7]=e=>R.bankNoName=e),"is-link":"",readonly:"",label:"开户银行",placeholder:"请选择开户银行",rules:[{required:!0,message:"请选择开户银行"}],onClick:t[8]||(t[8]=e=>G("bankNo"))},null,8,["modelValue"]),(0,o.Wm)(r,{modelValue:R.bankAddressS,"onUpdate:modelValue":t[9]||(t[9]=e=>R.bankAddressS=e),"is-link":"",readonly:"",label:"省",placeholder:"请选择省",rules:[{required:!0,message:"请选择省"}],onClick:t[10]||(t[10]=e=>G("sid"))},null,8,["modelValue"]),(0,o.Wm)(r,{modelValue:R.bankAddressX,"onUpdate:modelValue":t[11]||(t[11]=e=>R.bankAddressX=e),"is-link":"",readonly:"",label:"市",placeholder:"请选择市",rules:[{required:!0,message:"请选择市"}],onClick:t[12]||(t[12]=e=>G("xid"))},null,8,["modelValue"]),(0,o.Wm)(r,{modelValue:R.bankAddressN,"onUpdate:modelValue":t[13]||(t[13]=e=>R.bankAddressN=e),"is-link":"",readonly:"",label:"区",placeholder:"请选择区",rules:[{required:!0,message:"请选择区"}],onClick:t[14]||(t[14]=e=>G("nid"))},null,8,["modelValue"]),(0,o.Wm)(r,{modelValue:R.subBankNoName,"onUpdate:modelValue":t[15]||(t[15]=e=>R.subBankNoName=e),"is-link":"",readonly:"",label:"支行信息",placeholder:"请选择支行信息",rules:[{required:!0,message:"请选择支行信息"}],onClick:t[16]||(t[16]=e=>G("subBankNo"))},null,8,["modelValue"]),(0,o.Wm)(r,{modelValue:R.PKTYPEName,"onUpdate:modelValue":t[17]||(t[17]=e=>R.PKTYPEName=e),"is-link":"",readonly:"",label:"支付对象",placeholder:"请选择支付对象",rules:[{required:!0,message:"请选择支付对象"}],onClick:t[18]||(t[18]=e=>G("pktype"))},null,8,["modelValue"]),(0,o.Wm)(r,{modelValue:R.remark,"onUpdate:modelValue":t[19]||(t[19]=e=>R.remark=e),class:"textarea-field",rows:"2",autosize:"",type:"textarea","label-align":"top",label:"赔款摘要",placeholder:"请输入赔款摘要"},null,8,["modelValue"])])),_:1})])),_:1},512)]),(0,o._)("div",x,[(0,o.Wm)(N,{class:"footer_gray_btn",onClick:X},{default:(0,o.w5)((()=>[...t[30]||(t[30]=[(0,o.Uk)("取消",-1)])])),_:1}),(0,o.Wm)(N,{class:"footer_red_btn",onClick:Z},{default:(0,o.w5)((()=>[...t[31]||(t[31]=[(0,o.Uk)("确定",-1)])])),_:1})])])),_:1},8,["show"]),(0,o.Wm)(T,{show:q.value,"onUpdate:show":t[22]||(t[22]=e=>q.value=e),"destroy-on-close":"",position:"bottom"},{default:(0,o.w5)((()=>[(0,o.Wm)(_,{columns:O[L.value],onConfirm:$,onCancel:t[21]||(t[21]=e=>q.value=!1)},null,8,["columns"])])),_:1},8,["show"])])}}},T=t(3744);const _=(0,T.Z)(N,[["__scopeId","data-v-0c2dfe1e"]]);var D=_},7802:function(e,a,t){t.d(a,{Z:function(){return la}});t(7658),t(2490),t(9924),t(3847),t(6229),t(7330),t(2062);var o=t(6252),l=t(2262),s=t(4052),i=(t(8862),t(3577));const n={class:"damage-assessment"},r={class:"custom-tabs"},d=["onClick"],u={class:"tab-content"},c={key:0,class:"damage-items"},m={key:0,class:"empty-data"},v={class:"property-content"},p={class:"property-name"},y={class:"property-details"},f={class:"detail-item"},g={class:"detail-item"},C={class:"detail-item"},A={key:1,class:"damage-items"},w={key:0,class:"empty-data"},h={class:"property-content"},k={class:"property-name"},b={key:2,class:"damage-items"},x={key:0,class:"empty-data"},N={class:"property-content"},T={class:"property-name"},_={class:"property-details"},D={class:"detail-item"},F={class:"detail-item"};var I={__name:"surveyList",emits:["tab-change"],setup(e,{expose:a,emit:t}){const s=t,I=(0,l.iH)(0),B=(0,l.iH)(["换件","维修","辅料"]),P=(0,l.iH)([]),U=(0,l.iH)([]),V=(0,l.iH)([]),W=e=>{e&&"object"===typeof e&&(P.value=[],U.value=[],V.value=[],(0,o.Y3)((()=>{P.value=e.replacementList&&Array.isArray(e.replacementList)?JSON.parse(JSON.stringify(e.replacementList)):[],U.value=e.repairList&&Array.isArray(e.repairList)?JSON.parse(JSON.stringify(e.repairList)):[],V.value=e.accessoriesList&&Array.isArray(e.accessoriesList)?JSON.parse(JSON.stringify(e.accessoriesList)):[]})))},R=e=>e||0===e?parseFloat(e).toFixed(2):"0.00",H=e=>{I.value=e,s("tab-change",e)};return a({setFormData:W}),(e,a)=>((0,o.wg)(),(0,o.iD)("div",n,[(0,o._)("div",r,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(B.value,((e,a)=>((0,o.wg)(),(0,o.iD)("div",{key:a,class:(0,i.C_)(["custom-tab",{active:I.value===a}]),onClick:e=>H(a)},(0,i.zw)(e),11,d)))),128)),(0,o._)("div",{class:"tab-line",style:(0,i.j5)({left:`calc(${100/B.value.length*I.value}% + (${100/B.value.length}% - 1rem) / 2)`,width:"1rem"})},null,4)]),(0,o._)("div",u,[0===I.value?((0,o.wg)(),(0,o.iD)("div",c,[0===P.value.length?((0,o.wg)(),(0,o.iD)("div",m," 暂无换件数据 ")):(0,o.kq)("",!0),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(P.value,((e,a)=>((0,o.wg)(),(0,o.iD)("div",{key:`replacement-${a}-${e.originalName||e.originalId||a}`,class:"property-item"},[(0,o._)("div",v,[(0,o._)("span",p,(0,i.zw)(e.originalName)+" - "+(0,i.zw)(R(e.sumFitItem))+"元",1)]),(0,o._)("div",y,[(0,o._)("div",f,"险别: "+(0,i.zw)(e.kindCode||"-"),1),(0,o._)("div",g,"单价: "+(0,i.zw)(R(e.lossFee))+"元",1),(0,o._)("div",C,"数量: "+(0,i.zw)(e.lossCount||0),1)])])))),128))])):(0,o.kq)("",!0),1===I.value?((0,o.wg)(),(0,o.iD)("div",A,[0===U.value.length?((0,o.wg)(),(0,o.iD)("div",w," 暂无维修数据 ")):(0,o.kq)("",!0),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(U.value,((e,a)=>((0,o.wg)(),(0,o.iD)("div",{key:`repair-${a}-${e.repairTypeName||e.repairId||a}`,class:"property-item"},[(0,o._)("div",h,[(0,o._)("span",k,(0,i.zw)(e.repairTypeName)+" - "+(0,i.zw)(R(e.repairFee))+"元",1)])])))),128))])):(0,o.kq)("",!0),2===I.value?((0,o.wg)(),(0,o.iD)("div",b,[0===V.value.length?((0,o.wg)(),(0,o.iD)("div",x," 暂无辅料数据 ")):(0,o.kq)("",!0),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(V.value,((e,a)=>((0,o.wg)(),(0,o.iD)("div",{key:`accessory-${a}-${e.assistName||e.assistId||a}`,class:"property-item"},[(0,o._)("div",N,[(0,o._)("span",T,(0,i.zw)(e.assistName)+" - "+(0,i.zw)(R(e.sumFitItem))+"元",1)]),(0,o._)("div",_,[(0,o._)("div",D,"单价: "+(0,i.zw)(R(e.lossFee))+"元",1),(0,o._)("div",F,"数量: "+(0,i.zw)(e.assistCount||0),1)])])))),128))])):(0,o.kq)("",!0)])]))}},B=t(3744);const P=(0,B.Z)(I,[["__scopeId","data-v-0023aa65"]]);var U=P,V=t(2487),W=t(7350),R=t(309),H=t(1308),E=(t(9849),t(9461),t(1874),t(9659)),S=t(1831);const j={class:"itemblock"};var q={__name:"surveyInfo",props:{surveyBaseinfo:{type:Object,default:()=>({registNo:"",indemnityDutyRate:"",indemnityDuty:"",manageType:"",certificateType:"",policeDepartmentName:"",policeName:"",isAccidentProve:"",isCertificateAccord:"",caseExcessType:"",wechatClaim:"",isFindThirdFlag:"",notifyDate:"",lossType:"",messageIsOk:"",isAccidentProve:"",licenseType:"",drivingVehicleTyp:"",driverValidDate:"",driverName:"",identifyNo:"",repairScore:"",certificationDate:"",carKindCode:"",carCategory:""})},roleflag:{type:String,default:""}},emits:["update:surveyBaseinfo"],setup(e,{expose:a,emit:t}){const s=e,n=(0,l.iH)(new Date(1990,0,1)),r=(0,l.iH)(new Date(2099,11,31)),d=(0,l.iH)(""),u=t,c=((0,l.iH)(0),(0,l.iH)([])),m=(0,l.iH)([]),v=(0,l.iH)([]),p=(0,l.iH)([]),y=((0,l.iH)([]),(0,l.iH)([]),(0,l.iH)(!1)),f=(0,l.iH)(!1),g=(0,l.iH)(!1),C=(0,l.iH)(!1),A=(0,l.iH)([]),w=(0,l.iH)([]),h=(0,l.iH)(!1),k=(0,l.iH)(!1),b=(0,l.iH)([{text:"无",value:""},{text:"玻璃单独破碎",value:"03"},{text:"盗抢",value:"04"},{text:"自燃",value:"07"}]),x={0:"100%",1:"70%",2:"50%",3:"30%",4:"0%"},N=(0,l.iH)([]),T=(0,l.iH)([]),_=(0,l.iH)([]),D=(0,l.iH)(!1),F=(0,l.iH)(!1),I=(0,l.iH)(!1),B=(0,l.iH)(!1),P=(0,l.iH)(!1),U=(0,l.iH)(!1),V=((0,l.iH)(!1),(0,l.iH)(!1),(0,o.Fl)((()=>{let e="";if("target"===s.roleflag){const a=w.value.find((e=>e.value===s.surveyBaseinfo.carKindCode));e=a?a.text:s.surveyBaseinfo.carKindCode||""}else e=O("carKindCode",w.value);return{indemnityDutyRate:O("indemnityDutyRate",m.value),lossType:O("lossType",b.value),indemnityDuty:O("indemnityDuty",N.value),manageType:O("manageType",T.value),certificateType:Y(),licenseType:O("licenseType",v.value),drivingVehicleTyp:O("drivingVehicleTyp",p.value),carCategory:O("carCategory",A.value),carKindCode:e}}))),W=(0,o.Fl)((()=>{const e=s.surveyBaseinfo.manageType;return"3"===e||"4"===e||"9"===e})),R=()=>({manageType:s.surveyBaseinfo.manageType||"",indemnityDuty:s.surveyBaseinfo.indemnityDuty||"",indemnityDutyRate:s.surveyBaseinfo.indemnityDutyRate||"",caseExcessType:s.surveyBaseinfo.caseExcessType||"",certificateType:s.surveyBaseinfo.certificateType||"",policeDepartmentName:s.surveyBaseinfo.policeDepartmentName||"",policeName:s.surveyBaseinfo.policeName||"",isCertificateAccord:s.surveyBaseinfo.isCertificateAccord||"",drivingVehicleTyp:s.surveyBaseinfo.drivingVehicleTyp||"",licenseType:s.surveyBaseinfo.licenseType||"",repairScore:s.surveyBaseinfo.repairScore||"",drivingVehicleTyp:s.surveyBaseinfo.drivingVehicleTyp||"",isFindThirdFlag:s.surveyBaseinfo.isFindThirdFlag||"",isAccidentProve:s.surveyBaseinfo.isAccidentProve||"",messageIsOk:s.surveyBaseinfo.messageIsOk||"",wechatClaim:s.surveyBaseinfo.wechatClaim||"",lossType:s.surveyBaseinfo.lossType||""}),H=()=>{const e=[{field:"manageType",name:"事故处理类型"},{field:"indemnityDuty",name:"责任类型"},{field:"indemnityDutyRate",name:"责任比例"},{field:"certificateType",name:"责任认定书类型"},{field:"driverName",name:"出险驾驶员姓名"},{field:"identifyNo",name:"驾驶证号码"},{field:"licenseType",name:"号牌种类"},{field:"drivingVehicleTyp",name:"准驾车型"},{field:"carCategory",name:"车辆大类"},{field:"carKindCode",name:"车辆子类"},{field:"driverValidDate",name:"驾驶证有效期限"},{field:"certificationDate",name:"行驶证发证日期"},{field:"repairScore",name:"修理厂评分"},{field:"isCertificateAccord",name:"录入事故责任比例与认定书中记载是否一致"},{field:"caseExcessType",name:"是否互碰自赔"},{field:"isFindThirdFlag",name:"是否无法找到第三方"},{field:"messageIsOk",name:"是否信息完整提供"}];for(const{field:o,name:l}of e){const e=s.surveyBaseinfo[o];if(!e&&0!==e&&"0"!==e)return(0,S.CF)(`${l}为必填项`),!1}const a=s.surveyBaseinfo.manageType;if(("3"===a||"4"===a||"9"===a)&&!s.surveyBaseinfo.isAccidentProve&&"0"!==s.surveyBaseinfo.isAccidentProve)return(0,S.CF)("是否已出具事故责任认定证明为必填项"),!1;const t=s.surveyBaseinfo.repairScore;if(t){const e=Number(t);if(isNaN(e)||e<1||e>10||!Number.isInteger(e))return(0,S.CF)("修理厂评分必须是1-10的正整数"),!1}return!0},q=(e,a)=>{u("update:surveyBaseinfo",{...s.surveyBaseinfo,[e]:a})},L=(0,o.Fl)((()=>{const e={driverValidDate:"选择有效期限",certificationDate:"选择发证日期"};return e[d.value]||"选择日期"})),O=(e,a)=>{if(!a||0===a.length)return"";if("indemnityDutyRate"===e)return s.surveyBaseinfo.indemnityDutyRate?.toString()||"";{const t=a.find((a=>a.value===s.surveyBaseinfo[e]));return t?t.text:s.surveyBaseinfo[e]||""}},Y=()=>{const e=_.value.find((e=>e.value===s.surveyBaseinfo.certificateType));return e?e.text:s.surveyBaseinfo.certificateType?s.surveyBaseinfo.certificateType:""},Z=({selectedOptions:e})=>{e&&e.length>0&&(s.surveyBaseinfo.indemnityDutyRate=e[0].value),F.value=!1},K=({selectedOptions:e})=>{e&&e.length>0&&(s.surveyBaseinfo.licenseType=e[0].value),I.value=!1},z=({selectedOptions:e})=>{e&&e.length>0&&(s.surveyBaseinfo.drivingVehicleTyp=e[0].value),f.value=!1},M=({selectedOptions:e})=>{if(e&&e.length>0){const a=e[0];if(q("indemnityDuty",a.value),x[a.value]){const e=x[a.value];q("indemnityDutyRate",e)}}D.value=!1},X=()=>{y.value=!1},J=e=>{try{let a;if(console.log("日期确认事件参数:",e),Array.isArray(e))a=e;else if(e&&"object"===typeof e&&e.selectedValues)a=e.selectedValues;else{const e=new Date;a=[e.getFullYear(),e.getMonth()+1,e.getDate()]}if(!Array.isArray(a)||a.length<3){console.warn("无效的日期参数，使用当前日期");const e=new Date;a=[e.getFullYear(),e.getMonth()+1,e.getDate()]}const[t,o,l]=a,s=`${t}-${String(o).padStart(2,"0")}-${String(l).padStart(2,"0")}`;console.log("格式化后的日期:",s),q(d.value,s),y.value=!1}catch(a){console.error("日期确认处理错误:",a),y.value=!1}},Q=async()=>{if("target"===s.roleflag)return;const e="target"===s.roleflag?"userNature":"vehicleCategory";console.log("点击下拉框，当前车辆类型:",s.roleflag,"，使用数据源:",e),await $(),g.value=!0},G=async()=>{if("target"===s.roleflag)return C.value=!0,void(0===w.value.length&&await ee());s.surveyBaseinfo.carCategory?(C.value=!0,0===w.value.length&&s.surveyBaseinfo.carCategory&&await ae(s.surveyBaseinfo.carCategory)):(0,S.CF)("请先选择车辆大类")},$=async()=>{try{const e="target"===s.roleflag?"userNature":"vehicleCategory";console.log("Using codeType:",e);const a=await(0,E.getCodeOptions)(e);A.value=a,h.value=!0,"target"===s.roleflag?await ee():s.surveyBaseinfo.carCategory&&(le(),await ae(s.surveyBaseinfo.carCategory))}catch(e){console.error("获取车辆大类数据失败:",e),A.value=[],h.value=!1}},ee=async()=>{try{console.log("🚗 标的车：直接加载车辆子类数据");const e=await(0,E.getCodeOptions)("carKindCode");w.value=e,k.value=!0,s.surveyBaseinfo.carKindCode&&se()}catch(e){console.error("标的车加载车辆子类数据失败:",e),w.value=[],k.value=!1}},ae=async e=>{try{const a=await(0,E.getCodesByParent)(e);w.value=a,k.value=!0,s.surveyBaseinfo.carKindCode&&se()}catch(a){console.error("获取车辆子类数据失败:",a),w.value=[],k.value=!1}},te=({selectedOptions:e})=>{if(e&&e.length>0){const a=e[0];q("carCategory",a.value),"target"===s.roleflag||(a.value&&ae(a.value),q("carKindCode",""))}g.value=!1},oe=({selectedOptions:e})=>{if(e&&e.length>0){const a=e[0];q("carKindCode",a.value)}C.value=!1},le=()=>{if(!s.surveyBaseinfo.carCategory||!h.value)return;A.value.find((e=>e.value===s.surveyBaseinfo.carCategory))},se=()=>{if(!s.surveyBaseinfo.carKindCode||!k.value)return;w.value.find((e=>e.value===s.surveyBaseinfo.carKindCode))},ie=({selectedOptions:e})=>{if(e&&e.length>0){const a=e[0];q("lossType",a.value)}B.value=!1},ne=e=>{d.value=e,"driverValidDate"===e?(n.value=new Date,r.value=new Date(2099,11,31)):"certificationDate"===e&&(n.value=new Date(1990,0,1),r.value=new Date(2099,11,31));const a=s.surveyBaseinfo[e];if(a)try{const e=a.split("-");if(3===e.length){const[a,t,o]=e.map(Number);c.value=[a,t,o]}else{const e=new Date;c.value=[e.getFullYear(),e.getMonth()+1,e.getDate()]}}catch(t){console.warn("日期解析错误，使用当前日期:",t);const e=new Date;c.value=[e.getFullYear(),e.getMonth()+1,e.getDate()]}else{const e=new Date;c.value=[e.getFullYear(),e.getMonth()+1,e.getDate()]}y.value=!0},re=(e,{selectedOptions:a})=>{if(a&&a.length>0){const t=a[0];q(e,t.value)}const t={manageType:P,certificateType:U};t[e]&&(t[e].value=!1)},de=e=>{if(re("manageType",e),e.selectedOptions&&e.selectedOptions.length>0){const a=e.selectedOptions[0].value;if("1"===a||"2"===a)_.value=ue.value.filter((e=>"9"===e.value)),_.value.length>0?q("certificateType","9"):q("certificateType","");else if("3"===a||"4"===a){_.value=ue.value.filter((e=>"0"===e.value||"1"===e.value));const e=_.value.some((e=>e.value===s.surveyBaseinfo.certificateType));e||q("certificateType",""),s.surveyBaseinfo.isAccidentProve||q("isAccidentProve","1")}else if("9"===a)_.value=ue.value.filter((e=>"2"===e.value)),_.value.length>0?q("certificateType","2"):q("certificateType",""),s.surveyBaseinfo.isAccidentProve||q("isAccidentProve","1");else{_.value=[...ue.value];const e=ue.value.some((e=>e.value===s.surveyBaseinfo.certificateType));e||q("certificateType","")}}},ue=(0,l.iH)([]),ce=async()=>{try{const e=await(0,E.getCodeOptions)("liabilityCertType");ue.value=e,_.value=e}catch(e){console.error("加载责任认定书类型原始数据失败:",e),_.value=[],ue.value=[]}},me=e=>re("certificateType",e),ve=async()=>{try{const e=[{type:"liabilityType",ref:N,name:"责任类型"},{type:"liabilityRatio",ref:m,name:"责任比例"},{type:"accidentHandleNation",ref:T,name:"事故处理类型"},{type:"liabilityCertType",ref:_,name:"责任认定书类型"},{type:"plateType",ref:v,name:"号牌种类"},{type:"driverLicenseType",ref:p,name:"准驾车型"}],a=e.map((async({type:e,ref:a,name:t})=>{try{const t=await(0,E.getCodeOptions)(e);a.value=t}catch(o){console.error(`加载${t}数据失败:`,o),a.value=[]}}));await Promise.all(a),await $(),"target"===s.roleflag?await ee():s.surveyBaseinfo.carCategory&&await ae(s.surveyBaseinfo.carCategory)}catch(e){console.error("加载下拉框数据失败:",e)}};return(0,o.YP)((()=>s.surveyBaseinfo.carCategory),(async(e,a)=>{"target"!==s.roleflag&&(e&&e!==a?await ae(e):!e&&a&&(w.value=[],q("carKindCode","")))})),(0,o.YP)((()=>s.roleflag),(async(e,a)=>{e!==a&&(h.value=!1,k.value=!1,await $(),"target"===e?await ee():s.surveyBaseinfo.carCategory&&await ae(s.surveyBaseinfo.carCategory))})),(0,o.bv)((()=>{ve(),ce()})),a({getFormData:R,validateForm:H}),(a,t)=>{const l=(0,o.up)("van-field"),s=(0,o.up)("van-picker"),d=(0,o.up)("van-popup"),u=(0,o.up)("van-radio"),h=(0,o.up)("van-radio-group"),k=(0,o.up)("van-date-picker"),x=(0,o.up)("van-cell-group");return(0,o.wg)(),(0,o.iD)("div",j,[(0,o.Wm)(x,null,{default:(0,o.w5)((()=>[(0,o.Wm)(l,{"model-value":V.value.manageType,label:"事故处理类型","is-link":"",readonly:"",name:"picker",placeholder:"请选择",onClick:t[0]||(t[0]=e=>P.value=!0),"label-width":"120",required:"",class:"custom-required-field"},null,8,["model-value"]),(0,o.Wm)(d,{show:P.value,"onUpdate:show":t[2]||(t[2]=e=>P.value=e),"destroy-on-close":"",position:"bottom",round:""},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{columns:T.value,onConfirm:de,onCancel:t[1]||(t[1]=e=>P.value=!1)},null,8,["columns"])])),_:1},8,["show"]),(0,o.Wm)(l,{"model-value":V.value.indemnityDuty,label:"责任类型","is-link":"",readonly:"",required:"",name:"picker",placeholder:"请选择",onClick:t[3]||(t[3]=e=>D.value=!0),"label-width":"120",class:"custom-required-field"},null,8,["model-value"]),(0,o.Wm)(d,{show:D.value,"onUpdate:show":t[5]||(t[5]=e=>D.value=e),"destroy-on-close":"",position:"bottom",round:""},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{columns:N.value,onConfirm:M,onCancel:t[4]||(t[4]=e=>D.value=!1)},null,8,["columns"])])),_:1},8,["show"]),(0,o.Wm)(l,{"model-value":V.value.indemnityDutyRate,label:"责任比例","is-link":"",readonly:"",required:"",name:"picker",placeholder:"请选择","label-width":"120",onClick:t[6]||(t[6]=e=>F.value=!0),class:"custom-required-field"},null,8,["model-value"]),(0,o.Wm)(d,{show:F.value,"onUpdate:show":t[8]||(t[8]=e=>F.value=e),"destroy-on-close":"",position:"bottom",round:""},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{columns:m.value,onConfirm:Z,onCancel:t[7]||(t[7]=e=>F.value=!1)},null,8,["columns"])])),_:1},8,["show"]),(0,o.Wm)(l,{"model-value":V.value.certificateType,label:"责任认定书类型","is-link":"",readonly:"",name:"picker",placeholder:"请选择",onClick:t[9]||(t[9]=e=>U.value=!0),"label-width":"120",required:"",class:"custom-required-field"},null,8,["model-value"]),(0,o.Wm)(d,{show:U.value,"onUpdate:show":t[11]||(t[11]=e=>U.value=e),"destroy-on-close":"",position:"bottom",round:""},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{columns:_.value,onConfirm:me,onCancel:t[10]||(t[10]=e=>U.value=!1)},null,8,["columns"])])),_:1},8,["show"]),(0,o.Wm)(l,{modelValue:e.surveyBaseinfo.driverName,"onUpdate:modelValue":t[12]||(t[12]=a=>e.surveyBaseinfo.driverName=a),label:"出险驾驶员姓名",required:"",class:"custom-required-field",placeholder:"请输入",type:"textarea",rows:"1",autosize:"","label-width":"120"},null,8,["modelValue"]),(0,o.Wm)(l,{modelValue:e.surveyBaseinfo.identifyNo,"onUpdate:modelValue":t[13]||(t[13]=a=>e.surveyBaseinfo.identifyNo=a),label:"驾驶证号码",required:"",class:"custom-required-field",placeholder:"请输入",type:"textarea",rows:"1",autosize:"","label-width":"120"},null,8,["modelValue"]),(0,o.Wm)(l,{"model-value":V.value.licenseType,label:"号牌种类","is-link":"",readonly:"",name:"picker",placeholder:"请选择",onClick:t[14]||(t[14]=e=>I.value=!0),"label-width":"120",required:"",class:"custom-required-field"},null,8,["model-value"]),(0,o.Wm)(d,{show:I.value,"onUpdate:show":t[16]||(t[16]=e=>I.value=e),"destroy-on-close":"",position:"bottom",round:""},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{columns:v.value,onConfirm:K,onCancel:t[15]||(t[15]=e=>I.value=!1)},null,8,["columns"])])),_:1},8,["show"]),(0,o.Wm)(l,{"model-value":V.value.drivingVehicleTyp,label:"准驾车型","is-link":"",readonly:"",name:"picker",placeholder:"请选择",onClick:t[17]||(t[17]=e=>f.value=!0),"label-width":"120",required:"",class:"custom-required-field"},null,8,["model-value"]),(0,o.Wm)(d,{show:f.value,"onUpdate:show":t[19]||(t[19]=e=>f.value=e),"destroy-on-close":"",position:"bottom",round:""},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{columns:p.value,onConfirm:z,onCancel:t[18]||(t[18]=e=>f.value=!1)},null,8,["columns"])])),_:1},8,["show"]),(0,o.Wm)(l,{"model-value":V.value.carCategory,label:"车辆大类","is-link":"target"!==e.roleflag,readonly:"",name:"picker",placeholder:"请选择",onClick:Q,"label-width":"120",required:"",class:"custom-required-field"},null,8,["model-value","is-link"]),(0,o.Wm)(d,{show:g.value,"onUpdate:show":t[21]||(t[21]=e=>g.value=e),"destroy-on-close":"",position:"bottom",round:""},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{columns:A.value,onConfirm:te,onCancel:t[20]||(t[20]=e=>g.value=!1)},null,8,["columns"])])),_:1},8,["show"]),(0,o.Wm)(l,{"model-value":V.value.carKindCode,label:"车辆子类","is-link":"target"!==e.roleflag,readonly:"",name:"picker",placeholder:"请选择",onClick:G,"label-width":"120",required:"",class:"custom-required-field"},null,8,["model-value","is-link"]),(0,o.Wm)(d,{show:C.value,"onUpdate:show":t[23]||(t[23]=e=>C.value=e),"destroy-on-close":"",position:"bottom",round:""},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{columns:w.value,onConfirm:oe,onCancel:t[22]||(t[22]=e=>C.value=!1)},null,8,["columns"])])),_:1},8,["show"]),(0,o.Wm)(l,{label:"驾驶证有效期限",readonly:"",required:"",clickable:"","model-value":e.surveyBaseinfo.driverValidDate,placeholder:"请选择有效期限","right-icon":"notes-o",class:"custom-required-field","label-width":"120",onClick:t[24]||(t[24]=e=>ne("driverValidDate"))},null,8,["model-value"]),(0,o.Wm)(l,{label:"行驶证发证日期",readonly:"",required:"",clickable:"",class:"custom-required-field","label-width":"120","model-value":e.surveyBaseinfo.certificationDate,placeholder:"请选择发证日期","right-icon":"notes-o",onClick:t[25]||(t[25]=e=>ne("certificationDate"))},null,8,["model-value"]),(0,o.Wm)(l,{modelValue:e.surveyBaseinfo.repairScore,"onUpdate:modelValue":t[26]||(t[26]=a=>e.surveyBaseinfo.repairScore=a),label:"修理厂评分",required:"",class:"custom-required-field",placeholder:"请输入1-10的正整数",type:"number",rows:"1","label-width":"120",maxlength:"2"},null,8,["modelValue"]),(0,o.Wm)(l,{name:"radio",label:W.value?"是否已出具事故责任认定证明 *":"是否已出具事故责任认定证明","label-width":"120","input-align":"right"},{input:(0,o.w5)((()=>[(0,o.Wm)(h,{modelValue:e.surveyBaseinfo.isAccidentProve,"onUpdate:modelValue":t[27]||(t[27]=a=>e.surveyBaseinfo.isAccidentProve=a),direction:"horizontal"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{name:"1"},{default:(0,o.w5)((()=>[...t[36]||(t[36]=[(0,o.Uk)("是",-1)])])),_:1}),(0,o.Wm)(u,{name:"0"},{default:(0,o.w5)((()=>[...t[37]||(t[37]=[(0,o.Uk)("否",-1)])])),_:1})])),_:1},8,["modelValue"])])),_:1},8,["label"]),(0,o.Wm)(l,{name:"radio",label:"录入事故责任比例与认定书中记载是否一致","label-width":"120","input-align":"right"},{input:(0,o.w5)((()=>[(0,o.Wm)(h,{modelValue:e.surveyBaseinfo.isCertificateAccord,"onUpdate:modelValue":t[28]||(t[28]=a=>e.surveyBaseinfo.isCertificateAccord=a),direction:"horizontal"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{name:"1"},{default:(0,o.w5)((()=>[...t[38]||(t[38]=[(0,o.Uk)("是",-1)])])),_:1}),(0,o.Wm)(u,{name:"0"},{default:(0,o.w5)((()=>[...t[39]||(t[39]=[(0,o.Uk)("否",-1)])])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(l,{name:"radio",label:"是否互碰自赔","label-width":"140","input-align":"right"},{input:(0,o.w5)((()=>[(0,o.Wm)(h,{modelValue:e.surveyBaseinfo.caseExcessType,"onUpdate:modelValue":t[29]||(t[29]=a=>e.surveyBaseinfo.caseExcessType=a),direction:"horizontal"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{name:"1"},{default:(0,o.w5)((()=>[...t[40]||(t[40]=[(0,o.Uk)("是",-1)])])),_:1}),(0,o.Wm)(u,{name:"0"},{default:(0,o.w5)((()=>[...t[41]||(t[41]=[(0,o.Uk)("否",-1)])])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(l,{name:"radio",label:"是否无法找到第三方","label-width":"140","input-align":"right"},{input:(0,o.w5)((()=>[(0,o.Wm)(h,{modelValue:e.surveyBaseinfo.isFindThirdFlag,"onUpdate:modelValue":t[30]||(t[30]=a=>e.surveyBaseinfo.isFindThirdFlag=a),direction:"horizontal"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{name:"1"},{default:(0,o.w5)((()=>[...t[42]||(t[42]=[(0,o.Uk)("是",-1)])])),_:1}),(0,o.Wm)(u,{name:"0"},{default:(0,o.w5)((()=>[...t[43]||(t[43]=[(0,o.Uk)("否",-1)])])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(l,{name:"radio",label:"是否信息完整提供","label-width":"140","input-align":"right"},{input:(0,o.w5)((()=>[(0,o.Wm)(h,{modelValue:e.surveyBaseinfo.messageIsOk,"onUpdate:modelValue":t[31]||(t[31]=a=>e.surveyBaseinfo.messageIsOk=a),direction:"horizontal"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{name:"1"},{default:(0,o.w5)((()=>[...t[44]||(t[44]=[(0,o.Uk)("是",-1)])])),_:1}),(0,o.Wm)(u,{name:"0"},{default:(0,o.w5)((()=>[...t[45]||(t[45]=[(0,o.Uk)("否",-1)])])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(l,{"model-value":V.value.lossType,label:"损失类型","is-link":"",readonly:"",name:"picker",placeholder:"请选择",onClick:t[32]||(t[32]=e=>B.value=!0),"label-width":"140","input-align":"right"},{input:(0,o.w5)((()=>[(0,o._)("span",null,(0,i.zw)(V.value.lossType||"请选择"),1)])),_:1},8,["model-value"]),(0,o.Wm)(d,{show:B.value,"onUpdate:show":t[34]||(t[34]=e=>B.value=e),"destroy-on-close":"",position:"bottom",round:""},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{columns:b.value,onConfirm:ie,onCancel:t[33]||(t[33]=e=>B.value=!1)},null,8,["columns"])])),_:1},8,["show"]),(0,o.Wm)(d,{show:y.value,"onUpdate:show":t[35]||(t[35]=e=>y.value=e),position:"bottom",round:""},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{"model-value":c.value,title:L.value,"min-date":n.value,"max-date":r.value,onConfirm:J,onCancel:X},null,8,["model-value","title","min-date","max-date"])])),_:1},8,["show"])])),_:1})])}}};const L=(0,B.Z)(q,[["__scopeId","data-v-17261100"]]);var O=L;const Y={class:"survey-info"},Z={class:"form-item"},K={class:"form-content"},z={class:"form-item",style:{"margin-bottom":"0"}},M={class:"form-content"},X={class:"form-item"},J={class:"form-content"},Q={class:"form-item"},G={class:"form-content"};var $={__name:"assessmentInfo",setup(e,{expose:a}){const t=(0,l.iH)([]),s=(0,l.iH)([]),i=(0,l.iH)(!1),n=(0,l.qj)({kindCode:"",kindCodeName:"",lossApprovalMethod:"",lossApprovalMethodName:"",lossParts:[],lossPartsText:"",sumLossAmount:"",sumRescueFee:"",sumLossAmountFormatted:""}),r=(0,l.iH)([]),d=async()=>{try{console.log("开始加载险别选项数据...");const e=await(0,E.getCodeOptions)("coverageCode");s.value=e,i.value=!0,console.log("险别选项加载完成:",e)}catch(e){console.error("加载险别选项失败:",e),s.value=[],i.value=!1}},u=e=>{if(!e)return"-";const a=s.value.find((a=>a.value===e));return a?a.text:e},c=e=>{const a={0:"立即定损",1:"非立即定损"};return a[e]||e||"-"},m=e=>e||0===e?parseFloat(e).toFixed(2):"0.00",v=e=>e&&Array.isArray(e)&&0!==e.length?e.map((e=>e.lossPart||e.originalName||"")).filter(Boolean).join("、"):"-",p=e=>{r.value=e,n.lossParts=e,n.lossPartsText=v(e)},y=e=>{console.log("设置定损信息数据:",e),e.kindCode?(n.kindCode=e.kindCode,n.kindCodeName=u(e.kindCode)):(n.kindCode="",n.kindCodeName="-"),void 0!==e.lossApprovalMethod&&null!==e.lossApprovalMethod?(n.lossApprovalMethod=e.lossApprovalMethod,n.lossApprovalMethodName=c(e.lossApprovalMethod)):(n.lossApprovalMethod="",n.lossApprovalMethodName="-"),e.lossParts&&Array.isArray(e.lossParts)&&e.lossParts.length>0?(r.value=e.lossParts,n.lossParts=e.lossParts,n.lossPartsText=v(e.lossParts)):(r.value=[],n.lossParts=[],n.lossPartsText="-"),void 0!==e.sumLossAmount&&null!==e.sumLossAmount?(n.sumLossAmount=e.sumLossAmount,n.sumLossAmountFormatted=m(e.sumLossAmount)):(n.sumLossAmount="",n.sumLossAmountFormatted="0.00"),void 0!==e.sumRescueFee&&null!==e.sumRescueFee?n.sumRescueFee=e.sumRescueFee:n.sumRescueFee="0.00",console.log("设置后的表单数据:",n)};(0,o.YP)(i,(e=>{e&&(console.log("选项加载完成，重新处理当前数据"),n.kindCode&&(n.kindCodeName=u(n.kindCode)))}));const f=async()=>{try{await d()}catch(e){console.error("初始化数据失败:",e)}},g=()=>({kindCode:n.kindCode,lossApprovalMethod:n.lossApprovalMethod,lossParts:n.lossParts,sumLossAmount:n.sumLossAmount,sumRescueFee:n.sumRescueFee,sumLossAmountFormatted:n.sumLossAmountFormatted,damageParts:t.value}),C=e=>{e&&y(e)};return(0,o.bv)((()=>{f()})),a({setFormData:y,getFormData:g,updateFormData:C,handleLossPartsSubmit:p,lossPartsData:r}),(e,a)=>{const t=(0,o.up)("van-field");return(0,o.wg)(),(0,o.iD)("div",Y,[(0,o._)("div",Z,[a[4]||(a[4]=(0,o._)("div",{class:"form-label"}," 理赔险别 ",-1)),(0,o._)("div",K,[(0,o.Wm)(t,{readonly:"",modelValue:n.kindCodeName,"onUpdate:modelValue":a[0]||(a[0]=e=>n.kindCodeName=e),placeholder:"-"},null,8,["modelValue"])])]),(0,o._)("div",z,[a[5]||(a[5]=(0,o._)("div",{class:"form-label"}," 损失部位 ",-1)),(0,o._)("div",M,[(0,o.Wm)(t,{readonly:"",modelValue:n.lossPartsText,"onUpdate:modelValue":a[1]||(a[1]=e=>n.lossPartsText=e),placeholder:"-"},null,8,["modelValue"])])]),(0,o._)("div",X,[a[7]||(a[7]=(0,o._)("div",{class:"form-label"}," 施救费 ",-1)),(0,o._)("div",J,[(0,o.Wm)(t,{readonly:"",modelValue:n.sumRescueFee,"onUpdate:modelValue":a[2]||(a[2]=e=>n.sumRescueFee=e),placeholder:"-"},null,8,["modelValue"]),a[6]||(a[6]=(0,o._)("span",{class:"amount-unit"},"元",-1))])]),(0,o._)("div",Q,[a[9]||(a[9]=(0,o._)("div",{class:"form-label"}," 定损金额 ",-1)),(0,o._)("div",G,[(0,o.Wm)(t,{readonly:"",modelValue:n.sumLossAmountFormatted,"onUpdate:modelValue":a[3]||(a[3]=e=>n.sumLossAmountFormatted=e),placeholder:"-"},null,8,["modelValue"]),a[8]||(a[8]=(0,o._)("span",{class:"amount-unit"},"元",-1))])])])}}};const ee=(0,B.Z)($,[["__scopeId","data-v-feb96b54"]]);var ae=ee;t(4514);const te={class:"survey-info"},oe={class:"form-item"},le={class:"form-content"},se={class:"form-item"},ie={class:"form-content"},ne={class:"form-item"},re={class:"form-content"},de={class:"form-item"},ue={class:"form-content",style:{"justify-content":"flex-start"}};var ce={__name:"repairInfo",setup(e,{expose:a}){const t=(0,l.qj)({repairFactoryName:"",factoryQualification:"",factoryQualificationName:"",creditCode:"",is4S:"",is4SName:""}),s=e=>{e.repairFactoryName&&(t.repairFactoryName=e.repairFactoryName),e.factoryQualification&&(t.factoryQualification=e.factoryQualification,t.factoryQualificationName=i(e.factoryQualification)),e.creditCode&&(t.creditCode=e.creditCode),void 0!==e.is4S&&null!==e.is4S&&(t.is4S=e.is4S,t.is4SName="1"===e.is4S?"是":"0"===e.is4S?"否":"-")},i=e=>{const a={1:"一类",2:"二类",3:"三类",4:"其他"};return a[e]||e},n=()=>({...t}),r=e=>{e&&Object.keys(e).forEach((a=>{void 0!==t[a]&&(t[a]=e[a])}))};return a({getFormData:n,updateFormData:r,setFormData:s}),(e,a)=>{const l=(0,o.up)("van-field");return(0,o.wg)(),(0,o.iD)("div",te,[(0,o._)("div",oe,[a[4]||(a[4]=(0,o._)("div",{class:"form-label"}," 修理厂名称 ",-1)),(0,o._)("div",le,[(0,o.Wm)(l,{readonly:"",modelValue:t.repairFactoryName,"onUpdate:modelValue":a[0]||(a[0]=e=>t.repairFactoryName=e),placeholder:"-"},null,8,["modelValue"])])]),(0,o._)("div",se,[a[5]||(a[5]=(0,o._)("div",{class:"form-label"}," 修理厂资质 ",-1)),(0,o._)("div",ie,[(0,o.Wm)(l,{readonly:"",modelValue:t.factoryQualificationName,"onUpdate:modelValue":a[1]||(a[1]=e=>t.factoryQualificationName=e),placeholder:"-"},null,8,["modelValue"])])]),(0,o._)("div",ne,[a[6]||(a[6]=(0,o._)("div",{class:"form-label"}," 4S店 ",-1)),(0,o._)("div",re,[(0,o.Wm)(l,{readonly:"",modelValue:t.is4SName,"onUpdate:modelValue":a[2]||(a[2]=e=>t.is4SName=e),placeholder:"-"},null,8,["modelValue"])])]),(0,o._)("div",de,[a[7]||(a[7]=(0,o._)("div",{class:"form-label"}," 统一社会信用代码 ",-1)),(0,o._)("div",ue,[(0,o.Wm)(l,{readonly:"",modelValue:t.creditCode,"onUpdate:modelValue":a[3]||(a[3]=e=>t.creditCode=e),placeholder:"-"},null,8,["modelValue"])])])])}}};const me=(0,B.Z)(ce,[["__scopeId","data-v-26270e44"]]);var ve=me,pe=t(9963);const ye={class:"survey-info"},fe={class:"property-list"},ge={class:"property-content"},Ce={class:"property-name"},Ae={class:"add-survey-popup"},we={class:"popup-header"},he={class:"popup-title"},ke={class:"popup-content"},be={class:"form-item"},xe={class:"form-content"},Ne={class:"form-item"},Te={class:"form-content"},_e={class:"form-item"},De={class:"form-content",style:{"justify-content":"flex-start"}},Fe={class:"popup-footer"};var Ie={__name:"taxInvoice",setup(e,{expose:a}){const t=(0,l.iH)(!1),s=(0,l.iH)(!1),n=(0,l.iH)(!1),r=(0,l.iH)(null),d=(0,l.iH)(!1),u=(0,l.iH)(-1),c=(0,l.iH)([]),m=(0,l.qj)({id:null,invoicingParty:"",invoicePartyName:"",invoiceTaxRate:"",invoiceTaxRateName:"",invoiceAmount:"",invoiceSerialNo:"",operateStatus:"",isInitialData:!1}),v=(0,l.iH)([]),p=(0,l.iH)([]),y=(0,o.Fl)((()=>c.value.filter((e=>"D"!==e.operateStatus)))),f=()=>{C(),d.value=!1,u.value=-1,t.value=!0},g=()=>{t.value=!1,C()};(0,o.YP)(c,(e=>{console.log("taxInvoiceData 发生变化:",e)}),{deep:!0}),(0,o.YP)(y,(e=>{console.log("visibleTaxInvoiceData 发生变化:",e)}));const C=()=>{Object.assign(m,{id:null,invoicingParty:"",invoicePartyName:"",invoiceTaxRate:"",invoiceTaxRateName:"",invoiceSerialNo:"",invoiceAmount:"",operateStatus:"A",isInitialData:!1})},A=e=>{const a=y.value[e],o=c.value.findIndex((e=>e.id&&e.id===a.id||!e.id&&e===a));if(-1!==o){const e=c.value[o];Object.keys(m).forEach((a=>{void 0!==e[a]&&(m[a]=e[a])})),d.value=!0,u.value=o,t.value=!0}},w=e=>{const a=y.value[e],t=c.value.findIndex((e=>e.id&&e.id===a.id||!e.id&&e===a));if(-1!==t){const e=c.value[t];e.isInitialData?(c.value[t].operateStatus="D",(0,S.CF)("删除成功")):(c.value.splice(t,1),(0,S.CF)("删除成功"))}},h=async()=>{try{await r.value.validate();const e={id:d.value?m.id:void 0,invoicingParty:m.invoicingParty,invoicePartyName:m.invoicePartyName,invoiceTaxRate:m.invoiceTaxRate,invoiceTaxRateName:m.invoiceTaxRateName,invoiceAmount:parseFloat(m.invoiceAmount),invoiceSerialNo:m.invoiceSerialNo||"",operateStatus:d.value?"U":"A",isInitialData:m.isInitialData};Array.isArray(c.value)||(c.value=[]),d.value&&-1!==u.value?(c.value[u.value]=e,(0,S.CF)("修改成功")):(c.value.push(e),(0,S.CF)("添加成功")),g()}catch(e){console.log("表单验证失败",e),(0,S.CF)("操作失败，请重试")}},k=()=>{v.value.length>0?s.value=!0:console.warn("开票方数据未加载完成")},b=e=>{let a;a=e.selectedOptions&&e.selectedOptions.length>0?e.selectedOptions[0]:e&&void 0!==e.text&&void 0!==e.value?e:{text:String(e),value:e},m.invoicingParty=a.value,m.invoicePartyName=a.text,s.value=!1},x=()=>{p.value.length>0?n.value=!0:console.warn("税率数据未加载完成")},N=e=>{try{if(c.value=[],!e)return;let a=[];if(Array.isArray(e)&&e.length>0)e.forEach((e=>{if(T(e)){const t=v.value.find((a=>a.value===e.invoicingParty)),o=p.value.find((a=>a.value===e.invoiceTaxRate));a.push({id:e.id||null,invoicingParty:e.invoicingParty||"",invoicePartyName:t?t.text:e.invoicePartyName||"",invoiceTaxRate:e.invoiceTaxRate||"",invoiceTaxRateName:o?o.text:e.invoiceTaxRateName||"",invoiceAmount:e.invoiceAmount||"",invoiceSerialNo:e.invoiceSerialNo||"",operateStatus:e.operateStatus||"U",isInitialData:!0})}}));else if(e&&"object"===typeof e)if(Array.isArray(e.invoiceList)&&e.invoiceList.length>0)e.invoiceList.forEach((e=>{if(e&&"object"===typeof e&&(e.invoicingParty||e.invoiceTaxRate||e.invoiceAmount)){const t=v.value.find((a=>a.value===e.invoicingParty)),o=p.value.find((a=>a.value===e.invoiceTaxRate));a.push({id:e.id||null,invoicingParty:e.invoicingParty||"",invoicePartyName:t?t.text:e.invoicePartyName||"",invoiceTaxRate:e.invoiceTaxRate||"",invoiceTaxRateName:o?o.text:e.invoiceTaxRateName||"",invoiceAmount:e.invoiceAmount||"",operateStatus:e.operateStatus||"U",invoiceSerialNo:e.invoiceSerialNo||"",isInitialData:!0})}}));else if(e.invoicingParty||e.invoiceTaxRate||e.invoiceAmount){const t=v.value.find((a=>a.value===e.invoicingParty)),o=p.value.find((a=>a.value===e.invoiceTaxRate));a.push({id:e.id||null,invoicingParty:e.invoicingParty||"",invoicePartyName:t?t.text:e.invoicePartyName||"",invoiceTaxRate:e.invoiceTaxRate||"",invoiceTaxRateName:o?o.text:e.invoiceTaxRateName||"",invoiceAmount:e.invoiceAmount||"",operateStatus:e.operateStatus||"U",invoiceSerialNo:e.invoiceSerialNo||"",isInitialData:!0})}c.value=a}catch(a){c.value=[]}},T=e=>{if(!e||"object"!==typeof e)return!1;const a=e.invoicingParty||e.invoiceTaxRate||e.invoiceAmount;return a},_=e=>{let a;a=e.selectedOptions&&e.selectedOptions.length>0?e.selectedOptions[0]:e&&void 0!==e.text&&void 0!==e.value?e:{text:String(e),value:e},m.invoiceTaxRate=a.value,m.invoiceTaxRateName=a.text,n.value=!1},D=e=>e?parseFloat(e).toFixed(2):"",F=async()=>{try{const[e,a]=await Promise.all([(0,E.getCodeOptions)("invoiceParty"),(0,E.getCodeOptions)("invoiceTaxRate")]);v.value=e,p.value=a}catch(e){console.error("初始化数据失败:",e),v.value=[],p.value=[]}},I=()=>{try{return c.value&&Array.isArray(c.value)?c.value.filter((e=>"D"!==e.operateStatus)).map((e=>{if(!e||"object"!==typeof e)return{invoicingParty:"",invoiceTaxRate:"",invoiceAmount:"",invoiceSerialNo:"",operateStatus:"A",isInitialData:!1};const a={invoicingParty:e.invoicingParty||"",invoiceTaxRate:e.invoiceTaxRate||"",invoiceAmount:parseFloat(e.invoiceAmount)||"",invoiceSerialNo:e.invoiceSerialNo||"",operateStatus:e.operateStatus||"A",isInitialData:e.isInitialData||!1};return e.isInitialData&&e.id&&(a.id=e.id),a})):[]}catch(e){return console.error("获取开票信息数据失败:",e),[]}},B=e=>{e&&Array.isArray(e)&&(c.value=e.map((e=>({...e,invoiceAmount:D(e.invoiceAmount),operateStatus:e.operateStatus||"U",invoiceSerialNo:e.invoiceSerialNo||"",isInitialData:!0}))))};return(0,o.bv)((()=>{F()})),a({getFormData:I,updateFormData:B,setFormData:N}),(e,a)=>{const l=(0,o.up)("van-button"),u=(0,o.up)("van-icon"),c=(0,o.up)("van-field"),C=(0,o.up)("van-form"),N=(0,o.up)("van-popup"),T=(0,o.up)("van-picker");return(0,o.wg)(),(0,o.iD)("div",ye,[(0,o.wy)((0,o._)("div",fe,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(y.value,((e,t)=>((0,o.wg)(),(0,o.iD)("div",{key:e.id||t,class:"property-item"},[(0,o._)("div",ge,[(0,o._)("span",Ce,(0,i.zw)(e.invoicePartyName)+" - "+(0,i.zw)(e.invoiceTaxRateName)+" 【"+(0,i.zw)(D(e.invoiceAmount))+"】",1),(0,o.Wm)(l,{size:"small",type:"primary",class:"edit-btn",onClick:e=>A(t)},{default:(0,o.w5)((()=>[...a[8]||(a[8]=[(0,o.Uk)(" 编辑 ",-1)])])),_:1},8,["onClick"])]),(0,o.Wm)(u,{name:"cross",class:"property-delete-icon",onClick:e=>w(t)},null,8,["onClick"])])))),128))],512),[[pe.F8,y.value.length>0]]),(0,o._)("div",{class:"add-survey",onClick:f},[(0,o.Wm)(u,{name:"add-o",class:"add-icon"}),a[9]||(a[9]=(0,o._)("span",null,"添加开票信息",-1))]),(0,o.Wm)(N,{show:t.value,"onUpdate:show":a[3]||(a[3]=e=>t.value=e),position:"bottom",round:"",style:{height:"auto",backgroundColor:"white",maxHeight:"80vh"}},{default:(0,o.w5)((()=>[(0,o._)("div",Ae,[(0,o._)("div",we,[(0,o._)("span",he,(0,i.zw)(d.value?"编辑开票信息":"添加开票信息"),1),(0,o.Wm)(u,{name:"cross",class:"popup-close",onClick:g})]),(0,o._)("div",ke,[(0,o.Wm)(C,{ref_key:"surveyForm",ref:r,class:"survey-form"},{default:(0,o.w5)((()=>[(0,o._)("div",be,[a[10]||(a[10]=(0,o._)("div",{class:"form-label"},[(0,o.Uk)(" 开票方"),(0,o._)("span",{class:"required-star"},"*")],-1)),(0,o._)("div",xe,[(0,o.Wm)(c,{readonly:"",clickable:"",modelValue:m.invoicePartyName,"onUpdate:modelValue":a[0]||(a[0]=e=>m.invoicePartyName=e),placeholder:"请选择",onClick:k,"right-icon":"arrow",rules:[{required:!0,message:"请选择开票方"}]},null,8,["modelValue"])])]),(0,o._)("div",Ne,[a[11]||(a[11]=(0,o._)("div",{class:"form-label"},[(0,o.Uk)(" 税率"),(0,o._)("span",{class:"required-star"},"*")],-1)),(0,o._)("div",Te,[(0,o.Wm)(c,{readonly:"",clickable:"",modelValue:m.invoiceTaxRateName,"onUpdate:modelValue":a[1]||(a[1]=e=>m.invoiceTaxRateName=e),placeholder:"请选择",onClick:x,"right-icon":"arrow",rules:[{required:!0,message:"请选择税率"}]},null,8,["modelValue"])])]),(0,o._)("div",_e,[a[12]||(a[12]=(0,o._)("div",{class:"form-label"},[(0,o.Uk)(" 专票金额"),(0,o._)("span",{class:"required-star",style:{"margin-left":"0"}},"*")],-1)),(0,o._)("div",De,[(0,o.Wm)(c,{clickable:"",modelValue:m.invoiceAmount,"onUpdate:modelValue":a[2]||(a[2]=e=>m.invoiceAmount=e),placeholder:"请输入",type:"number",rules:[{required:!0,message:"请输入专票金额"}]},null,8,["modelValue"])])])])),_:1},512)]),(0,o._)("div",Fe,[(0,o.Wm)(l,{class:"footer_gray_btn",onClick:g},{default:(0,o.w5)((()=>[...a[13]||(a[13]=[(0,o.Uk)("取消",-1)])])),_:1}),(0,o.Wm)(l,{class:"footer_red_btn",onClick:h},{default:(0,o.w5)((()=>[(0,o.Uk)("确认"+(0,i.zw)(d.value?"保存":"添加"),1)])),_:1})])])])),_:1},8,["show"]),(0,o.Wm)(N,{show:s.value,"onUpdate:show":a[5]||(a[5]=e=>s.value=e),position:"bottom",round:""},{default:(0,o.w5)((()=>[(0,o.Wm)(T,{columns:v.value,onConfirm:b,onCancel:a[4]||(a[4]=e=>s.value=!1)},null,8,["columns"])])),_:1},8,["show"]),(0,o.Wm)(N,{show:n.value,"onUpdate:show":a[7]||(a[7]=e=>n.value=e),position:"bottom",round:""},{default:(0,o.w5)((()=>[(0,o.Wm)(T,{columns:p.value,onConfirm:_,onCancel:a[6]||(a[6]=e=>n.value=!1)},null,8,["columns"])])),_:1},8,["show"])])}}};const Be=(0,B.Z)(Ie,[["__scopeId","data-v-75f82fb1"]]);var Pe=Be,Ue=t(5592),Ve=t(6523),We=t(8339),Re=t(4029),He=t(6512),Ee=t(4471);function Se(e){return(0,Ee.Z)({url:"/jyclaim/send",method:"get",params:e})}var je=t(1836),qe=t(714);const Le={class:"container"},Oe={key:0,style:{"max-height":"95vh",overflow:"scroll"}},Ye={key:1,style:{"box-shadow":"0 0.25rem 0.75rem rgba(0, 0, 0, 0.08)",width:"95%",margin:"1rem auto","background-color":"white"}},Ze={key:2,style:{"box-shadow":"0 0.25rem 0.75rem rgba(0, 0, 0, 0.08)",width:"95%",margin:"1rem auto","background-color":"white"}},Ke={key:3,style:{position:"relative","box-shadow":"0 0.25rem 0.75rem rgba(0, 0, 0, 0.08)",width:"95%",margin:"0 auto"}},ze={key:4,style:{"box-shadow":"0 0.25rem 0.75rem rgba(0, 0, 0, 0.08)",margin:"1rem auto","background-color":"white"}},Me={key:5,style:{"box-shadow":"0 0.25rem 0.75rem rgba(0, 0, 0, 0.08)",width:"95%",margin:"1rem auto","background-color":"white"}},Xe={key:6,style:{"box-shadow":"0 0.25rem 0.75rem rgba(0, 0, 0, 0.08)",width:"95%",margin:"1rem auto","background-color":"white"}},Je={style:{"background-color":"white",padding:"1rem","box-shadow":"0 0.25rem 0.75rem rgba(0, 0, 0, 0.08)"}},Qe={class:"loading-content"},Ge={class:"jy-popup-container"},$e={class:"jy-content"},ea={key:0,class:"jy-loading"},aa=["src"];var ta={__name:"settingCarLoss",props:{roleflag:{type:String,default:""},lossitemId:{type:String,default:""},licenseNo:{type:String,default:""},taskId:{type:String,default:""},showAssessmentInfo:{type:Boolean,default:!1},commitBtn:{type:Boolean,default:!1},showSurveyList:{type:Boolean,default:!1},showEditSurvey:{type:Boolean,default:!1},showThirdInfo:{type:Boolean,default:!1},fromLossItemCar:{type:Boolean,default:!1},isImmediateLoss:{type:Boolean,default:!1},carItem:{type:Object,default:()=>({})},isReadOnly:{type:Boolean,default:!1}},emits:["close-component","update:showAssessmentInfo","update:showSurveyList","update:showEditSurvey","update:showThirdInfo"],setup(e,{expose:a,emit:i}){const n=(0,We.yj)(),r=(0,We.tv)(),d=e,u=i;let c=null;const m=(0,l.iH)(t(1689)),v=(0,l.iH)(t(2614)),p=(0,l.iH)(t(3777)),y=(0,l.iH)(t(1789)),f=(0,l.iH)(t(2583)),g=(0,l.iH)(!1),C=(0,l.iH)(""),A=(0,l.iH)(!1),w=(0,l.iH)(!1),h=(0,l.iH)([]),k=(0,l.qj)({}),b=(0,l.qj)({}),x=(0,l.qj)({registNo:"",manageType:"",indemnityDutyRate:"",indemnityDuty:"",certificateType:"",policeDepartmentName:"",policeName:"",isAccidentProve:"",isCertificateAccord:"",excessType:"",isFindThirdFlag:"",notifyDate:"",lossType:"",drivingVehicleTyp:"",driverValidDate:"",driverName:"",messageIsOk:"",licenseType:"",repairScore:"",identifyNo:"",certificationDate:"",caseExcessType:"",carCategory:"",carKindCode:""});(0,l.iH)(!0),(0,l.iH)(Date.now());const N=(0,l.qj)({}),T=(0,l.iH)(!0),_=(0,l.iH)(d.showAssessmentInfo),D=(0,l.iH)(d.showSurveyList),F=(0,l.iH)(d.showEditSurvey),I=(0,l.iH)(d.showThirdInfo),B=(0,l.iH)(!1),P=(0,l.iH)(""),E=(0,l.iH)(""),j=(0,l.iH)(""),q=((0,l.iH)([]),(0,l.iH)("")),L=(0,l.iH)(""),Y=(0,l.iH)(""),Z=(0,l.iH)(""),K=(0,l.iH)([]),z=(0,l.iH)(null),M=(0,l.iH)(null),X=(0,l.iH)(null),J=(0,l.iH)(null),Q=(0,l.iH)(null),G=(0,l.iH)(null),$=(0,l.iH)(null),ee=(0,l.iH)(null),te=(0,l.iH)(!1),oe=(0,l.iH)({}),le=(0,l.iH)([]),se=e=>{console.log("接赔人信息更新:",e)},ie=e=>{oe.value=e},ne=e=>{le.value.push({...e,id:Date.now()})};(0,o.YP)((()=>d.isImmediateLoss),(e=>{}),{immediate:!0});const re=(0,l.qj)({lossAddress:"",repairFactoryCode:"",repairFactoryName:"",lossParts:[],sumLossAmount:"",sumRescueFee:"",lossAmount:"",surveyData:{},repairData:{},thirdPartyInfo:{},reparationsData:[],taxInvoiceData:[]}),de=(0,l.qj)({originalId:"",originalName:"",kindCode:"",lossFee:"",lossCount:"",sumFitItem:""}),ue=(0,l.qj)({repairTypeCode:"",repairTypeName:"",repairCode:"",kindCode:"",repairFee:"",sunFitItem:""}),ce=(0,l.qj)({assistCode:"",assistName:"",kindCode:"",lossFee:"",assistCount:"",sumFitItem:""});(0,o.YP)((()=>d.showAssessmentInfo),(e=>{_.value=e})),(0,o.YP)((()=>d.showSurveyList),(e=>{D.value=e})),(0,o.YP)((()=>d.showEditSurvey),(e=>{F.value=e})),(0,o.YP)((()=>d.showThirdInfo),(e=>{I.value=e}));const me=()=>{u("close-component")},pe=e=>{console.log("🎯 收到H5页面消息，来源:",e.origin,"数据:",e.data);try{let t;if("string"===typeof e.data)try{t=JSON.parse(e.data)}catch(a){return void console.log("消息不是JSON格式:",e.data)}else t=e.data;if(console.log("解析后的消息数据:",t),t&&"object"===typeof t)if(t.body&&void 0!==t.body.code){const{code:e,message:a}=t.body;console.log("🎯 检测到body格式消息，code:",e,"message:",a),ye(e,a)}else if(void 0!==t.code){const{code:e,message:a}=t;console.log("🎯 检测到直接code格式消息，code:",e,"message:",a),ye(e,a)}else if(t.backparams){const{code:e,message:a}=t.backparams;console.log("🎯 检测到backparams格式消息，code:",e,"message:",a),ye(e,a)}else if(t.data&&void 0!==t.data.code){const{code:e,message:a}=t.data;console.log("🎯 检测到data格式消息，code:",e,"message:",a),ye(e,a)}else console.warn("无法识别的消息格式:",t)}catch(t){console.error("处理H5消息时出错:",t)}},ye=async(e,a)=>{console.log(`🎯 处理精友定损结果: code=${e}, message="${a}"`);const t=String(e);if("1"===t){console.log("✅ 精友定损提交成功，准备关闭弹窗"),(0,S.CF)({type:"success",message:a||"定损提交成功",duration:1500}),console.log("📊 开始获取最新的定损数据...");const t=await Ae();await new Promise((e=>setTimeout(e,100))),console.log("🚪 关闭精友定损弹窗"),await ge(),t&&we(t),"function"===typeof u&&u("jy-submit-success",{code:e,message:a})}else console.error(`❌ 精友定损提交失败: code=${e}, message="${a}"`),(0,S.CF)({type:"fail",message:a||`定损提交失败 (code: ${e})`,duration:3e3})},fe=e=>{console.log("打开精友定损弹窗，原始URL:",e);try{if(!e||"string"!==typeof e)return console.error("无效的URL:",e),void(0,S.CF)("精友定损链接无效");let t=e.trim();if(t.includes("\x3c!--")||t.includes("--\x3e"))return console.error("URL 包含非法字符:",t),void(0,S.CF)("精友定损链接格式错误");try{const e=new URL(t);t=e.href}catch(a){console.warn("URL 解析失败，尝试直接使用:",a),t=encodeURI(t)}console.log("处理后的URL:",t),c=n.fullPath,C.value=t,g.value=!0,w.value=!0,window.removeEventListener("message",pe),window.addEventListener("message",pe),console.log("已添加消息监听，等待精友页面返回结果")}catch(t){console.error("打开精友弹窗时出错:",t),(0,S.CF)("打开精友定损页面失败")}},ge=()=>new Promise((e=>{console.log("🔧 执行关闭精友定损弹窗");try{window.removeEventListener("message",pe),C.value&&(console.log("停止iframe加载"),C.value=""),g.value=!1,setTimeout((()=>{w.value=!1,console.log("✅ 精友定损弹窗已关闭"),e(!0)}),50)}catch(a){console.error("关闭弹窗时出错:",a),e(!1)}})),Ce=e=>{w.value=!1,console.log("精友定损页面加载完成");try{const a=e.target;if(a.contentWindow){const e={type:"parent-ready",timestamp:Date.now()};a.contentWindow.postMessage(e,"*")}}catch(a){}},Ae=async()=>{try{const e={taskId:d.taskId||n.query.taskId,registNo:n.query.registNo},a=await(0,He.gl)(e);if(200===a.data.code){if(Object.assign(N,a.data.data),ee.value=a.data.data,a.data.data){const e=a.data.data;we(e),await(0,o.Y3)(),console.log("✅ 最新损失信息已获取并更新到组件")}else console.warn("⚠️ 返回数据为空");return a.data.data}return console.error("❌ 获取最新损失信息失败:",a.data.message),null}catch(e){return console.error("❌ 获取最新损失信息时出错:",e),null}},we=async e=>{if(e)try{if(G.value&&G.value.setFormData){const a={lossParts:e.lossPartList||[],lossAmount:e.lossAmount,sumLossAmount:e.sumLossAmount,lossCarKindCode:e.lossCarKindCode,sumRescueFee:e.sumRescueFee};G.value.setFormData(a)}if(X.value&&X.value.setFormData){const a={replacementList:e.replacementList||[]};X.value.setFormData(a)}if(Q.value&&Q.value.setFormData){const a={repairFactoryName:e.repairFactoryName,factoryQualification:e.factoryQualification,is4S:e.is4S,creditCode:e.creditCode};Q.value.setFormData(a),console.log("✅ 维修信息组件已更新")}if(z.value&&z.value.setFormData){const a={directCostList:e.directcostlossVOList||[]};z.value.setFormData(a),console.log("✅ 费用赔款组件已更新")}if(M.value&&M.value.setFormData){const a={invoiceList:e.invoicelossVOList||[]};M.value.setFormData(a),console.log("✅ 专票信息组件已更新")}if(e.carBaseInfoVO&&(Object.assign(k,{driverName:e.carBaseInfoVO.driverName,identifyNo:e.carBaseInfoVO.identifyNo,licenseType:e.carBaseInfoVO.licenseType}),console.log("✅ 车辆基本信息已更新")),re.lossAmount=e.lossAmount,re.sumLossAmount=e.sumLossAmount,re.sumRescueFee=e.sumRescueFee,re.lossParts=e.lossPartList||[],J.value&&J.value.setFormData){const a={replacementList:e.replacementList||[],repairList:e.repairList||[],accessoriesList:e.accessoriesList||[]};J.value.setFormData(a),console.log("✅ 定损清单组件已更新",a)}await(0,o.Y3)(),console.log("🎉 所有组件数据更新完成")}catch(a){console.error("❌ 更新组件数据时出错:",a)}},he=e=>{w.value=!1,console.error("精友定损iframe加载失败:",e),(0,S.CF)("精友定损页面加载失败，请重试")},ke=e=>{K.value=e.map((e=>({lossPart:e.lossPart,lossDegree:e.lossDegree,taskId:d.taskId||n.query.taskId}))),re.lossParts=[...K.value]},be=()=>{},xe=()=>{if(re.taxInvoiceData&&Array.isArray(re.taxInvoiceData))for(let e=0;e<re.taxInvoiceData.length;e++){const a=re.taxInvoiceData[e];if(!a.invoiceAmount||""===a.invoiceAmount||null===a.invoiceAmount||void 0===a.invoiceAmount)return(0,S.CF)({type:"fail",message:"专票金额不得为空",duration:2e3}),!1}return!0},Ne=async()=>!(!X.value||!X.value.validateForm)||(h.value.includes("2")||(h.value=[...h.value,"2"],console.log("自动展开查勘信息模块进行验证")),await(0,o.Y3)(),await new Promise((e=>setTimeout(e,200))),!(!X.value||!X.value.validateForm)),Te=async e=>{const a=await Ne();if(a){const e=await X.value.validateForm();if(!e)return}if("commitThird"===e)_.value=!0,D.value=!0,F.value=!0,I.value=!1,T.value=!1,u("update:showAssessmentInfo",!0),u("update:showSurveyList",!0),u("update:showEditSurvey",!0),u("update:showThirdInfo",!1);else if("commit"===e||"save"===e){if(await De(),!xe())return;const a=Ie();let t,o;"commit"===e?(t=await(0,Ve.nq)(a),200===t.data.code&&(Z.value=t.data.data,o=t.data.data.responseResultCode)):(console.log("---"),t=await(0,Ve.Mz)(a),200===t.data.code?(Z.value=t.data.data.lossApprovalId,o=t.data.data.responseResultCode):400===t.data.code&&(0,S.CF)({type:"fail",message:t.data.message||"定损保存失败",duration:3e3})),1!==o&&"1"!==o||(0,S.CF)({type:"success",message:"任务已转线上",duration:3e3}),u("loss-approval-id",Z.value),u("close-component")}else u("close-component")},_e=e=>{Object.assign(x,e)},De=async()=>{if(await(0,o.Y3)(),X.value&&X.value.getFormData){const e=X.value.getFormData();re.surveyData=e,console.log("formData.surveyData=",re.surveyData),Object.assign(re,e)}if(Q.value&&Q.value.getFormData){const e=Q.value.getFormData();re.repairData=e}if(z.value){const e=z.value.getFormData();re.reparationsData=e}if(M.value&&M.value.getFormData){const e=M.value.getFormData();re.taxInvoiceData=e}if(G.value&&G.value.getFormData){const e=G.value.getFormData();re.lossParts=e.lossParts,re.lossAmount=e.lossAmount,re.kindCode=e.kindCode}if($.value){const e=$.value.getFormData();re.payeeData=e}},Fe=e=>{if(console.log("percent",e),"0%"===e)return"0";if(!e&&0!==e)return"";if("string"===typeof e&&e.includes("%")){const a=parseFloat(e.replace(/%/g,""));return isNaN(a)?e:a}return e},Ie=()=>{const e={lossApprovalId:n.query.lossApprovalId,licenseNO:d.licenseNo,lossitemId:d.lossitemId,lossAmount:re.lossAmount,taskId:d.taskId||n.query.taskId,registNo:n.query.registNo},a=re.taxInvoiceData.map((e=>({invoicingParty:e.invoicingParty,invoiceTaxRate:parseFloat(e.invoiceTaxRate),invoiceAmount:parseFloat(e.invoiceAmount),invoiceSerialNo:e.invoiceSerialNo||"",operateStatus:e.operateStatus,invoiceSerialNo:e.invoiceSerialNo}))),t=re.reparationsData.map((e=>({accounid:e.accounid?.value||e.accounid||"",chargeCode:e.chargeCode?.value||e.chargeCode||"",kindCode:e.kindCode||"",payExcreasonType:e.payExcreasonType?.value||e.payExcreasonType||"",invoiceAmount:parseFloat(e.invoiceAmount),payeeType:e.paymentType?.value||e.paymentType||""}))),o={taskId:d.taskId||n.query.taskId,manageType:re.manageType||x.manageType||"",indemnityDuty:re.indemityDuty||x.indemnityDuty||"",indemnityDutyRate:Fe(re.indemityDutyRate)||Fe(x.indemnityDutyRate)||null,caseExcessType:re.caseExcessType||x.caseExcessType||"",certificateType:re.certificateType||x.certificateType||"",policeDepartmentName:re.policeDepartmentName||x.policeDepartmentName||"",policeName:re.policeName||x.policeName||"",isAccidentProve:re.isAccidentProve||x.isAccidentProve||"",isCertificateAccord:re.isCertificateAccord||x.isCertificateAccord||"",drivingVehicleTyp:re.drivingVehicleTyp||x.drivingVehicleTyp||"",isFindThirdFlag:re.isFindThirdFlag||x.isFindThirdFlag||"",lossType:re.lossType||x.lossType||"",licenseType:re.licenseType||x.licenseType||"",drivingVehicleTyp:re.drivingVehicleTyp||x.drivingVehicleTyp||"",messageIsOk:re.messageIsOk||x.messageIsOk||"",driverValidDate:re.driverValidDate||x.driverValidDate||"",driverName:re.driverName||x.driverName||"",repairScore:re.repairScore||x.repairScore||"",identifyNo:re.identifyNo||x.identifyNo||"",certificationDate:re.certificationDate||x.certificationDate||"",carKindCode:re.carKindCode||x.carKindCode||"",carCategory:re.carCategory||x.carCategory||""};return{...e,invoicelossVOList:a,directcostlossVOList:t,carBaseInfoVO:o}},Be=e=>{e.lossAddress&&(P.value=e.lossAddress),e.repairFactoryCode&&(E.value=e.repairFactoryCode),e.repairFactoryName&&(j.value=e.repairFactoryName),e.lossParts&&Array.isArray(e.lossParts)&&e.lossParts.length>0&&(K.value=[...e.lossParts],re.lossParts=[...e.lossParts]),e.lossCarKindCode&&(q.value=e.lossCarKindCode),e.lossDegree&&("object"===typeof e.lossDegree&&null!==e.lossDegree?L.value=e.lossDegree.value||"":L.value=e.lossDegree||""),e.lossAmount&&(Y.value=e.lossAmount),Object.assign(re,e)},Ee=e=>{Object.assign(de,e)},ta=e=>{Object.assign(ue,e)},oa=e=>{Object.assign(ce,e)};a({updateLossData:Be,updateReplacementData:Ee,updateRepairData:ta,updateAccessoriesData:oa,openJYPopup:fe,closeJYPopup:ge,getPayeeData:()=>$.value?$.value.getFormData():null,reloadPayeeData:async()=>{$.value&&await $.value.reloadPayeeData()}});const la=async()=>{try{const e=(0,je.LP)(),a=await(0,Re.DG)(n.query.registNo,e);200===a.data.code&&Object.assign(b,a.data.data)}catch(e){console.error("获取案件信息失败:",e)}},sa=async()=>{console.log("🚀 开始获取定损数据");try{const e={taskId:d.taskId||n.query.taskId,registNo:n.query.registNo},a=await(0,He.gl)(e);if(200===a.data.code){const e=a.data.data;return Object.assign(N,e),ee.value=e,te.value=!0,e.carBaseInfoVO&&Object.assign(x,e.carBaseInfoVO),(0,o.Y3)((()=>{ra()})),e}}catch(e){return console.error("获取定损数据失败:",e),te.value=!1,null}},ia=async()=>{try{console.log("🚀 开始精友定损流程");const e=n.query.registNo;A.value=!0;const a=await na();if(a.success&&a.lossApprovalId){console.log("数据保存成功，lossApprovalId:",a.lossApprovalId);const t={registNo:e,taskId:d.taskId||n.query.taskId,lossApprovalId:a.lossApprovalId};"是"===x.caseExcessType?t.excessType=1:(x.caseExcessType,t.excessType=0);const o=await Se(t);if(console.log("精友接口返回:",o.data),200===o.data.code&&o.data.data){const e=o.data.data;console.log("获取到精友URL:",e),fe(e)}else(0,S.CF)(o.data.message||"获取精友链接失败")}}catch(e){console.error("精友定损流程异常:",e),(0,S.CF)("精友定损流程异常")}finally{A.value=!1}},na=async()=>{try{await De();const e=Ie(),a=await(0,Ve.Mz)(e);if(200===a.data.code){const e=a.data.data.lossApprovalId;return{success:!0,lossApprovalId:e}}return 400===a.data.code&&(0,S.CF)({type:"fail",message:a.data.message||"保存失败",duration:3e3}),{success:!1,error:a.data.message}}catch(e){return{success:!1,error:e.message}}},ra=()=>{if(!ee.value)return;const e=ee.value;if(G.value&&G.value.setFormData){const a={kindCode:e.kindCode,lossApprovalMethod:e.lossApprovalMethod,lossParts:e.lossPartList||[],sumLossAmount:e.sumLossAmount,sumRescueFee:e.sumRescueFee};G.value.setFormData(a)}if(X.value&&X.value.setFormData){const a={replacementList:e.replacementList||[]};X.value.setFormData(a)}if(J.value&&J.value.setFormData){const a={replacementList:e.replacementList||[],repairList:e.repairList||[],accessoriesList:e.accessoriesList||[]};J.value.setFormData(a)}if(Q.value&&Q.value.setFormData){const a={repairFactoryName:e.repairFactoryName,factoryQualification:e.factoryQualification,is4S:e.is4S,creditCode:e.creditCode};Q.value.setFormData(a)}if(z.value&&z.value.setFormData){const a={directCostList:e.directcostlossVOList||[]};z.value.setFormData(a)}if(e&&e.directcostlossVOList&&Array.isArray(e.directcostlossVOList)&&z.value&&"function"===typeof z.value.updateFormData&&z.value.updateFormData(e.directcostlossVOList),M.value&&M.value.setFormData){const a={invoiceList:e.invoicelossVOList||[]};M.value.setFormData(a)}e.carBaseInfoVO&&Object.assign(k,{driverName:e.carBaseInfoVO.driverName,identifyNo:e.carBaseInfoVO.identifyNo,licenseType:e.carBaseInfoVO.licenseType}),re.lossAmount=e.lossAmount,re.sumLossAmount=e.sumLossAmount,re.sumRescueFee=e.sumRescueFee,re.lossParts=e.lossPartList||[]};return(0,o.bv)((()=>{window.addEventListener("message",pe),r.beforeEach(((e,a,t)=>{console.log("路由变化:",{from:a.path,to:e.path}),g.value&&console.log("精友弹窗打开中，阻止路由跳转"),t()})),(0,o.Y3)((async()=>{await la(),await sa(),re.lossParts&&re.lossParts.length>0&&!te.value&&(K.value=re.lossParts),$.value&&await $.value.reloadPayeeData()}))})),(0,o.Ah)((()=>{console.log("组件卸载，清理精友通信监听"),window.removeEventListener("message",pe),g.value=!1})),(a,t)=>{const l=(0,o.up)("van-nav-bar"),i=(0,o.up)("van-collapse-item"),n=(0,o.up)("van-collapse"),r=(0,o.up)("van-icon"),d=(0,o.up)("van-button"),u=(0,o.up)("van-col"),c=(0,o.up)("van-row"),k=(0,o.up)("van-loading"),N=(0,o.up)("van-popup");return(0,o.wg)(),(0,o.iD)("div",Le,["target"===e.roleflag?((0,o.wg)(),(0,o.j4)(l,{key:0,title:"定损环节-标的车","left-arrow":"",onClickLeft:me})):(0,o.kq)("",!0),"third"===e.roleflag?((0,o.wg)(),(0,o.j4)(l,{key:1,title:"定损环节-三者车","left-arrow":"",onClickLeft:me})):(0,o.kq)("",!0),(0,o._)("div",null,[T.value&&!e.fromLossItemCar?((0,o.wg)(),(0,o.iD)("div",Oe,[(0,o.Wm)(n,{modelValue:h.value,"onUpdate:modelValue":t[0]||(t[0]=e=>h.value=e),style:{"margin-top":"1.5rem"}},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{name:"1",style:{"box-shadow":"0 0.25rem 0.75rem rgba(0, 0, 0, 0.08)"}},{title:(0,o.w5)((()=>[(0,o.Wm)(s.Z,{titleName:"报案信息",imgurl:m.value},null,8,["imgurl"])])),default:(0,o.w5)((()=>[(0,o.Wm)(H.Z,{offenseInfoList:b},null,8,["offenseInfoList"])])),_:1}),(0,o.Wm)(i,{name:"2",style:{"box-shadow":"0 0.25rem 0.75rem rgba(0, 0, 0, 0.08)"}},{title:(0,o.w5)((()=>[(0,o.Wm)(s.Z,{titleName:"查勘信息",imgurl:y.value},null,8,["imgurl"])])),default:(0,o.w5)((()=>[(0,o.Wm)(O,{ref_key:"surveyInfoRef",ref:X,"survey-baseinfo":x,"onUpdate:surveyBaseinfo":_e,roleflag:e.roleflag},null,8,["survey-baseinfo","roleflag"])])),_:1})])),_:1},8,["modelValue"])])):(0,o.kq)("",!0),_.value?((0,o.wg)(),(0,o.iD)("div",Ye,[(0,o.Wm)(s.Z,{titleName:"定损信息",imgurl:f.value},null,8,["imgurl"]),(0,o.Wm)(ae,{ref_key:"assessmentInfoRef",ref:G,"loss-parts-data":K.value,onLossPartsSubmit:ke},null,8,["loss-parts-data"])])):(0,o.kq)("",!0),(0,o.Wm)(W.Z),(0,o.Wm)(R.Z),_.value?((0,o.wg)(),(0,o.iD)("div",Ze,[(0,o.Wm)(s.Z,{titleName:"维修信息",imgurl:p.value},null,8,["imgurl"]),(0,o.Wm)(ve,{ref_key:"repairInfoRef",ref:Q},null,512)])):(0,o.kq)("",!0),D.value?((0,o.wg)(),(0,o.iD)("div",Ke,[(0,o.Wm)(s.Z,{titleName:"定损清单",imgurl:m.value},null,8,["imgurl"]),F.value?((0,o.wg)(),(0,o.iD)("div",{key:0,class:"ocrbox",style:{right:"1rem"},onClick:ia},[(0,o.Wm)(r,{name:"add-o",size:"1rem",style:{"margin-right":"0.5rem"}}),t[7]||(t[7]=(0,o.Uk)("精友定损 ",-1))])):(0,o.kq)("",!0),(0,o.Wm)(U,{ref_key:"surveyListRef",ref:J},null,512)])):(0,o.kq)("",!0),_.value?((0,o.wg)(),(0,o.iD)("div",ze,[(0,o.Wm)(Ue.Z,{"car-item":e.carItem,"payee-data":oe.value,isReadOnly:e.isReadOnly,onUpdate:se,onFormDataChange:ie,onAddPayee:ne,ref_key:"payeeInfoRef",ref:$},null,8,["car-item","payee-data","isReadOnly"])])):(0,o.kq)("",!0),_.value?((0,o.wg)(),(0,o.iD)("div",Me,[(0,o.Wm)(s.Z,{titleName:"费用赔款信息",imgurl:v.value},null,8,["imgurl"]),(0,o.Wm)(V.Z,{ref_key:"reparationsRef",ref:z,isReadOnly:e.isReadOnly,onUpdate:be},null,8,["isReadOnly"])])):(0,o.kq)("",!0),_.value?((0,o.wg)(),(0,o.iD)("div",Xe,[(0,o.Wm)(s.Z,{titleName:"专票信息",imgurl:v.value},null,8,["imgurl"]),(0,o.Wm)(Pe,{ref_key:"taxInvoiceRef",ref:M,onUpdate:be},null,512)])):(0,o.kq)("",!0)]),(0,o.Wm)(qe.Z,{show:B.value,"onUpdate:show":t[1]||(t[1]=e=>B.value=e),"saved-parts":K.value,onSubmit:ke},null,8,["show","saved-parts"]),(0,o._)("div",Je,[e.fromLossItemCar?((0,o.wg)(),(0,o.j4)(c,{key:0},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{span:"24"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{round:"",type:"success",class:"footer_red_btn",onClick:t[2]||(t[2]=e=>Te("save"))},{default:(0,o.w5)((()=>[...t[8]||(t[8]=[(0,o.Uk)(" 保存 ",-1)])])),_:1})])),_:1})])),_:1})):!e.isReadOnly&&e.commitBtn?((0,o.wg)(),(0,o.j4)(c,{key:1},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{span:"12"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{round:"",type:"success",class:"footer_gray_btn",onClick:t[3]||(t[3]=e=>Te("save"))},{default:(0,o.w5)((()=>[...t[9]||(t[9]=[(0,o.Uk)(" 保存 ",-1)])])),_:1})])),_:1}),(0,o.Wm)(u,{span:"12"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{round:"",type:"success",class:"footer_red_btn",onClick:t[4]||(t[4]=e=>Te("commit"))},{default:(0,o.w5)((()=>[...t[10]||(t[10]=[(0,o.Uk)(" 提交 ",-1)])])),_:1})])),_:1})])),_:1})):(0,o.kq)("",!0)]),(0,o.Wm)(N,{show:A.value,"onUpdate:show":t[5]||(t[5]=e=>A.value=e),round:"",class:"loading-popup"},{default:(0,o.w5)((()=>[(0,o._)("div",Qe,[(0,o.Wm)(k,{type:"spinner",size:"1.5rem"}),t[11]||(t[11]=(0,o._)("div",{style:{"margin-top":"10px"}},"正在保存数据...",-1))])])),_:1},8,["show"]),(0,o.Wm)(N,{show:g.value,"onUpdate:show":t[6]||(t[6]=e=>g.value=e),position:"bottom",style:{height:"100%",width:"100%"},"close-on-click-overlay":!1,"close-on-popstate":!1},{default:(0,o.w5)((()=>[(0,o._)("div",Ge,[(0,o.Wm)(l,{title:"精友定损","left-arrow":"",onClickLeft:ge}),(0,o._)("div",$e,[w.value?((0,o.wg)(),(0,o.iD)("div",ea,[(0,o.Wm)(k,{type:"spinner",size:"1.5rem"},{default:(0,o.w5)((()=>[...t[12]||(t[12]=[(0,o.Uk)("加载中...",-1)])])),_:1})])):(0,o.kq)("",!0),g.value&&C.value?((0,o.wg)(),(0,o.iD)("iframe",{key:1,src:C.value,class:"jy-iframe",frameborder:"0",onLoad:Ce,onError:he,sandbox:"allow-same-origin allow-scripts allow-forms allow-popups",referrerpolicy:"no-referrer"},null,40,aa)):(0,o.kq)("",!0)])])])),_:1},8,["show"])])}}};const oa=(0,B.Z)(ta,[["__scopeId","data-v-47829e1f"]]);var la=oa},5487:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAANZSURBVHgB7ZlNUtswFMefnJAdM92yc2+QAou0m4ob9AYlJ2g5AWbdRcoJmp6gvQHqqpnhY9ITYFZs6RaC3f9LpVQxdpD8kQwlvxnGsiPZ70nvS4JozZrnjaCKdLvdEBcZBAFfKUmSMS5jENMSKK0ABJetVusQTVnQRd3f3/ebVqRFJdje3j7EjA/RDBd0C9Hn49bWFl1fX/+ghvBWgIUXQkT2szRNWcCv+OMrfhah+Q1t2aQSXibE9g6zuTT3LHin09kfjUax3a/X64V3d3dfyDIvKLJ3dnamqGa8FNjZ2TkhLRQLf3FxIV37A3V+fr5HNRO4djTRxtzzzD82ZmNjo2/dSv2OWnFWAKbTNW2e/azZ5KH7qNnHgkBSzTgrAKG71q1yHGYc3BBSzbRphfQ+pTJo03uvQSn9TgR9Hh2ImG99FIhNAxHlresguy/aY/s3CP8Nlxfkg5iaDb/z1fQdruNQIijr1skhs44Ppx5nutxQRZxXgEsChEVlBIJTc5xfGBZ1nyl5jp9gfFBcihTSIfpu2l55YHd3V0KQE+tRbr2jE95cIsPsv3SJXL54F3NQIoISh5nHykQbbfNy7iNCHCELR9QAparRAiXyP9Cg8NP3U0m43rm9vR0WRSReESSuqIn6x6byhkYXbl0r0cUoM5SLvfcGaRgkxU6cBKRMvC+isgJVeDNIubINi35P4Vs/D8TCSOecB+pGDlJOYAuTmHBIcisrJdSBuHk9SPuY5ndFfSYoGeh/x8kHdEnATvoCkeXRpc8DpUhMf+upuM6N/kIFsP/dR5jkalFSvYwRtY6xoxtSRXIVyCsFGqLy0csDBVh4mMmJfbIAbjBjv/As1m3vKpLfh3FhNvHhWQzz2iurxIMopGc+tB4db25uRkqpyqUvw4lvMpnsm1KEFXOpbIuYWwFt87MSGCvRPz09HVIDZL8FhfplfGIukeGFH6z2UVPCM1rYY+t7fltLzUwBK1ROabfbQ2oYOHBE/3ZlpY5d7BUITcP12KQqcFwWfrbNtI9uXJkpYI7HGSznJS2PK9PAxHknyKIVuKIlkQnJlRRYFU9egUo8eQVy9wOc7pFoIloCPqd8eRRtaCT/Z4WeALYJxbR6YvLkQS1EDRyBOxLXsT9Ys+a58Qcst1AGGyn2QgAAAABJRU5ErkJggg=="},5513:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJSSURBVHgB7ZoxbsIwFIZfUsTcFbHkCBFTxEJu0N6gvQInwByg4ghNb9DeoF1QhRDiCGGBlZkh6XttgtwoTiB+jhnySRGOjeL/t1/sOA5Ah12cuj/4vh+6rutj8h54iTebTQSaVBoYjUYzx3EEGCJNU4Em5qDBnaoAW97Dln8Hg2DjhIPBAA6Hwxc0pKcqQPGPUkXbJEk+gAG81gR/QulcYE9D057oVZSdY57EYwUCGECxglpeztMx4YJd4jyRmZjBlVg1gDfxGwo/t3oTE7Z7ANbrtdAxYd0AoWPiJgwQTU30wCI0pNKolJ/jaEd5MSa9rLx2dLJqAAmLQ2qRzMRO9dhhI4RiuB5PVdB6D1BLUlhAhSiiOGOrsBJClzyFls3YZdzMKNSUzsCljF/S5wAPYKYVA8EinWFNry4ev2lGjBsgwViJkCoUnCaMGiiKlyplM2HMQIn4eXbkFbOYMGKgTPxy6gg6oGhC88ZmN6ASn58kuI4BRgWsBurEl5V/T50INGAz0ES8XN4UFgO2xBPaBmyKJ7SeRsd/I4iQsloVT+j2gCelo7bFE3yjUAK7PNmWeIJtQZO6MMGQEqkDHr7yfpKKjIkn2Aw4tPxzcZH+P9uoeEIvhNzKBbpx8YRWD6DAaLxIKf49OT9BY7oz7KVoh9CyJaEqujWxbToDtqm6iY95At+QPWSvA1uD6oQSLUWqdim3uAWUn/p4QR8s0e/3ldu9yn3i/X4fD4dDmlhDsAhteqxWK6WB2k8NgiDwTqcT7Rlzf2pQx5GiAHduPqHjhvkBdAn1GKLd4mgAAAAASUVORK5CYII="},2583:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJESURBVHgB7ZlNUuJAFMdfPmDFgi3FJjeYFGzQlZxg8ATD3GCmnP3gXguPgCdQTyBulOKr4g3iBrZZQ5H4f1aiYkIgJNBq9W8T6PRLv3+/l07ymkgiSYVCCalUKk0cDNoN9ng87iQxSCQAzv9XFKVFO8TzvBZEnG7aX9u04z6cZzDGUalUoul0erdR/006VavVXzh03jVdY6YeKUPg+A8cGu+amqPR6HKt3boOJlBV9RYDFP2BrEKhUO92uw5lCIYpapp2yz/9Jgfj1geDgRVnp665qIGLXAXOA1vX9eOsnWcsy3Jyudwxj+E3FReLxRX7EGe3MgK+8zzzht9kY4B6r9ezaYfUajVjPp9zJAz+j1S1XdetQ6Ad1T9SQEQ4mczzfhUR94OFaLCIUOT1qAtg5tu07DzTwIUbJAYTE8o+/f54IrSM8oNqH8vlFphYXp+wvC7d1FERMIIfvOIg/25IIPDhJ71lg/HxvB5nzM7jqdgigSAjWIS56nzsMvoVkAJEIwWIRgoQjU4ZcHDu/cFLVTGJjYuXw96J0qGUpBZweO41Ecd2QrOX0B+cec7DP+WaUpA6hbyEM79kq21vG5A6Ag8nysVh23OQE0YSO1dFCv39BCnE3GfgyLbIZVQ0UoBopADRSAGikQJEIwWI5lt+kb1WgLmsx5UxkfilxYD11WlUpi2U0YO/ZlxZb9/k8/nQ11uoOj2ZTOxyucz7Bkf0icBEnvb7/ZCAlTs0vFMym814PyD1Z19KeK/MGg6HXZJIJCGeAQgno+YtcHM0AAAAAElFTkSuQmCC"},2614:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAI5SURBVHgB7ZlBboJAFIYfo3HdvRuOQFwRN6UnaI/QHqHxAMIBGo+gR7A3sBtijDHcoKxcu3YBfQ94ZFBomzLEIZ0vITyYB76fefMcBgCD4X9jfdc4mUyecWfDbYkPh8OqqbFRAAVvWdYSNCBN05cmEQJ6Tu9TyHBrrlLIcRxPCOGgeQd6cUqSZB1FUSyfrAjAnJ9j5fFBY7Ai+TgmAj4uBeCTtweDwSf0AHzID/v9fkP2kE9i2jxJDhF21ztoBMb0iDtKbcDYaL8heyj5lDlPwWM3+aARmN4kwikOy1h7/0dmBDDTt/TZxU2V329RIoCCwjstBW7uIp03+WVt7KdIhJoeEBXTrxNB56it7hpFP/13wldrhbtAumlFxFXw6LvNr2nNEBSBIvzpIiUzC7wQAWxLrgH5giKUVqEisEpPdBk8oaQHpvmAtLODBCjyGC7eI7AvYivJfP3CLd7O2qdRawFcgX7ys0iQgHJcUNdjJYK2ItqnUJs7KEjg1j1AFSgbvMlFygi4x6fuZTZOvDB9PuT2BNNMRSVSMgbCmkCyXBe5AAo+nHXzntH7uZD6KlRQpFBpc/VhtK9CVtX2OJ0YU4UKTBUiTBVqQXcC8vlQRiLZqlE2nb6ExwbN7VTN/evoTAARdhg4Y8bArZFT6MQGLePRSphOFEuLTBmrvDYa4covHzrSMp52jEajNdsDNo7HYzwej2kK44HG4IMNdrtdKeDqA4fruvb5fKaVau0+cFCW8LK6wWDI+QL6NN/IB5XnoAAAAABJRU5ErkJggg=="},3777:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAR7SURBVHgB7Vl/UuIwFH4B3MUZd4Y9wbInEE8gHGC1nEA4gXoC8QSyJxBPYNkLwJ4AOAH1BPLHzogKzb7XvEit/ZGWOqMz/WZK0yRNvy95eUkeAAUKFPjUEKYVKwBNF6BRBtinZwlwh7fxCi/IGQ+WVS9JuHAFXO7athNX10gAkr/C21lYGQpxSgDtZ4Ap5AAiLySMMFnHy5ECWnEiSmCGhi89RtW/8f6XHjBdRxGTHYAT2BIB8gTvmfKj3kkSUKMfHIEuEnUojWTr2Nt9NJ0m5v/05Q92XgvdhrzX86DajhURKYDMBq97vC6W2BDafovIUo9j2vsQ5aOYA2DzkcrUciGPZjPGe5ereHMCUgigntc23wsTgXm3XL7AdJvTNCpN2J68w/nXXM2hCQ2mAspvSbwSwXkNbTJLNdRjSouUZhRD3mgiVyBcFU1Mgs2NNFgEPJNNwovQxfPmtRko4fuQDg5/o14W4hDJQxovVIlrWSiCrYqyeU+E2JR1uec1FpABJQHnroQJpV1XDoRqp2ZC3ns/LNP1eRwitlJmo/38gsijsEHgNW06MzAEmQqSvw1kG5MnhApYK3umntCTkkSQt2ntoesMIU84pB9puKAF7XwlsH0JwzTkCZErMRLv4+2UVtq1Ih9rImxmTa6vfbgR+TSEwVQAooZeZiLVhE4kVcV6WGeUVD9P8kkCXpHirDHwFgJxKJVHctC8aMFxkkTkTd4IRApHYoAmIqMudKdzJqXrz4P5hOWR1V8eWxKvedz+Jg2Mt9PcuxYTIk8xddVO9CrY41Ej4Y2AC2eyBP1373lTRPV43Eh8OBQiPgoKERlg7IXC8HhkXaAvb9Ja8AU3ZcK2F5psmBcyXezSoAIZ8XhsXSOJDqVp6/2k9t/eCWqpyLbWfHKjExyRDcvH+yWfIX6Acs8zbGq8Vlv5RGQaAT95bGAg1fpQo/TXoa2PgUYjEfUNqU5+3aSwjWlUIpS8lHBJhFfqAL6gfCrXdePO0nyy01vvGZbf0AW+aAfeRknRjlQjECS/+8fu6bJ/ltWoqH1OLViW1vaDI4QkD6LiTsYjEEeesGfbU9yo9b0PCjj2l4UEBK7jvpUm2mEkIIk84andPkGP1OM6wzBSuHc658cmcMwpiOpmXhhFOxIFmJKn8yzXuQmrQ/BFLKhngwckmiNznLRzvU6YRDtK70C+E9We2PTuHbwlPxIbm3+Z8MCTOspjRQp4+GV18iQfEHLvf9bkpfJE3vFVi5BqfSAsUgnAr9RfXiy9PcRnJO9NStdnz1V1qqszmT55G6G8lCdCbNYbB1IJUKS9GE0wuJq158u8urInalLab+dS+f2GX4Tv3XFYm7HrgN+3A59hKXqWhbxGIHqhox01X/CMer5FIjh0eYt1h6uI/ycSF7KgCODhzkKeQCaDZCbc3nSlXKUTJSKpPaOVOCAiM3kN6lkJm/ZAmdaMn085j4Jp3yEv0Bx4OLJ6eO9ADqiqeWDHRDv6Ju1sdR7IA7zvaWo/T3PjGwpbZAwWFyhQ4JPhP6k5swuQDGHPAAAAAElFTkSuQmCC"},1789:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAALNSURBVHgB7ZpNctowFMf/shmyZc+GnqAum5Ku3BOkvYF7goZcAPsAGdoTlN6A3oBuSIdhGPcE9Yo12zBTK+8RYwxBDoMUGyb+zRjJloz1nt6HkQAqykU818FxHNeyLIeqDRTLIo7jYRiGUV6nXAHa7XZPCOGjRKSU/mw2C1TtSgFI8y3btv/hBCAlfpxOp6N9bTXVTWQ2nzJfENJ0/kKB0DOvqGDTBT2by9G+frWc70htngdP0+ijQMh8WQhndyy7WDhzzl6AGgzj9mXj/j9cIR7tV0qEFzZGo65Y4AUwKsDlrbxeAj1hb2yWw9w9EHX6cvCnKwIYxpgJfejLH8JCH3scjoRo0YN87gPDGBGAtNujwksvSPym4/vqIO1nunrvaZZgEG0TYptfZgcPBOObrex9TZrncxYStoUe3TMw5RPaM8AOS0WL65K0Pe4+ffXga3KTiBrkEy4MoS3AOtqs6hLKbE1tf9N6vLlHlyqRcZxP6wJvlR0FrtJ+1uYeXbQF4CRFxcohKVy6SUTaIrnW4jr7yYXixewYtKMQR5PLvgxo8JwDWCM+nXtrf+BZEdtOG5nMykZ84K4rvpEp/Vyfc+Kij6987AxeOUvHYsyJ726ERwW/KkR7mhfIRCieJVNCGI1CHO/rwDsb+IyYhKGD63TtDSU3/oEUZB7sd26lB02Mv40m9j1Mji1YQMrKXH3UvgH1FZ4Hkkz9JaaD3k4H0MT4DBzC2MDA11SZuGy0TYhWDzwkWfYIIlrtGEADLQF48LT0ofUri5dPdIR43SbEmmMN4lxNiNEdgC5VFDogCkUvOUuFRCHdSJNHFYUOiEKna0JMFYU0qQQomzwfSJc+eMMtcdbCSDb5noxll7xdypD2aNenTmbDrXDq9fpQ1WarGubzedRsNnmDxUWJkOKCyWSiFODZvxp0Op3WcrnkJZHC/2rAVqDa4K44FR4AcWXyx/lKYMoAAAAASUVORK5CYII="},1689:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAIZSURBVHgB7ZnRTcMwEIZ/p1T0sSOEDaKqSIgX0glgA8oInYDyioQYATYANghvSKglI3iEPBYhJdyhgqJSp66vxRXyJ1V2ZOdyv309xzEQ8IuCkF6vN6Qihht6Op3eQ4BIADuvlLqDgKqqLiQiIsiIISeGgJUzkCRJGkVRQtXur5uVOqEinV9mNJrPsMDyvqIsy8c8z3WjraZGCpFLetgYFpATVxQKVn3J7pjsXtr0JbtjsntlajeGEI18bOv8NmEf+v1+amrfMzVQ2JzVjOQ0nU9LjP+EAtd5ZGHn1EntcmkIUZ9TKjh0Qc/mMsM6AlCLeXZ+WXjMQyGdX6a1ujXsvME2i0gWfVlEmoU05GgI2IMAzt88UvC4kIkEMFIHpEhDyDtBgG+CAN84Z6HD6yppKfMCs6YX+mWkNBxwEnB8Uw1p7kT7gEWObqsBiciwJk4hVGFDI19DlUjggNMM7Ee4f6+QqM1saJicbcIBJwHZSBVUDLEDhDTqmyDAN05/YsrZMSl/AFanPkq5mn4D14VqFU4zEJVfGcgqb3OqnfffCk4CPiI8wn4rWJSOOd4GpxB6HamcigPsACEL+SYI8E0Q4JsgwDf/+mVOf1f4NIU+4p7jb+ku82UR4xETndB0W63WGza373VFTyYT42uLMYTocK1ot9sD24O7bcDPZh+a+lidE6dp2p3NZhv/lNJEp9MpsiwrEAgEGvkEZZeimfwEZo4AAAAASUVORK5CYII="}}]);